OBJECT Table 36 Sales Header
{
  OBJECT-PROPERTIES
  {
    Date=02.01.18;
    Time=[ 9:25:42];
    Modified=Yes;
    Version List=37,11,65,47,83,119,123,131,133,140,145,141,149,154)DPH11,KH7,OUD,NAV2016(SCP);
  }
  PROPERTIES
  {
    Permissions=TableData 112=m,
                TableData 114=m,
                TableData 349=rimd,
                TableData 84814=rimd;
    DataCaptionFields=No.,Sell-to Customer Name;
    OnInsert=BEGIN
               SalesSetup.GET;

               IF "No." = '' THEN BEGIN
                 TestNoSeries;
                 NoSeriesMgt.InitSeries(GetNoSeriesCode,xRec."No. Series","Posting Date","No.","No. Series");
               END;

               InitRecord;
               InsertMode := TRUE;

               IF GETFILTER("Sell-to Customer No.") <> '' THEN
                 IF GETRANGEMIN("Sell-to Customer No.") = GETRANGEMAX("Sell-to Customer No.") THEN
                   VALIDATE("Sell-to Customer No.",GETRANGEMIN("Sell-to Customer No."));

               IF GETFILTER("Sell-to Contact No.") <> '' THEN
                 IF GETRANGEMIN("Sell-to Contact No.") = GETRANGEMAX("Sell-to Contact No.") THEN
                   VALIDATE("Sell-to Contact No.",GETRANGEMIN("Sell-to Contact No."));

               "Doc. No. Occurrence" := ArchiveManagement.GetNextOccurrenceNo(DATABASE::"Sales Header","Document Type","No.");

               //EISWZR Start
               // KS-START
               IF (("Order Type" <> "Order Type"::"Schmierstoff/Folgemarkt")) THEN
               //   ("Order Type" <> "Order  Type"::Heizîl) or
               //   ("Order Type" <> "Order Type"::kraftstoff)) then
                 BEGIN
               // KS-ENDE
               //EISWZR End

               DimMgt.InsertDocDim(
                 DATABASE::"Sales Header","Document Type","No.",0,
                 "Shortcut Dimension 1 Code","Shortcut Dimension 2 Code");
               //EISWZR Start
               // KS-START
                 END;
               // KS-ENDE
               //EISWZR End

               //EISWZR Start
               //* Vorbelegung vom Sachbearbeiter mit USERID
               "Contact Person" := USERID;

               RE_KuEinr.GET;
               Selbstabholerrabatt := RE_KuEinr.Selbstabholerrabatt;
               //EISWZR End

               // *** START Index VB¯1 ---------
               GetShippingNo();
               // *** ENDE Index VB¯1 ---------

               // Diese Anweisung mu· immer die Letzte sein
               IF WebSite.FINDFIRST THEN
                 SynchMgt.InsertSalesHeader(Rec);

               // START CDLZA - 5.2.2007 - ZJ: not use std.Advance
               IF "Document Type" = "Document Type"::Advance THEN
                 ERROR(Err000);
               IF "Applies-to Doc. Type" = "Applies-to Doc. Type"::Advance THEN
                 ERROR(Err001,FIELDCAPTION("Applies-to Doc. Type"));
               // STOP CDLZA - 5.2.2007 - ZJ: not use std.Advance

               //START WG002 - 19.09.2007 - PV - Generate Dimension Value ORDER while creating Sales Order
               //Turn Off
               //+WAG - 30.12.2013 - AS - M0006995
               //CreateORDERdim;
               //-WAG - 30.12.2013 - AS - M0006995
               //STOP WG002 - 19.09.2007 - PV - Generate Dimension Value ORDER while creating Sales Order

               //START WG034 - PV - 31.12.2007 - fill UserID, Date and Time
               "Created - User ID" := USERID;
               "Created - Date"    := TODAY;
               "Created - Time"    := TIME;
               //STOP WG034 - PV - 31.12.2007 - fill UserID, Date and Time

               //START WG136 - DuLo - 21.03.2012 - M3621
               IF ("Document Type" = "Document Type"::"Credit Memo") OR ("Document Type" = "Document Type"::"Return Order") THEN
                 "External Credit Memo" := TRUE;
               //STOP WG136 - DuLo - 21.03.2012 - M3621

               //START WAG - 01.09.2014 - JV - J10015
               CreateSalesHeaderEXT;
               //STOP WAG - 01.09.2014 - JV - J10015
             END;

    OnModify=BEGIN
               IF WebSite.FINDFIRST THEN
                 SynchMgt.ModifySalesHeader(Rec,xRec);

               // START CDLZA - 5.2.2007 - ZJ: not use std.Advance
               IF "Document Type" = "Document Type"::Advance THEN
                 ERROR(Err000);
               IF "Advance Order No." <> '' THEN
                 ERROR(Err001,FIELDCAPTION("Advance Order No."));
               IF "Advance Payments" <> 0 THEN
                 ERROR(Err001,FIELDCAPTION("Advance Payments"));
               IF "Applies-to Doc. Type" = "Applies-to Doc. Type"::Advance THEN
                 ERROR(Err001,FIELDCAPTION("Applies-to Doc. Type"));
               // STOP CDLZA - 5.2.2007 - ZJ: not use std.Advance

               //START WG034 - PV - 31.12.2007 - fill UserID, Date and Time
               "Modified - User ID" := USERID;
               "Modified - Date"    := TODAY;
               "Modified - Time"    := TIME;
               //STOP WG034 - PV - 31.12.2007 - fill UserID, Date and Time

               //START WAG - 01.09.2014 - JV - J10015
               ModifySalesHeaderEXT;
               //STOP WAG - 01.09.2014 - JV - J10015
             END;

    OnDelete=VAR
               Opp@1000 : Record 5092;
               Opp2@1002 : Record 5092;
               TempOpportunityEntry@1001 : TEMPORARY Record 5093;
               "--EISWZR--"@1106700000 : Integer;
               TE_Kontrolle@1106700002 : Text[200];
               BO_Tourenlîschen@1106700001 : Boolean;
               "---WG---"@1220001 : Integer;
               lRequestRefund@1220000 : Record 84418;
               lSalesInvHdr@1220002 : Record 112;
               lSalesCrMemoHdr@1220003 : Record 114;
               lNoFromTextLine@1220004 : Code[20];
               lRefSetup@1220005 : Record 84414;
               lGenJnlLine@1220006 : Record 81;
               lSalesHdr@1220007 : Record 36;
               lrecNISetup@1220008 : Record 84740;
               locNotFindDoc@1220010 : Boolean;
               lrecCompany@1220009 : Record 2000000006;
               lrecCrMemoBonDtl@1220011 : Record 84739;
               lrec3DSecBonus@1220012 : Record 84814;
             BEGIN
               //EISWZR Start
               IF "Order Type" = "Order Type"::"Monatsabrechnung TS" THEN
               //  ERROR ('Ein Auftrag mit dem Auftragstyp Tankstellenabrechnung darf nicht mehr gelîscht werden');
               //EISWZR End

               IF NOT UserMgt.CheckRespCenter(0,"Responsibility Center") THEN
                 ERROR(
                   Text022,
                   RespCenter.TABLECAPTION,UserMgt.GetSalesFilter());

               //EISWZR Start
               // UB 200905 Start
               // PFR-START
               //IF SalesHeader."No. Printed" <> 0 THEN
               IF "Anzahl gedruckter Proforma" > 0 THEN
                 ERROR(Text047, "No.");
               // PFR-STOP
               // UB 200905 Ende
               //EISWZR End

               //LicPermission.GET(
               //  LicPermission."Object Type"::Codeunit,
               //  CODEUNIT::"Archiving Sales Header");
               //IF (LicPermission."Execute Permission" = LicPermission."Execute Permission"::Yes) THEN
               //  CASE "Document Type" OF
               //    "Document Type"::Quote:
               //      IF ArchSalesHeader.ArchivingYesNo THEN
               //        ArchSalesHeader.ArchivingYesNo(Rec, 1, FALSE);  { 1 - Manually Deleting }
               //    "Document Type"::"Blanket Order","Document Type"::Order:
               //      ArchSalesHeader.ArchivingYesNo(Rec, 1, FALSE);  { 1 - Manually Deleting }
               //  END;

               IF "Service Mgt. Document" AND ("Document Type" = "Document Type"::Invoice) THEN BEGIN
                 SalesLine.RESET;
                 SalesLine.SETRANGE("Document Type",SalesLine."Document Type"::Invoice);
                 SalesLine.SETRANGE("Document No.","No.");
                 SalesLine.SETFILTER("Appl.-to Service Entry",'>%1',0);
                 IF SalesLine.FINDFIRST THEN
                   ERROR(Text046,"No.");
               END;
               //EISWZR Start
               t_Tourenzeilen.RESET;
               t_Tourenzeilen.SETCURRENTKEY(Type,"No.");
               t_Tourenzeilen.SETRANGE("No.","No.");
               IF t_Tourenzeilen.FINDFIRST THEN
               BEGIN
                 TE_Kontrolle := '';
                 TE_Kontrolle := 'Dieser Auftrag befindet sich bereits in der Tourenplanung. ' + '\';
                 TE_Kontrolle := TE_Kontrolle + 'Auftrag trotzdem lîschen ?';
                 IF NOT CONFIRM(TE_Kontrolle,TRUE) THEN
                   ERROR('Verkaufszeile-Lîschen wurde abgebrochen');

                 //Tourenzeilen lîschen
                 IF NOT t_Tourenzeilen.ISEMPTY THEN
                   t_Tourenzeilen.DELETEALL;
               END;
               t_DebAufBem.RESET;
               t_DebAufBem.SETRANGE(t_DebAufBem."Document Type","Document Type");
               t_DebAufBem.SETRANGE(t_DebAufBem."No.","No.");
               IF NOT t_DebAufBem.ISEMPTY THEN
                 t_DebAufBem.DELETEALL;
               //EISWZR end

               IF ("Document Type" = "Document Type"::Quote) OR
                  ("Document Type" = "Document Type"::Order)
               THEN BEGIN
                 Opp.RESET;
                 Opp.SETCURRENTKEY("Sales Document Type","Sales Document No.");
                 IF "Document Type" = "Document Type"::Quote THEN
                   Opp.SETRANGE("Sales Document Type",Opp."Sales Document Type"::Quote)
                 ELSE IF "Document Type" = "Document Type"::Order THEN
                   Opp.SETRANGE("Sales Document Type",Opp."Sales Document Type"::Order);
                 Opp.SETRANGE("Sales Document No.","No.");
                 IF Opp.FINDFIRST THEN BEGIN
                   IF Opp."Sales Document Type" = Opp."Sales Document Type"::Order THEN BEGIN
                     IF CONFIRM(Text040 + Text041 + Text042,TRUE) THEN BEGIN
                       IF NOT TempOpportunityEntry.ISEMPTY THEN
                         TempOpportunityEntry.DELETEALL;
                       TempOpportunityEntry.INIT;
                       TempOpportunityEntry.VALIDATE("Opportunity No.",Opp."No.");
                       TempOpportunityEntry."Sales Cycle Code" := Opp."Sales Cycle Code";
                       TempOpportunityEntry."Contact No." := Opp."Contact No.";
                       TempOpportunityEntry."Contact Company No." := Opp."Contact Company No.";
                       TempOpportunityEntry."Salesperson Code" := Opp."Salesperson Code";
                       TempOpportunityEntry."Campaign No." := Opp."Campaign No.";
                       TempOpportunityEntry."Action Taken" := TempOpportunityEntry."Action Taken"::Lost;
                       TempOpportunityEntry.INSERT;
                       TempOpportunityEntry.SETRANGE("Action Taken",TempOpportunityEntry."Action Taken"::Lost);
                       FORM.RUNMODAL(FORM::"Close Opportunity",TempOpportunityEntry);
                       Opp2.RESET;
                       Opp2.SETCURRENTKEY("Sales Document Type","Sales Document No.");
                       Opp2.SETRANGE("Sales Document Type",Opp."Sales Document Type"::Order);
                       Opp2.SETRANGE("Sales Document No.","No.");
                       Opp2.SETRANGE(Status,Opp.Status::Won);
                       IF Opp2.FINDFIRST THEN
                         ERROR(Text043);
                     END ELSE
                       ERROR(Text044);
                   END;
                   IF Opp.FINDFIRST THEN BEGIN
                     IF Opp."Sales Document Type" = Opp."Sales Document Type"::Order THEN
                       Opp.Status := Opp.Status::Lost;
                     Opp."Sales Document Type" := Opp."Sales Document Type"::" ";
                     Opp."Sales Document No." := '';
                     Opp.MODIFY;
                   END;
                 END;
               END;

               SalesPost.DeleteHeader(Rec,SalesShptHeader,SalesInvHeader,SalesCrMemoHeader,ReturnRcptHeader);
               VALIDATE("Applies-to ID",'');

               DimMgt.DeleteDocDim(DATABASE::"Sales Header","Document Type","No.",0);

               //START - WG141 - 29.02.2012 - MP - new project EE
               lrec3DSecBonus.RESET;
               lrec3DSecBonus.SETCURRENTKEY("Order No.");
               lrec3DSecBonus.SETRANGE("Order No.", "No.");
               IF NOT lrec3DSecBonus.ISEMPTY THEN
                 lrec3DSecBonus.DELETEALL;
               //STOP - WG141 - 29.02.2012 - MP - new project EE

               //START WG047 VP 8.6.2009
               //delete prerefund relations
               IF "Shortcut Dimension 2 Code" = 'PRE' THEN BEGIN
                 SalesLine.RESET;
                 SalesLine.SETRANGE("Document Type", "Document Type");
                 SalesLine.SETRANGE("Document No.", "No.");
                 SalesLine.SETRANGE(Type, SalesLine.Type::"G/L Account");
                 IF SalesLine.FINDSET THEN REPEAT
                   //START - WG133 - 28.02.2012 - MP - NI
                   CLEAR(locNotFindDoc);
                   CLEAR(lSalesInvHdr);
                   CLEAR(lSalesCrMemoHdr);
                   //STOP - WG133 - 28.02.2012 - MP - NI
                   lNoFromTextLine := GetFirstNoFromText(SalesLine.Description);
                   IF lSalesInvHdr.GET(lNoFromTextLine) THEN BEGIN
                     IF lSalesInvHdr."Prerefund Processing" THEN BEGIN
                       CLEAR(lSalesInvHdr."Prerefund Processing");
                       lSalesInvHdr.MODIFY;
                     END;
                     lRefSetup.GET(lSalesInvHdr."VAT Settlement Country Code");
                   END ELSE
                     IF lSalesCrMemoHdr.GET(lNoFromTextLine) THEN BEGIN
                       IF lSalesCrMemoHdr."Prerefund Processing" THEN BEGIN
                         CLEAR(lSalesCrMemoHdr."Prerefund Processing");
                         lSalesCrMemoHdr.MODIFY;
                       END;
                       lRefSetup.GET(lSalesCrMemoHdr."VAT Settlement Country Code");
                     END ELSE
                       //START - WG133 - 28.02.2012 - MP - NI
                       locNotFindDoc := TRUE;
                       //STOP - WG133 - 28.02.2012 - MP - NI

                   //START - WG133 - 28.02.2012 - MP - NI
                   IF locNotFindDoc THEN BEGIN
                     lrecCompany.RESET;
                     lrecCompany.SETFILTER(Name, '<>%1', COMPANYNAME);
                     lrecCompany.SETRANGE(Active, TRUE);
                     IF lrecCompany.FINDSET THEN REPEAT
                       lSalesInvHdr.CHANGECOMPANY(lrecCompany.Name);
                       IF lSalesInvHdr.GET(lNoFromTextLine) THEN BEGIN
                         IF lSalesInvHdr."Prerefund Processing" THEN BEGIN
                           CLEAR(lSalesInvHdr."Prerefund Processing");
                           lSalesInvHdr.MODIFY;
                         END;
                         lRefSetup.GET(lSalesInvHdr."VAT Settlement Country Code");
                       END ELSE BEGIN
                         lSalesCrMemoHdr.CHANGECOMPANY(lrecCompany.Name);
                         IF lSalesCrMemoHdr.GET(lNoFromTextLine) THEN BEGIN
                           IF lSalesCrMemoHdr."Prerefund Processing" THEN BEGIN
                             CLEAR(lSalesCrMemoHdr."Prerefund Processing");
                             lSalesCrMemoHdr.MODIFY;
                           END;
                           lRefSetup.GET(lSalesCrMemoHdr."VAT Settlement Country Code");
                         END;
                       END;
                     UNTIL lrecCompany.NEXT = 0;
                   END;
                   //STOP - WG133 - 28.02.2012 - MP - NI

                   lGenJnlLine.RESET;
                   lGenJnlLine.SETRANGE("Journal Template Name", lRefSetup."Gen.J.T.for Prerefund");
                   lGenJnlLine.SETRANGE("Journal Batch Name", lRefSetup."Gen.J.B.for Prerefund");
                   lGenJnlLine.SETRANGE("Document No.", "No.");
                   IF NOT lGenJnlLine.ISEMPTY THEN
                     lGenJnlLine.DELETEALL(TRUE);

                   //START - WG133 - 28.02.2012 - MP - NI
                   lrecNISetup.GET();
                   lGenJnlLine.RESET;
                   lGenJnlLine.SETRANGE("Journal Template Name", lrecNISetup."Gen.J.T.for Preref. Bonus");
                   lGenJnlLine.SETRANGE("Journal Batch Name", lrecNISetup."Gen.J.B.for Preref. Bonus");
                   lGenJnlLine.SETRANGE("External Document No.", "Posting No.");
                   IF NOT lGenJnlLine.ISEMPTY THEN
                     lGenJnlLine.DELETEALL(TRUE);

                   lrecCrMemoBonDtl.RESET;
                   lrecCrMemoBonDtl.SETRANGE("Credit Memo No.", "Posting No.");
                   IF NOT lrecCrMemoBonDtl.ISEMPTY THEN
                     lrecCrMemoBonDtl.DELETEALL(TRUE);
                   //STOP - WG133 - 28.02.2012 - MP - NI

                   IF "Posting No." <> '' THEN BEGIN
                     lSalesHdr.RESET;
                     lSalesHdr.SETRANGE("Document Type", lSalesHdr."Document Type"::Invoice);
                     lSalesHdr.SETRANGE("Applies-to Doc. No.", "Posting No.");
                     IF lSalesHdr.FINDFIRST THEN
                       lSalesHdr.DELETE(TRUE);
                   END;
                 UNTIL SalesLine.NEXT = 0;
               END;
               //STOP WG047 VP 8.6.2009

               SalesLine.RESET;
               //SalesLine.LOCKTABLE;

               WhseRequest.SETRANGE("Source Type",DATABASE::"Sales Line");
               WhseRequest.SETRANGE("Source Subtype","Document Type");
               WhseRequest.SETRANGE("Source No.","No.");
               IF NOT WhseRequest.ISEMPTY THEN
                 WhseRequest.DELETEALL(TRUE);

               SalesLine.SETRANGE("Document Type","Document Type");
               SalesLine.SETRANGE("Document No.","No.");
               SalesLine.SETRANGE(Type,SalesLine.Type::"Charge (Item)");

               DeleteSalesLines;
               SalesLine.SETRANGE(Type);
               DeleteSalesLines;

               SalesCommentLine.SETRANGE("Document Type","Document Type");
               SalesCommentLine.SETRANGE("No.","No.");
               IF NOT SalesCommentLine.ISEMPTY THEN
                 SalesCommentLine.DELETEALL;

               //AdvanceSalesHeader.LOCKTABLE;
               AdvanceSalesHeader.SETRANGE("Document Type","Document Type"::Advance);
               AdvanceSalesHeader.SETRANGE("Advance Order No.","No.");
               IF AdvanceSalesHeader.FINDFIRST THEN BEGIN
                 AdvanceSalesHeader."Advance Order No." := '';
                 AdvanceSalesHeader.MODIFY;
               END;

               ServDocRegister.SETCURRENTKEY("Sales Document Type","Sales Document No.");
               CASE "Document Type" OF
                 "Document Type"::Invoice:
                   BEGIN
                     ServDocRegister.SETRANGE("Sales Document Type",ServDocRegister."Sales Document Type"::"Sales Invoice");
                     ServDocRegister.SETRANGE("Sales Document No.","No.");
                     IF NOT ServDocRegister.ISEMPTY THEN
                       ServDocRegister.DELETEALL;
                   END;
                 "Document Type"::"Credit Memo":
                   BEGIN
                     ServDocRegister.SETRANGE("Sales Document Type",ServDocRegister."Sales Document Type"::"Credit Memo");
                     ServDocRegister.SETRANGE("Sales Document No.","No.");
                     IF NOT ServDocRegister.ISEMPTY THEN
                       ServDocRegister.DELETEALL;
                   END;
               END;

               //START WG047 - 29.04.2009 - JV - Refunds
               IF ("Minimum Preref.Amt Invoice")AND
                  ("Document Type"="Document Type"::Invoice) THEN BEGIN
                 lRequestRefund.RESET;
                 lRequestRefund.SETRANGE("Minimum Prov. Invoice No.","No.");
                 lRequestRefund.SETRANGE("Minimum Provision Inv. Created",TRUE);
                 IF lRequestRefund.FINDFIRST THEN BEGIN
                   lRequestRefund."Minimum Provision Inv. Created" := FALSE;
                   lRequestRefund."Minimum Prov. Invoice No." := '';
                   lRequestRefund."Minimum Prov. Invoice Amount" := 0;
                   lRequestRefund.MODIFY;
                 END;
               END;
               IF ("Refund Provision Invoice")AND
                  ("Document Type"="Document Type"::Invoice) THEN BEGIN
                 lRequestRefund.RESET;
                 lRequestRefund.SETRANGE("Provision Invoice No.","No.");
                 lRequestRefund.SETRANGE("Provision Inv. Created",TRUE);
                 IF lRequestRefund.FINDFIRST THEN BEGIN
                   lRequestRefund."Provision Inv. Created" := FALSE;
                   lRequestRefund."Provision Invoice No." := '';
                   lRequestRefund."Provision Invoice Amount" := 0;
                   lRequestRefund.MODIFY;
                 END;
               END;
               //STOP WG047 - 29.04.2009 - JV - Refunds

               IF (SalesShptHeader."No." <> '') OR
                  (SalesInvHeader."No." <> '') OR
                  (SalesCrMemoHeader."No." <> '') OR
                  (ReturnRcptHeader."No." <> '')
               THEN BEGIN
                 DELETE;
                 COMMIT;

                 IF SalesShptHeader."No." <> '' THEN
                   IF CONFIRM(
                     Text000,TRUE,
                     SalesShptHeader."No.")
                   THEN BEGIN
                     SalesShptHeader.SETRECFILTER;
                     SalesShptHeader.PrintRecords(TRUE);
                   END;

                 IF SalesInvHeader."No." <> '' THEN
                   IF CONFIRM(
                     Text001,TRUE,
                     SalesInvHeader."No.")
                   THEN BEGIN
                     SalesInvHeader.SETRECFILTER;
                     SalesInvHeader.PrintRecords(TRUE);
                   END;

                 IF SalesCrMemoHeader."No." <> '' THEN
                   IF CONFIRM(
                     Text002,TRUE,
                     SalesCrMemoHeader."No.")
                   THEN BEGIN
                     SalesCrMemoHeader.SETRECFILTER;
                     SalesCrMemoHeader.PrintRecords(TRUE);
                   END;

                 IF ReturnRcptHeader."No." <> '' THEN
                   IF CONFIRM(
                     Text023,TRUE,
                     ReturnRcptHeader."No.")
                   THEN BEGIN
                     ReturnRcptHeader.SETRECFILTER;
                     ReturnRcptHeader.PrintRecords(TRUE);
                   END;
               END;

               IF WebSite.FINDFIRST THEN
                 SynchMgt.DeleteSalesHeader(Rec);

               //START CDLZA - 5.2.2007 - ZJ
               AdvanceCU.DeleteLink(1, "Document Type", "No.");
               //STOP CDLZA - 5.2.2007 - ZJ

               //START WG002 - 19.09.2007 - PV - Generate Dimension Value ORDER while creating Sales Order
               //DeleteORDERdim;
               //STOP WG002 - 19.09.2007 - PV - Generate Dimension Value ORDER while creating Sales Order

               //START WAG - 01.09.2014 - JV - J10015
               DeleteSalesHeaderEXT;
               //STOP WAG - 01.09.2014 - JV - J10015
             END;

    OnRename=BEGIN
               ERROR(Text003,TABLECAPTION);
             END;

    CaptionML=[CSY=Prodejn° hlaviüka;
               ENU=Sales Header];
    LookupFormID=Form45;
    DrillDownFormID=Form45;
  }
  FIELDS
  {
    { 1   ;   ;Document Type       ;Option        ;OnValidate=BEGIN

                                                                //START NAV2016 - 14.9.2017 - KH - Assignment
                                                                IF ("Document Type" <> 0) AND ("No." <> '') THEN BEGIN
                                                                  GetSalesHeaderEXT;
                                                                  NAV2016AssignmentManagement.GetSalesHeadAssignmentSign(Rec, SalesHeaderEXT, 2);
                                                                  ModifySalesHeaderEXT;
                                                                  CALCFIELDS("NAV2016 Assignment");
                                                                END;
                                                                //STOP NAV2016 - 14.9.2017 - KH - Assignment
                                                              END;

                                                   CaptionML=[CSY=Typ dokladu;
                                                              ENU=Document Type];
                                                   OptionCaptionML=[CSY=Popt†vka,Objedn†vka,Faktura,Dobropis,Hromadn† objedn†vka,Objedn†vka vratky,Z†lohaSTD;
                                                                    ENU=Quote,Order,Invoice,Credit Memo,Blanket Order,Return Order,AdvanceSTD];
                                                   OptionString=Quote,Order,Invoice,Credit Memo,Blanket Order,Return Order,Advance }
    { 2   ;   ;Sell-to Customer No.;Code20        ;TableRelation=Customer;
                                                   OnValidate=VAR
                                                                "--EISWZR--"@1106700000 : Integer;
                                                                LO_REC_Debitor@1106700001 : Record 18;
                                                                LO_RE_ShiptoAddress@1000000000 : Record 222;
                                                                "--WG034--"@1220000 : Boolean;
                                                                recCont@1220001 : Record 5050;
                                                                lrecSell@1220002 : Record 18;
                                                                lrecNoSeries@1220003 : Record 308;
                                                                lrecCompInfo@1220004 : Record 79;
                                                                WAGDimensionMngmt@1220005 : Codeunit 61019;
                                                              BEGIN
                                                                TESTFIELD(Status,Status::Open);
                                                                IF ("Sell-to Customer No." <> xRec."Sell-to Customer No.") AND
                                                                   (xRec."Sell-to Customer No." <> '')
                                                                THEN BEGIN

                                                                  // START CDLZA - 5.2.2007 - ZJ
                                                                  CALCFIELDS("Linked Advance");
                                                                  IF "Linked Advance" THEN
                                                                    ERROR(tAdvanceExists);
                                                                  // STOP CDLZA - 5.2.2007 - ZJ

                                                                  IF HideValidationDialog OR NOT GUIALLOWED THEN
                                                                    Confirmed := TRUE
                                                                  ELSE
                                                                    Confirmed := CONFIRM(Text004,FALSE,FIELDCAPTION("Sell-to Customer No."));
                                                                  IF Confirmed THEN BEGIN
                                                                    SalesLine.SETRANGE("Document Type","Document Type");
                                                                    SalesLine.SETRANGE("Document No.","No.");
                                                                    IF "Sell-to Customer No." = '' THEN BEGIN
                                                                      IF SalesLine.FINDFIRST THEN
                                                                        ERROR(
                                                                          Text005,
                                                                          FIELDCAPTION("Sell-to Customer No."));
                                                                      INIT;
                                                                      SalesSetup.GET;
                                                                      "No. Series" := xRec."No. Series";
                                                                      InitRecord;
                                                                      IF xRec."Shipping No." <> '' THEN BEGIN
                                                                        "Shipping No. Series" := xRec."Shipping No. Series";
                                                                        "Shipping No." := xRec."Shipping No.";
                                                                      END;
                                                                      IF xRec."Posting No." <> '' THEN BEGIN
                                                                        "Posting No. Series" := xRec."Posting No. Series";
                                                                        "Posting No." := xRec."Posting No.";
                                                                        //NAV-18944+
                                                                        "Internal document" := xRec."Internal document";
                                                                        //NAV-18944-
                                                                      END;
                                                                      IF xRec."Return Receipt No." <> '' THEN BEGIN
                                                                        "Return Receipt No. Series" := xRec."Return Receipt No. Series";
                                                                        "Return Receipt No." := xRec."Return Receipt No.";
                                                                      END;
                                                                      EXIT;
                                                                    END;
                                                                    IF "Document Type" =  "Document Type"::Order THEN
                                                                      SalesLine.SETFILTER("Quantity Shipped",'<>0')
                                                                    ELSE IF "Document Type" =  "Document Type"::Invoice THEN BEGIN
                                                                      SalesLine.SETRANGE("Sell-to Customer No.",xRec."Sell-to Customer No.");
                                                                      SalesLine.SETFILTER("Shipment No.",'<>%1','');
                                                                    END;

                                                                    IF SalesLine.FINDFIRST THEN
                                                                      IF "Document Type" = "Document Type"::Order THEN
                                                                        SalesLine.TESTFIELD("Quantity Shipped",0)
                                                                      ELSE
                                                                        SalesLine.TESTFIELD("Shipment No.",'');
                                                                    SalesLine.SETRANGE("Shipment No.");
                                                                    SalesLine.SETRANGE("Quantity Shipped");

                                                                    IF "Document Type" = "Document Type"::"Return Order" THEN
                                                                      SalesLine.SETFILTER("Return Qty. Received",'<>0')
                                                                    ELSE
                                                                      IF "Document Type" =  "Document Type"::"Credit Memo" THEN BEGIN
                                                                        SalesLine.SETRANGE("Sell-to Customer No.",xRec."Sell-to Customer No.");
                                                                        SalesLine.SETFILTER("Return Receipt No.",'<>%1','');
                                                                      END;

                                                                    IF SalesLine.FINDFIRST THEN
                                                                      IF "Document Type" = "Document Type"::"Return Order" THEN
                                                                        SalesLine.TESTFIELD("Return Qty. Received",0)
                                                                      ELSE
                                                                        SalesLine.TESTFIELD("Return Receipt No.",'');
                                                                    SalesLine.RESET
                                                                  END ELSE BEGIN
                                                                    Rec := xRec;
                                                                    EXIT;
                                                                  END;
                                                                END;

                                                                IF ("Document Type" = "Document Type"::Order) AND
                                                                   (xRec."Sell-to Customer No." <> "Sell-to Customer No.")
                                                                THEN BEGIN
                                                                  SalesLine.SETRANGE("Document Type",SalesLine."Document Type"::Order);
                                                                  SalesLine.SETRANGE("Document No.","No.");
                                                                  SalesLine.SETFILTER("Purch. Order Line No.",'<>0');
                                                                  IF SalesLine.FINDFIRST THEN
                                                                    ERROR(
                                                                      Text006,
                                                                      FIELDCAPTION("Sell-to Customer No."));
                                                                  SalesLine.RESET;
                                                                END;

                                                                GetCust("Sell-to Customer No.");

                                                                // 12.12.2006 wz.ub     13
                                                                IF NOT ((GeschBer_Auftragstyp <> GeschBer_Auftragstyp::Tankkarte) OR
                                                                   (GeschBer_Auftragstyp <> GeschBer_Auftragstyp::Maut)) THEN

                                                                  Cust.CheckBlockedCustOnDocs(Cust,"Document Type",FALSE,FALSE);
                                                                // 12.12.2006 wz.ub     13

                                                                // WG032 09.01.2008 - CDLAC
                                                                "Bank Account No." := Cust."Bank Account No.";
                                                                // WG032 09.01.2008 - CDLAC

                                                                Cust.TESTFIELD("Gen. Bus. Posting Group");
                                                                "Sell-to Customer Template Code" := '';
                                                                "Sell-to Customer Name" := Cust.Name;
                                                                "Sell-to Customer Name 2" := Cust."Name 2";
                                                                "Sell-to Address" := Cust.Address;
                                                                "Sell-to Address 2" := Cust."Address 2";
                                                                "Sell-to City" := Cust.City;
                                                                "Sell-to Post Code" := Cust."Post Code";
                                                                "Sell-to County" := Cust.County;
                                                                "Sell-to Country Code" := Cust."Country Code";
                                                                IF NOT SkipSellToContact THEN
                                                                  "Sell-to Contact" := Cust.Contact;
                                                                "Gen. Bus. Posting Group" := Cust."Gen. Bus. Posting Group";
                                                                "VAT Bus. Posting Group" := Cust."VAT Bus. Posting Group";

                                                                //START CDLOUD - 19.11.2015 - DuLo - Special tax arrangement - SK 2016
                                                                SalesSetup.GET;
                                                                IF SalesSetup."Special Tax Arrangement" AND
                                                                   (SalesSetup."OUD Valid From Date" <> 0D) AND
                                                                   ("VAT Taxation Date" <> 0D) AND
                                                                   ("VAT Taxation Date" >= SalesSetup."OUD Valid From Date")
                                                                THEN BEGIN
                                                                  IF ((SalesSetup."OUD Valid To Date" <> 0D) AND ("VAT Taxation Date" <= SalesSetup."OUD Valid To Date")) OR
                                                                     (SalesSetup."OUD Valid To Date" = 0D)
                                                                  THEN BEGIN
                                                                    VATBusPostGroup.GET("VAT Bus. Posting Group");
                                                                    VATBusPostGroup.TESTFIELD("OUD VAT Bus. Posting Group");
                                                                    "VAT Bus. Posting Group" := VATBusPostGroup."OUD VAT Bus. Posting Group";
                                                                  END;
                                                                END;
                                                                //STOP CDLOUD - 19.11.2015 - DuLo - Special tax arrangement - SK 2016

                                                                "Tax Area Code" := Cust."Tax Area Code";
                                                                "Tax Liable" := Cust."Tax Liable";

                                                                //  09.08.07   wz.ub
                                                                "Amortisationszuschlag berechn.":= Cust."Amortisationszuschlag berechn.";
                                                                "Satz fur Amortisation" := Cust."Satz fur Amortisation";
                                                                IF "Amortisationszuschlag berechn." THEN
                                                                  MESSAGE(Text60000,"Satz fur Amortisation");
                                                                //  09.08.07   wz.ub

                                                                GLSetup.GET;
                                                                IF GLSetup."Bill-to/Sell-to VAT Calc." = GLSetup."Bill-to/Sell-to VAT Calc."::"Sell-to/Buy-from No." THEN
                                                                  "VAT Registration No." := Cust."VAT Registration No.";

                                                                // START CDLS1 - 24.10.2005 - MV - added code in triggers
                                                                "VAT Reg. No. SK" := Cust."VAT Reg. No. SK";
                                                                // STOP CDLS1 - 24.10.2005 - MV - added code in triggers

                                                                "Registration No." := Cust."Registration No.";
                                                                "Shipping Advice" := Cust."Shipping Advice";
                                                                "Responsibility Center" := UserMgt.GetRespCenter(0,Cust."Responsibility Center");

                                                                // *** START Index VB¯1 ---------
                                                                "Tank-Truck Invoicing Type" := Cust."Tank-Truck Invoicing Type";
                                                                "Invoice Mailing" := Cust."Invoice Mailing";
                                                                // *** ENDE Index VB¯1 ---------

                                                                // *** START Index SR¯5 ---------
                                                                "SARE-KZ" := Cust."SARE-KZ";
                                                                "Schlussel SARY" := Cust."Schlussel SARY";
                                                                // *** ENDE Index SR¯5 ---------

                                                                //EISWZR Start
                                                                //* VALIDATE("Location Code",UserMgt.GetLocation(0,Cust."Location Code","Responsibility Center"));
                                                                IF ("Order Type" = "Order Type"::"Schmierstoff/Folgemarkt") THEN
                                                                  BEGIN
                                                                    // 14.05.07   wz.jd     17 START
                                                                    LO_REC_Debitor.GET("Sell-to Customer No.");
                                                                    IF LO_REC_Debitor.Hauptlieferadresse <> '' THEN BEGIN
                                                                      LO_RE_ShiptoAddress.RESET;
                                                                      LO_RE_ShiptoAddress.SETRANGE("Customer No.","Sell-to Customer No.");
                                                                      LO_RE_ShiptoAddress.SETRANGE(Code,LO_REC_Debitor.Hauptlieferadresse);
                                                                      IF LO_RE_ShiptoAddress.FINDFIRST THEN BEGIN
                                                                        LO_RE_ShiptoAddress.TESTFIELD("Lubricant Location Code");
                                                                        VALIDATE("Location Code", LO_RE_ShiptoAddress."Lubricant Location Code");
                                                                        VALIDATE("Ship-to Code",LO_RE_ShiptoAddress.Code);
                                                                      END;
                                                                    END ELSE BEGIN
                                                                    // 14.05.07   wz.jd     17 STOP
                                                                      Cust.TESTFIELD("LocationCode of LubricantStock");
                                                                      VALIDATE("Location Code", Cust."LocationCode of LubricantStock");
                                                                    END;
                                                                  END
                                                                ELSE
                                                                  VALIDATE("Location Code",UserMgt.GetLocation(0,Cust."Location Code","Responsibility Center"));
                                                                //EISWZR End

                                                                IF "Sell-to Customer No." = xRec."Sell-to Customer No." THEN BEGIN
                                                                  IF ShippedSalesLinesExist OR ReturnReceiptExist THEN BEGIN
                                                                    TESTFIELD("VAT Bus. Posting Group",xRec."VAT Bus. Posting Group");
                                                                    TESTFIELD("Gen. Bus. Posting Group",xRec."Gen. Bus. Posting Group");
                                                                  END;
                                                                END;

                                                                "Sell-to IC Partner Code" := Cust."IC Partner Code";
                                                                "Send IC Document" := ("Sell-to IC Partner Code" <> '') AND ("IC Direction" = "IC Direction"::Outgoing);

                                                                IF Cust."Bill-to Customer No." <> '' THEN
                                                                  VALIDATE("Bill-to Customer No.",Cust."Bill-to Customer No.")
                                                                ELSE BEGIN
                                                                  IF "Bill-to Customer No." = "Sell-to Customer No." THEN
                                                                    SkipBillToContact := TRUE;
                                                                  VALIDATE("Bill-to Customer No.","Sell-to Customer No.");
                                                                  SkipBillToContact := FALSE;
                                                                END;

                                                                // 14.05.07   wz.jd     17 START
                                                                IF "Ship-to Code" = '' THEN
                                                                  VALIDATE("Ship-to Code",'');
                                                                // 14.05.07   wz.jd     17 STOP

                                                                //EISWZR Start
                                                                "Freight Table" := Cust."Freight Table";
                                                                "Type of Contingent" := Cust."Type of Contingent";
                                                                "Margin (LCY)"         := Cust."Margin (LCY)";
                                                                "Print SalesPr. on DeliveryNote" := Cust."Print SalesPriceOnDeliveryNote";
                                                                Gebietscode := Cust."Territory Code";

                                                                //* öbertrag Druckbemerkungen aus Debitorenstamm
                                                                // zuerst prÅfen, ob schon Bemerkungen vorhanden sind ...
                                                                t_DebAufBem.RESET;
                                                                t_DebAufBem.SETRANGE(t_DebAufBem."Document Type","Document Type");
                                                                t_DebAufBem.SETRANGE(t_DebAufBem."No.","No.");
                                                                IF NOT t_DebAufBem.FINDFIRST THEN BEGIN
                                                                  //Auftragsbemerkungen anlegen ...
                                                                  t_DebBem.SETRANGE(t_DebBem.Type,t_DebBem.Type::Debitor);
                                                                  t_DebBem.SETRANGE(t_DebBem."No.","Sell-to Customer No.");
                                                                  IF t_DebBem.FINDFIRST THEN BEGIN
                                                                    REPEAT
                                                                      t_DebAufBem.INIT;
                                                                      t_DebAufBem."Document Type"      := "Document Type";
                                                                      t_DebAufBem."No."         := "No.";
                                                                      t_DebAufBem."Currency No."    := t_DebBem."Currency No.";
                                                                      t_DebAufBem."Print to" := t_DebBem."Print to";
                                                                      t_DebAufBem.Text          := t_DebBem.Text;
                                                                      t_DebAufBem.INSERT;
                                                                    UNTIL t_DebBem.NEXT = 0;
                                                                  END;
                                                                END;
                                                                //EISWZR End

                                                                IF "Sell-to IC Partner Code" = '' THEN
                                                                  TESTFIELD("Bill-to IC Partner Code",'')
                                                                ELSE
                                                                  TESTFIELD("Bill-to IC Partner Code");

                                                                GetShippingTime(FIELDNO("Sell-to Customer No."));

                                                                IF (xRec."Sell-to Customer No." <> "Sell-to Customer No.") OR
                                                                   (xRec."Currency Code" <> "Currency Code") OR
                                                                   (xRec."Gen. Bus. Posting Group" <> "Gen. Bus. Posting Group") OR
                                                                   (xRec."VAT Bus. Posting Group" <> "VAT Bus. Posting Group")
                                                                THEN
                                                                  RecreateSalesLines(FIELDCAPTION("Sell-to Customer No."));

                                                                IF NOT SkipSellToContact THEN
                                                                  UpdateSellToCont("Sell-to Customer No.");

                                                                // START CDLINT - 12.8.05 - MV - modifications for Intrastat
                                                                "Transaction Type" := Cust."Transaction Type";
                                                                "Transport Method" := Cust."Transport Method";
                                                                // STOP CDLINT - 12.8.05 - MV - modifications for Intrastat

                                                                // START CDLCHP - 2.2.2007 - ZJ:
                                                                IF CustPostGroup.GET(Cust."Customer Posting Group") THEN
                                                                BEGIN
                                                                  "G/L Account No.":=CustPostGroup."Receivables Account";
                                                                  IF "Different G/L Account Code" <>'' THEN
                                                                    VALIDATE("Different G/L Account Code");
                                                                END
                                                                ELSE
                                                                BEGIN
                                                                  "G/L Account No.":='';
                                                                  "Different G/L Account Code":='';
                                                                END;
                                                                // STOP CDLCHP - 2.2.2007 - ZJ:

                                                                //EISWZR Start
                                                                IF "Sell-to Customer No." <> '' THEN
                                                                BEGIN
                                                                  IF LO_REC_Debitor.GET("Sell-to Customer No.") THEN
                                                                    "Self-Collector" := LO_REC_Debitor."Self-Collector";
                                                                END;
                                                                //EISWZR End

                                                                //START WG033 - 27.11.2007 - PV - Due date calculation accoring to Business Area
                                                                IF TbCustBusinessArea.GET("Sell-to Customer No.", Geschaftsbereich) THEN BEGIN
                                                                  IF TbCustBusinessArea."Payment Terms Code" <> '' THEN
                                                                   VALIDATE("Payment Terms Code", TbCustBusinessArea."Payment Terms Code");
                                                                END;
                                                                //STOP WG033 - 27.11.2007 - PV - Due date calculation accoring to Business Area

                                                                //START: WG034 - JD - 27.12.2007
                                                                IF GetContactFromCust(recCont) THEN
                                                                  VALIDATE("Correspondence Type", recCont."Correspondence Type");
                                                                //STOP: WG034 - JD - 27.12.2007

                                                                //START 034 - 04.02.2008 - Wholesales default values
                                                                IF ("Order Type" = "Order Type"::Kraftstoff) AND ("Kind of Order" > 0) THEN BEGIN

                                                                //START WG - PV - 05.02.2008 - Added checkings
                                                                  LO_REC_Debitor.GET("Sell-to Customer No.");
                                                                  IF LO_REC_Debitor."Reason of Blocking" > 0 THEN
                                                                    ERROR(Err003, LO_REC_Debitor.Name, LO_REC_Debitor."Reason of Blocking");
                                                                //STOP WG - PV - 05.02.2008 - Added checkings

                                                                  SalesSetup.GET;
                                                                  VALIDATE("Shortcut Dimension 1 Code", SalesSetup."Wholes-Def. value Global Dim 1");
                                                                  VALIDATE("VAT Settlement Country Code", SalesSetup."Wholes-Def.VAT Setlem.Country");
                                                                  VALIDATE("Posting No. Series", SalesSetup."Wholes-Posting No. Series");
                                                                  IF "Kind of Order" IN ["Kind of Order"::"Vendor->Customer", "Kind of Order"::"Stock->Customer",
                                                                                         "Kind of Order"::"Consignment->Customer"] THEN BEGIN
                                                                    VALIDATE("Shortcut Dimension 2 Code", SalesSetup."Wholes-Def. value Global Dim 2");
                                                                    //+WAG - 10.06.2014 - AS - M0009084
                                                                    WAGDimensionMngmt.SetSalesHeaderWholeSale(Rec,FALSE);

                                                                   //-WAG - 10.06.2014 - AS - M0009084
                                                                  END;
                                                                END;
                                                                //STOP 034 - 04.02.2008 - Wholesales default values

                                                                //START - WG - 07.06.2012 - RCH - M3959 - Customer Adress History
                                                                IF lrecSell.GET("Sell-to Customer No.") THEN BEGIN
                                                                   SellToAdressH(lrecSell,"VAT Taxation Date");
                                                                   END;
                                                                //STOP - WG - 07.06.2012 - RCH - M3959 - Customer Adress History

                                                                //START - WG - 05.08.2013 - RCH - M6036
                                                                lrecCompInfo.GET;
                                                                IF lrecCompInfo."Country Code" = 'CZ' THEN BEGIN
                                                                   IF "No. Series" <> '' THEN BEGIN
                                                                      IF lrecNoSeries.GET("No. Series") THEN BEGIN
                                                                         IF lrecNoSeries.POV THEN BEGIN
                                                                            IF "Sell-to Customer No." = '26415623' THEN BEGIN
                                                                               VALIDATE("Kind of Order","Kind of Order"::"Vendor->Stock");
                                                                               END
                                                                            ELSE BEGIN
                                                                               VALIDATE("Kind of Order","Kind of Order"::"Vendor->Customer");
                                                                               END;
                                                                            END;
                                                                         END;
                                                                      END;
                                                                   END;
                                                                IF lrecCompInfo."Country Code" = 'SK' THEN BEGIN
                                                                   IF "No. Series" <> '' THEN BEGIN
                                                                      IF lrecNoSeries.GET("No. Series") THEN BEGIN
                                                                         IF lrecNoSeries.POV THEN BEGIN
                                                                            IF "Sell-to Customer No." = '26415623' THEN BEGIN
                                                                               VALIDATE("Kind of Order","Kind of Order"::"Vendor->Customer");
                                                                               END
                                                                            ELSE BEGIN
                                                                               IF "Sell-to Customer No." = '36783277' THEN BEGIN
                                                                                  VALIDATE("Kind of Order","Kind of Order"::"Vendor->Stock");
                                                                                  END
                                                                               ELSE BEGIN
                                                                //                  "Kind of Order" := "Kind of Order"::"Vendor->Customer";
                                                                                  END;
                                                                               END;
                                                                            END;
                                                                         END;
                                                                      END;
                                                                   END;

                                                                //STOP - WG - 05.08.2013 - RCH - M6036
                                                              END;

                                                   CaptionML=[CSY=Z†kazn°k-ü°slo;
                                                              ENU=Sell-to Customer No.];
                                                   SQL Data Type=Variant;
                                                   Description=CDLS1 }
    { 3   ;   ;No.                 ;Code20        ;OnValidate=BEGIN
                                                                IF "No." <> xRec."No." THEN BEGIN
                                                                  SalesSetup.GET;
                                                                  NoSeriesMgt.TestManual(GetNoSeriesCode);
                                                                  "No. Series" := '';
                                                                END;

                                                                //START NAV2016 - 14.9.2017 - KH - Assignment
                                                                IF ("Document Type" <> 0) AND ("No." <> '') THEN BEGIN
                                                                  GetSalesHeaderEXT;
                                                                  NAV2016AssignmentManagement.GetSalesHeadAssignmentSign(Rec, SalesHeaderEXT, 2);
                                                                  ModifySalesHeaderEXT;
                                                                  CALCFIELDS("NAV2016 Assignment");
                                                                END;
                                                                //STOP NAV2016 - 14.9.2017 - KH - Assignment
                                                              END;

                                                   CaptionML=[CSY=¨°slo;
                                                              ENU=No.] }
    { 4   ;   ;Bill-to Customer No.;Code20        ;TableRelation=Customer;
                                                   OnValidate=VAR
                                                                TempDocDim@1000 : TEMPORARY Record 357;
                                                                lCustLedgEntry@1220000 : Record 21;
                                                                lrecPaymMethod@1220001 : Record 289;
                                                                lrecBill@1220002 : Record 18;
                                                              BEGIN
                                                                TESTFIELD(Status,Status::Open);
                                                                IF (xRec."Bill-to Customer No." <> "Bill-to Customer No.") AND
                                                                   (xRec."Bill-to Customer No." <> '')
                                                                THEN BEGIN

                                                                  // START CDLZA - 5.2.2007 - ZJ
                                                                  CALCFIELDS("Linked Advance");
                                                                  IF "Linked Advance" THEN
                                                                    ERROR(tAdvanceExists);
                                                                  // orig.code: IF HideValidationDialog THEN
                                                                  //orig.code: IF HideValidationDialog OR "Tax Document" THEN         //CDLZA - 02.09.2009 - MP - modified
                                                                  // STOP CDLZA - 5.2.2007 - ZJ

                                                                  //orig.code: IF HideValidationDialog OR NOT GUIALLOWED THEN         //CDLZA - 02.09.2009 - MP - modified
                                                                  IF HideValidationDialog OR NOT GUIALLOWED OR "Tax Document" THEN    //CDLZA - 02.09.2009 - MP - modified
                                                                    Confirmed := TRUE
                                                                  ELSE
                                                                    Confirmed := CONFIRM(Text004,FALSE,FIELDCAPTION("Bill-to Customer No."));
                                                                  IF Confirmed THEN BEGIN
                                                                    SalesLine.SETRANGE("Document Type","Document Type");
                                                                    SalesLine.SETRANGE("Document No.","No.");
                                                                    IF "Document Type" = "Document Type"::Order THEN
                                                                      SalesLine.SETFILTER("Quantity Shipped",'<>0')
                                                                    ELSE
                                                                      IF "Document Type" =  "Document Type"::Invoice THEN
                                                                        SalesLine.SETFILTER("Shipment No.",'<>%1','');

                                                                    IF SalesLine.FINDFIRST THEN
                                                                      IF "Document Type" = "Document Type"::Order THEN
                                                                        SalesLine.TESTFIELD("Quantity Shipped",0)
                                                                      ELSE
                                                                        SalesLine.TESTFIELD("Shipment No.",'');
                                                                    SalesLine.SETRANGE("Shipment No.");
                                                                    SalesLine.SETRANGE("Quantity Shipped");

                                                                    IF "Document Type" = "Document Type"::"Return Order" THEN
                                                                      SalesLine.SETFILTER("Return Qty. Received",'<>0')
                                                                    ELSE
                                                                      IF "Document Type" =  "Document Type"::"Credit Memo" THEN
                                                                        SalesLine.SETFILTER("Return Receipt No.",'<>%1','');

                                                                    IF SalesLine.FINDFIRST THEN
                                                                      IF "Document Type" = "Document Type"::"Return Order" THEN
                                                                        SalesLine.TESTFIELD("Return Qty. Received",0)
                                                                      ELSE
                                                                        SalesLine.TESTFIELD("Return Receipt No.",'');
                                                                    SalesLine.RESET
                                                                  END ELSE
                                                                    "Bill-to Customer No." := xRec."Bill-to Customer No.";
                                                                END;

                                                                GetCust("Bill-to Customer No.");

                                                                // 12.12.2006 wz.ub     13
                                                                IF NOT ((GeschBer_Auftragstyp <> GeschBer_Auftragstyp::Tankkarte) OR
                                                                   (GeschBer_Auftragstyp <> GeschBer_Auftragstyp::Maut)) THEN
                                                                  Cust.CheckBlockedCustOnDocs(Cust,"Document Type",FALSE,FALSE);
                                                                // 12.12.2006 wz.ub     13

                                                                Cust.TESTFIELD("Customer Posting Group");

                                                                //WAG - 14072016 - RAKU - NAV-17204 - begin
                                                                //WG - RAKU - 15022016 - NAV-19840 - begin
                                                                //Cust.CheckBlockedWAG(Cust , FALSE);
                                                                //WG - RAKU - 15022016 - NAV-19840 - end
                                                                //WAG - 14072016 - RAKU - NAV-17204 - end

                                                                IF GUIALLOWED AND (CurrFieldNo <> 0) AND ("Document Type" <= "Document Type"::Invoice) THEN BEGIN
                                                                  //START WG017 VP 30.10.2007
                                                                  COMMIT;
                                                                  //STOP WG017 VP 30.10.2007
                                                                  "Amount Including VAT" := 0;
                                                                  CASE "Document Type" OF
                                                                    "Document Type"::Quote,"Document Type"::Invoice:
                                                                      CustCheckCreditLimit.SalesHeaderCheck(Rec);
                                                                    "Document Type"::Order:
                                                                      BEGIN
                                                                        IF "Bill-to Customer No." <> xRec."Bill-to Customer No." THEN BEGIN
                                                                          SalesLine.SETRANGE("Document Type",SalesLine."Document Type"::Order);
                                                                          SalesLine.SETRANGE("Document No.","No.");
                                                                          SalesLine.CALCSUMS("Outstanding Amount","Shipped Not Invoiced");
                                                                          "Amount Including VAT" := SalesLine."Outstanding Amount" + SalesLine."Shipped Not Invoiced";
                                                                        END;
                                                                        //START WG017 VP 30.10.2007
                                                                        //// START 29.10.07   wz.jd     22
                                                                        //COMMIT;
                                                                        //// STOP 29.10.07   wz.jd     22
                                                                        //STOP WG017 VP 30.10.2007
                                                                        CustCheckCreditLimit.SalesHeaderCheck(Rec);
                                                                      END;
                                                                  END;
                                                                  CALCFIELDS("Amount Including VAT");
                                                                END;

                                                                "Bill-to Customer Template Code" := '';
                                                                "Bill-to Name" := Cust.Name;
                                                                "Bill-to Name 2" := Cust."Name 2";
                                                                "Bill-to Address" := Cust.Address;
                                                                "Bill-to Address 2" := Cust."Address 2";
                                                                "Bill-to City" := Cust.City;
                                                                "Bill-to Post Code" := Cust."Post Code";
                                                                "Bill-to County" := Cust.County;
                                                                "Bill-to Country Code" := Cust."Country Code";
                                                                IF NOT SkipBillToContact THEN
                                                                  "Bill-to Contact" := Cust.Contact;
                                                                "Payment Terms Code" := Cust."Payment Terms Code";

                                                                IF "Document Type" = "Document Type"::"Credit Memo" THEN BEGIN
                                                                  "Payment Method Code" := '';
                                                                  IF PaymentTerms.GET("Payment Terms Code") THEN
                                                                    IF PaymentTerms."Calc. Pmt. Disc. on Cr. Memos" THEN
                                                                      "Payment Method Code" := Cust."Payment Method Code"
                                                                END ELSE
                                                                  //START - WG - 20.01.2010 - MP - new check at setting field Payment Method Code
                                                                  //"Payment Method Code" := Cust."Payment Method Code";
                                                                  "Payment Method Code" := lrecPaymMethod.CheckCustPaymMethod(Cust."Payment Method Code", Cust);
                                                                  //STOP - WG - 20.01.2010 - MP - new check at setting field Payment Method Code

                                                                "Gen. Bus. Posting Group" := Cust."Gen. Bus. Posting Group";
                                                                GLSetup.GET;
                                                                //CDLOUD - 19.11.2015 - DuLo - Special tax arrangement - SK 2016
                                                                //add BEGIN below
                                                                IF GLSetup."Bill-to/Sell-to VAT Calc." = GLSetup."Bill-to/Sell-to VAT Calc."::"Bill-to/Pay-to No." THEN BEGIN
                                                                  "VAT Bus. Posting Group" := Cust."VAT Bus. Posting Group";
                                                                //START CDLOUD - 19.11.2015 - DuLo - Special tax arrangement - SK 2016
                                                                  SalesSetup.GET;
                                                                  IF SalesSetup."Special Tax Arrangement" AND
                                                                     (SalesSetup."OUD Valid From Date" <> 0D) AND
                                                                     ("VAT Taxation Date" <> 0D) AND
                                                                     ("VAT Taxation Date" >= SalesSetup."OUD Valid From Date")
                                                                  THEN BEGIN
                                                                    IF ((SalesSetup."OUD Valid To Date" <> 0D) AND ("VAT Taxation Date" <= SalesSetup."OUD Valid To Date")) OR
                                                                       (SalesSetup."OUD Valid To Date" = 0D)
                                                                    THEN BEGIN
                                                                      VATBusPostGroup.GET("VAT Bus. Posting Group");
                                                                      VATBusPostGroup.TESTFIELD("OUD VAT Bus. Posting Group");
                                                                      "VAT Bus. Posting Group" := VATBusPostGroup."OUD VAT Bus. Posting Group";
                                                                    END;
                                                                  END;
                                                                END;
                                                                //STOP CDLOUD - 19.11.2015 - DuLo - Special tax arrangement - SK 2016

                                                                "Customer Posting Group" := Cust."Customer Posting Group";
                                                                "Currency Code" := Cust."Currency Code";
                                                                "Customer Price Group" := Cust."Customer Price Group";
                                                                "Prices Including VAT" := Cust."Prices Including VAT";
                                                                "Allow Line Disc." := Cust."Allow Line Disc.";
                                                                "Invoice Disc. Code" := Cust."Invoice Disc. Code";
                                                                "Customer Disc. Group" := Cust."Customer Disc. Group";
                                                                "Language Code" := Cust."Language Code";
                                                                //EISWZR Start
                                                                //WB220905-BEGIN
                                                                Kundenrabattgruppe := Cust.Kundenrabattgruppe;
                                                                //WB220905-END

                                                                "Salesperson Code" := Cust."Salesperson Code";  //WG017 originaly commented - WHY? restored
                                                                //BEGIN AVIA-FSP-080404

                                                                // - TESSOL1.00:GB¯1 --- start
                                                                //CASE "Order Type" OF
                                                                //  "Order Type"::Kraftstoff:                "Salesperson Code" := Cust."Salesperson for Fuel";
                                                                //  "Order Type"::"Schmierstoff/Folgemarkt": "Salesperson Code" := Cust."Salesperson for Lubricant";
                                                                //  "Order Type"::Heizîl:                    "Salesperson Code" := Cust."Salesperson for Heating Oil";
                                                                //  ELSE                                    "Salesperson Code" := Cust."Salesperson Code";
                                                                //END;
                                                                //EISWZR End

                                                                "Combine Shipments" := Cust."Combine Shipments";
                                                                Reserve := Cust.Reserve;
                                                                "VAT Registration No." := Cust."VAT Registration No.";

                                                                // START CDLS1 - 24.10.2005 - MV - added code in triggers
                                                                "VAT Reg. No. SK" := Cust."VAT Reg. No. SK";
                                                                // STOP CDLS1 - 24.10.2005 - MV - added code in triggers

                                                                "Registration No." := Cust."Registration No.";

                                                                IF "Bill-to Customer No." = xRec."Bill-to Customer No." THEN BEGIN
                                                                  IF ShippedSalesLinesExist THEN BEGIN
                                                                    TESTFIELD("Customer Disc. Group",xRec."Customer Disc. Group");
                                                                    TESTFIELD("Currency Code",xRec."Currency Code");
                                                                  END;
                                                                END;

                                                                TempDocDim.GetDimensions(DATABASE::"Sales Header","Document Type","No.",0,TempDocDim);

                                                                CreateDim(
                                                                  DATABASE::Customer,"Bill-to Customer No.",
                                                                  DATABASE::Job,"Job No.",
                                                                  DATABASE::"Salesperson/Purchaser","Salesperson Code",
                                                                  DATABASE::Campaign,"Campaign No.",
                                                                  DATABASE::"Responsibility Center","Responsibility Center",
                                                                  //Mantis 3688 VP 15.1.2013 DATABASE::Location, "Location Code",     //WG003 VP 9.8.2007
                                                                  DATABASE::"Customer Template","Bill-to Customer Template Code");

                                                                //EISWZR Start
                                                                //* Zahlungsbedingung und -form aus Debitor holen ...
                                                                //&&GM
                                                                // + TESSOL1.00:GB¯1 +++ Start
                                                                GetGeschÑftsbereich();
                                                                GeschÑftsbereichsdaten();
                                                                // CASE "Order Type" OF
                                                                //   "Order Type"::Heizîl :
                                                                //     BEGIN
                                                                //       IF Cust."Payment Terms Code-Heating Oil" <> '' THEN
                                                                //         "Payment Terms Code" := Cust."Payment Terms Code-Heating Oil";
                                                                //       IF Cust."Payment Method - Heating Oil" <> '' THEN
                                                                //         VALIDATE("Payment Method Code",Cust."Payment Method - Heating Oil");
                                                                //     END;
                                                                //   "Order Type"::"Schmierstoff/Folgemarkt" :
                                                                //     BEGIN
                                                                //       IF Cust."Payment Terms Code - Lubricant" <> '' THEN
                                                                //         "Payment Terms Code" := Cust."Payment Terms Code - Lubricant";
                                                                //       IF Cust."Payment Method - Lubricant" <> '' THEN
                                                                //         VALIDATE("Payment Method Code",Cust."Payment Method - Lubricant");
                                                                //     END;
                                                                //   "Order Type"::Kraftstoff :
                                                                //     BEGIN
                                                                //       IF Cust."Payment Terms Code - Fuel" <> '' THEN
                                                                //         "Payment Terms Code" := Cust."Payment Terms Code - Fuel";
                                                                //       IF Cust."Payment Method - Fuel" <> '' THEN
                                                                //         VALIDATE("Payment Method Code",Cust."Payment Method - Fuel");
                                                                //     END;
                                                                //   "Order Type"::"Monatsabrechnung TS" :
                                                                //     BEGIN
                                                                //       IF Cust."Payment Terms Code - Fuel" <> '' THEN
                                                                //         "Payment Terms Code" := Cust."Payment Terms Code - Fuel";
                                                                //       IF Cust."Payment Method - Fuel" <> '' THEN
                                                                //         VALIDATE("Payment Method Code",Cust."Payment Method - Fuel");
                                                                //     END;
                                                                //   "Order Type"::Flottenkarte :
                                                                //     BEGIN
                                                                //       IF Cust."Payment Terms Code - Fleetcard" <> '' THEN
                                                                //         "Payment Terms Code" := Cust."Payment Terms Code - Fleetcard";
                                                                //       IF Cust."Creditworthiness Code" <> '' THEN
                                                                //         VALIDATE("Payment Method Code",Cust."Creditworthiness Code");
                                                                //     END;
                                                                // END; //case
                                                                // + TESSOL1.00:GB¯1 +++ End


                                                                "Print SalesPr. on DeliveryNote" := Cust."Print SalesPriceOnDeliveryNote";
                                                                //EISWZR End

                                                                // + TESSOL1.00:GB¯1 +++ Start
                                                                // VALIDATE("Payment Terms Code");
                                                                // VALIDATE("Payment Method Code");
                                                                // + TESSOL1.00:GB¯1 +++ End

                                                                VALIDATE("Currency Code");

                                                                IF (xRec."Sell-to Customer No." = "Sell-to Customer No.") AND
                                                                   (xRec."Bill-to Customer No." <> "Bill-to Customer No.")
                                                                THEN
                                                                  RecreateSalesLines(FIELDCAPTION("Bill-to Customer No."))
                                                                ELSE
                                                                  IF (xRec."Bill-to Customer No." <> '') AND SalesLinesExist THEN
                                                                    TempDocDim.UpdateAllLineDim(DATABASE::"Sales Header","Document Type","No.",TempDocDim);

                                                                IF NOT SkipBillToContact THEN
                                                                  UpdateBillToCont("Bill-to Customer No.");

                                                                IF "Sell-to IC Partner Code" = '' THEN
                                                                  Cust.TESTFIELD("IC Partner Code",'')
                                                                ELSE
                                                                  Cust.TESTFIELD("IC Partner Code");
                                                                "Bill-to IC Partner Code" := Cust."IC Partner Code";

                                                                //START - WG133 - 28.02.2012 - MP - NI
                                                                "Customer NI" := Cust.NI;

                                                                IF NOT HideValidationDialog THEN BEGIN
                                                                //STOP - WG133 - 28.02.2012 - MP - NI
                                                                  // START CDLZA - 5.2.2007 - ZJ:
                                                                  //Displays warning if uncleared advances exist
                                                                  IF NOT "Tax Document" THEN BEGIN
                                                                    lCustLedgEntry.RESET;
                                                                    lCustLedgEntry.SETRANGE("Customer No.", "Bill-to Customer No.");
                                                                    lCustLedgEntry.SETRANGE(Open, TRUE);
                                                                    lCustLedgEntry.SETFILTER("Advance CDL", '<>''''');
                                                                    IF lCustLedgEntry.FINDFIRST THEN
                                                                      MESSAGE(Mess000, "Bill-to Customer No.");
                                                                  END;
                                                                  // STOP CDLZA - 5.2.2007 - ZJ:
                                                                //START - WG133 - 28.02.2012 - MP - NI
                                                                END;
                                                                //STOP - WG133 - 28.02.2012 - MP - NI

                                                                //START - WG - 07.06.2012 - RCH - M3959 - Customer Adress History
                                                                IF lrecBill.GET("Bill-to Customer No.") THEN BEGIN
                                                                   BillToAdressH(lrecBill,"VAT Taxation Date");
                                                                   END;
                                                                //STOP - WG - 07.06.2012 - RCH - M3959 - Customer Adress History

                                                                //START - WG - 03.09.2012 - MP - repair functionality
                                                                VALIDATE("VAT Settlement Country Code");
                                                                //STOP - WG - 03.09.2012 - MP - repair functionality

                                                                //NAV-22365+
                                                                IF CurrFieldNo IN [FIELDNO("Sell-to Customer No."), FIELDNO("Bill-to Customer No.")] THEN
                                                                  IF "Document Type" = "Document Type"::"Credit Memo" THEN
                                                                    VALIDATE("Payment Terms Code");
                                                                //NAV-22365-

                                                                //START NAV2016 - 14.9.2017 - KH - Assignment
                                                                IF ("Document Type" <> 0) AND ("No." <> '') THEN BEGIN
                                                                  GetSalesHeaderEXT;
                                                                  NAV2016AssignmentManagement.GetSalesHeadAssignmentSign(Rec, SalesHeaderEXT, 2);
                                                                  ModifySalesHeaderEXT;
                                                                  CALCFIELDS("NAV2016 Assignment");
                                                                END;
                                                                //STOP NAV2016 - 14.9.2017 - KH - Assignment
                                                              END;

                                                   CaptionML=[CSY=¨°slo pl†tce;
                                                              ENU=Bill-to Customer No.];
                                                   NotBlank=Yes;
                                                   Description=CDLS1 }
    { 5   ;   ;Bill-to Name        ;Text50        ;CaptionML=[CSY=N†zev pl†tce;
                                                              ENU=Bill-to Name];
                                                   Description=M5409 }
    { 6   ;   ;Bill-to Name 2      ;Text50        ;CaptionML=[CSY=N†zev pl†tce 2;
                                                              ENU=Bill-to Name 2];
                                                   Description=M5409 }
    { 7   ;   ;Bill-to Address     ;Text30        ;CaptionML=[CSY=Adresa pl†tce;
                                                              ENU=Bill-to Address] }
    { 8   ;   ;Bill-to Address 2   ;Text30        ;CaptionML=[CSY=Adresa pl†tce 2;
                                                              ENU=Bill-to Address 2] }
    { 9   ;   ;Bill-to City        ;Text30        ;OnValidate=BEGIN
                                                                IF "Date Received" = 0D THEN
                                                                  PostCode.ValidateCity("Bill-to City","Bill-to Post Code");
                                                              END;

                                                   OnLookup=BEGIN
                                                              PostCode.LookUpCity("Bill-to City","Bill-to Post Code",TRUE);
                                                            END;

                                                   CaptionML=[CSY=Mÿsto pl†tce;
                                                              ENU=Bill-to City] }
    { 10  ;   ;Bill-to Contact     ;Text30        ;CaptionML=[CSY=Kontakt pl†tce;
                                                              ENU=Bill-to Contact] }
    { 11  ;   ;Your Reference      ;Text30        ;CaptionML=[CSY=VaÁe reference;
                                                              ENU=Your Reference] }
    { 12  ;   ;Ship-to Code        ;Code10        ;TableRelation="Ship-to Address".Code WHERE (Customer No.=FIELD(Sell-to Customer No.));
                                                   OnValidate=VAR
                                                                locCompanyInfo@1220002 : Record 79;
                                                                locTbCountry@1220001 : Record 9;
                                                                lrecBillToCust@1220000 : Record 18;
                                                                "---WG---"@1220003 : Integer;
                                                                ShipToAddressLRec@1220004 : Record 222;
                                                                LocationLRec@1220005 : Record 14;
                                                                VendorLRec@1220006 : Record 23;
                                                                ErrL@1220007 : Boolean;
                                                                "----WG----"@1220008 : TextConst;
                                                                Text001L@1220009 : TextConst 'CSY=Nepoda˝ilo se nastavit k¢d mÿny.;ENU=Currency code could not be set.';
                                                              BEGIN
                                                                //START - WG - 09.03.2015 - PVI - NAV-11706 - set currency code
                                                                IF ("Ship-to Code" <> xRec."Ship-to Code") THEN
                                                                  IF "Document Type" = "Document Type"::Order THEN
                                                                    IF "Order Type" = "Order Type"::Kraftstoff THEN
                                                                      IF "Kind of Order" = "Kind of Order"::"Vendor->Stock" THEN
                                                                        IF "Sell-to Customer No." = '26415623' THEN
                                                                          IF ("Ship-to Code" <> '') THEN BEGIN
                                                                            ErrL := TRUE;
                                                                            IF ShipToAddressLRec.GET("Sell-to Customer No.","Ship-to Code") THEN
                                                                              IF LocationLRec.GET(ShipToAddressLRec."Location Code") THEN
                                                                                IF VendorLRec.GET(LocationLRec.Kreditor) THEN BEGIN
                                                                                  VALIDATE("Currency Code",VendorLRec."Currency Code");
                                                                                  ErrL := FALSE;
                                                                                END;
                                                                          END ELSE BEGIN
                                                                            GetSalesHeaderEXT();
                                                                            SalesHeaderEXT.VALIDATE("VAT Currency Code",'');
                                                                            ModifySalesHeaderEXT();
                                                                            VALIDATE("Currency Code",'');
                                                                          END;
                                                                //IF ErrL THEN
                                                                //  ERROR(Text001L);
                                                                //STOP - WG - 09.03.2015 - PVI - NAV-11706 - set currency code

                                                                IF ("Document Type" = "Document Type"::Order) AND
                                                                   (xRec."Ship-to Code" <> "Ship-to Code")
                                                                THEN BEGIN
                                                                  SalesLine.SETRANGE("Document Type",SalesLine."Document Type"::Order);
                                                                  SalesLine.SETRANGE("Document No.","No.");
                                                                  SalesLine.SETFILTER("Purch. Order Line No.",'<>0');
                                                                  IF SalesLine.FINDFIRST THEN
                                                                    ERROR(
                                                                      Text006,
                                                                      FIELDCAPTION("Ship-to Code"));
                                                                  SalesLine.RESET;
                                                                END;

                                                                IF ("Document Type" <> "Document Type"::"Return Order") AND
                                                                   ("Document Type" <> "Document Type"::"Credit Memo")
                                                                THEN
                                                                 BEGIN
                                                                  IF "Ship-to Code" <> '' THEN
                                                                   BEGIN
                                                                    IF xRec."Ship-to Code" <> '' THEN
                                                                     BEGIN
                                                                      GetCust("Sell-to Customer No.");
                                                                      //EISWZR Start
                                                                      //* IF Cust."Location Code" <> '' THEN
                                                                      //*   VALIDATE("Location Code",Cust."Location Code");
                                                                      IF ("Order Type" = "Order Type"::"Schmierstoff/Folgemarkt") THEN
                                                                        BEGIN
                                                                         Cust.TESTFIELD("LocationCode of LubricantStock");
                                                                         VALIDATE("Location Code", Cust."LocationCode of LubricantStock");
                                                                        END
                                                                       ELSE
                                                                      //EISWZR End
                                                                        IF Cust."Location Code" <> '' THEN
                                                                         VALIDATE("Location Code",Cust."Location Code");
                                                                        "Tax Area Code" := Cust."Tax Area Code";
                                                                     END;
                                                                     ShipToAddr.GET("Sell-to Customer No.","Ship-to Code");
                                                                     "Ship-to Name" := ShipToAddr.Name;
                                                                     "Ship-to Name 2" := ShipToAddr."Name 2";
                                                                     "Ship-to Address" := ShipToAddr.Address;
                                                                     "Ship-to Address 2" := ShipToAddr."Address 2";
                                                                     "Ship-to City" := ShipToAddr.City;
                                                                     "Ship-to Post Code" := ShipToAddr."Post Code";
                                                                     "Ship-to County" := ShipToAddr.County;
                                                                     VALIDATE("Ship-to Country Code",ShipToAddr."Country Code");
                                                                     "Ship-to Contact" := ShipToAddr."Contact Person";
                                                                     "Shipment Method Code" := ShipToAddr."Shipment Method Code";
                                                                     //EISWZR Start
                                                                     t_Dispopool.RESET;
                                                                     t_Dispopool.SETRANGE(t_Dispopool.Typ, t_Dispopool.Typ::Verkaufsauftrag);
                                                                     t_Dispopool.SETRANGE(t_Dispopool."No.", "No.");
                                                                     IF t_Dispopool.FINDFIRST THEN
                                                                      BEGIN
                                                                       REPEAT                  //AVIA-RK-180504
                                                                        t_Dispopool.Name                     := "Ship-to Name";
                                                                        t_Dispopool.Name2                    := "Ship-to Name 2";
                                                                        t_Dispopool.Address                  := "Ship-to Address";
                                                                        t_Dispopool.City                     := "Ship-to City";
                                                                        t_Dispopool."Delivery Post Code"          := "Ship-to Post Code";
                                                                        t_Dispopool."Tel.No. Other Delivery Address" := ShipToAddr."Phone No.";  //AVIA-RK-110304

                                                                        t_Dispopool.MODIFY;
                                                                       UNTIL t_Dispopool.NEXT = 0;    //AVIA-RK-180504
                                                                      END;

                                                                     //* IF ShipToAddr."Location Code" <> '' THEN
                                                                     //*   VALIDATE("Location Code",ShipToAddr."Location Code");
                                                                     IF ("Order Type" = "Order Type"::"Schmierstoff/Folgemarkt") THEN
                                                                       BEGIN
                                                                        ShipToAddr.TESTFIELD("Lubricant Location Code");
                                                                        VALIDATE("Location Code", ShipToAddr."Lubricant Location Code");
                                                                       END
                                                                      ELSE
                                                                     //EISWZR End
                                                                       IF ShipToAddr."Location Code" <> '' THEN
                                                                         VALIDATE("Location Code",ShipToAddr."Location Code");
                                                                     "Shipping Agent Code" := ShipToAddr."Shipping Agent Code";
                                                                     "Shipping Agent Service Code" := ShipToAddr."Shipping Agent Service Code";

                                                                //START WG037 - PV - 16.12.2007 - Freight Calculation
                                                                     VALIDATE("Freight Table", ShipToAddr."Freight Table");
                                                                //STOP WG037 - PV - 16.12.2007 - Freight Calculation

                                                                //START WG011 Mantis 3688 VP 15.1.2013 - function removed
                                                                ////START WG011 - 02.01.2007 - PV - Dimension Code for Ship-to Address
                                                                //CreateDim(
                                                                //  DATABASE::"Ship-to Address", ShipToAddr."Code for dimension link",
                                                                //  DATABASE::Customer,"Bill-to Customer No.",
                                                                //  DATABASE::Job,"Job No.",
                                                                //  DATABASE::"Salesperson/Purchaser","Salesperson Code",
                                                                //  DATABASE::Campaign,"Campaign No.",
                                                                //  DATABASE::"Responsibility Center","Responsibility Center",
                                                                //  DATABASE::"Customer Template","Bill-to Customer Template Code");
                                                                ////STOP WG011 - 02.01.2007 - PV - Dimension Code for Ship-to Address
                                                                //STOP WG011 Mantis 3688 VP 15.1.2013 - function removed

                                                                     IF ShipToAddr."Tax Area Code" <> '' THEN
                                                                       "Tax Area Code" := ShipToAddr."Tax Area Code";
                                                                     "Tax Liable" := ShipToAddr."Tax Liable";
                                                                   END ELSE
                                                                    IF "Sell-to Customer No." <> '' THEN
                                                                     BEGIN
                                                                      GetCust("Sell-to Customer No.");
                                                                      "Ship-to Name" := Cust.Name;
                                                                      "Ship-to Name 2" := Cust."Name 2";
                                                                      "Ship-to Address" := Cust.Address;
                                                                      "Ship-to Address 2" := Cust."Address 2";
                                                                      "Ship-to City" := Cust.City;
                                                                      // *** START Index SD¯1 ---------
                                                                      "Ship-to District" := Cust.Ortsteil;
                                                                      // *** ENDE Index SD¯1 ---------
                                                                      "Ship-to Post Code" := Cust."Post Code";
                                                                      "Ship-to County" := Cust.County;
                                                                      VALIDATE("Ship-to Country Code",Cust."Country Code");
                                                                      "Ship-to Contact" := Cust.Contact;
                                                                      "Shipment Method Code" := Cust."Shipment Method Code";
                                                                      "Tax Area Code" := Cust."Tax Area Code";
                                                                      "Tax Liable" := Cust."Tax Liable";
                                                                      IF Cust."Location Code" <> '' THEN
                                                                        VALIDATE("Location Code",Cust."Location Code");
                                                                      "Shipping Agent Code" := Cust."Shipping Agent Code";
                                                                      "Shipping Agent Service Code" := Cust."Shipping Agent Service Code";

                                                                //START WG037 - PV - 16.12.2007 - Freight Calculation
                                                                      VALIDATE("Freight Table", Cust."Freight Table");
                                                                //STOP WG037 - PV - 16.12.2007 - Freight Calculation


                                                                     //EISWZR Start
                                                                      t_Dispopool.RESET;
                                                                      t_Dispopool.SETRANGE(t_Dispopool.Typ, t_Dispopool.Typ::Verkaufsauftrag);
                                                                      t_Dispopool.SETRANGE(t_Dispopool."No.", "No.");
                                                                      IF t_Dispopool.FINDFIRST THEN
                                                                        BEGIN
                                                                         REPEAT                        //AVIA-RK-180504
                                                                          t_Dispopool.Name                     := "Ship-to Name";
                                                                          //WB02¯ BEGIN
                                                                          t_Dispopool.Name2                    := "Ship-to Name 2";
                                                                          //WB02¯ END
                                                                          t_Dispopool.Address                  := "Ship-to Address";
                                                                          t_Dispopool.City                     := "Ship-to City";
                                                                          t_Dispopool."Delivery Post Code"          := "Ship-to Post Code";
                                                                          t_Dispopool."Tel.No. Other Delivery Address" := ''; //AVIA-RK-110304
                                                                          t_Dispopool.MODIFY;
                                                                         UNTIL t_Dispopool.NEXT = 0;       //AVIA-RK-180504
                                                                        END;

                                                                      //* IF Cust."Location Code" <> '' THEN
                                                                      //*   VALIDATE("Location Code",Cust."Location Code");
                                                                      IF ("Order Type" = "Order Type"::"Schmierstoff/Folgemarkt") THEN
                                                                        BEGIN
                                                                         Cust.TESTFIELD("LocationCode of LubricantStock");
                                                                         VALIDATE("Location Code", Cust."LocationCode of LubricantStock");
                                                                        END
                                                                       ELSE
                                                                        IF Cust."Location Code" <> '' THEN
                                                                         VALIDATE("Location Code",Cust."Location Code");

                                                                      "VAT Country Code" := Cust."Country Code";
                                                                      "Shipping Agent Code" := Cust."Shipping Agent Code";
                                                                     END;
                                                                     //EISWZR End

                                                                //START CDLC20 - 19.09.2005 - JV - Correction
                                                                    IF lrecBillToCust.GET("Bill-to Customer No.") THEN BEGIN
                                                                       VALIDATE("Gen. Bus. Posting Group",lrecBillToCust."Gen. Bus. Posting Group");
                                                                       VALIDATE("VAT Bus. Posting Group",lrecBillToCust."VAT Bus. Posting Group");
                                                                       VALIDATE("VAT Registration No.",lrecBillToCust."VAT Registration No.");
                                                                       //START CDLS1 - 24.10.2005 - MV - added code in triggers
                                                                       VALIDATE("VAT Reg. No. SK",lrecBillToCust."VAT Reg. No. SK");
                                                                       //STOP CDLS1 - 24.10.2005 - MV - added code in triggers
                                                                       //START - WG - 03.09.2012 - MP - repair functionality
                                                                       VALIDATE("VAT Settlement Country Code");
                                                                       //STOP - WG - 03.09.2012 - MP - repair functionality
                                                                    END;
                                                                //STOP CDLC20 - 19.09.2005 - JV - Correction
                                                                END;

                                                                GetShippingTime(FIELDNO("Ship-to Code"));

                                                                IF (xRec."Sell-to Customer No." = "Sell-to Customer No.") AND
                                                                   (xRec."Ship-to Code" <> "Ship-to Code")
                                                                THEN
                                                                  IF (xRec."VAT Country Code" <> "VAT Country Code") OR
                                                                     (xRec."Tax Area Code" <> "Tax Area Code")
                                                                  THEN
                                                                    RecreateSalesLines(FIELDCAPTION("Ship-to Code"))
                                                                  ELSE BEGIN
                                                                    IF xRec."Shipping Agent Code" <> "Shipping Agent Code" THEN
                                                                      MessageIfSalesLinesExist(FIELDCAPTION("Shipping Agent Code"));
                                                                    IF xRec."Shipping Agent Service Code" <> "Shipping Agent Service Code" THEN
                                                                      MessageIfSalesLinesExist(FIELDCAPTION("Shipping Agent Service Code"));
                                                                    IF xRec."Tax Liable" <> "Tax Liable" THEN
                                                                      VALIDATE("Tax Liable");
                                                                  END;

                                                                // START CDLINT - 12.8.05 - MV - modifications for Intrastat
                                                                IF ("Location Code" = '') AND ("Ship-to Country Code" <> '') THEN
                                                                   BEGIN
                                                                     locTbCountry.GET("Ship-to Country Code");
                                                                     locCompanyInfo.GET;
                                                                     IF NOT locTbCountry.IsEU THEN
                                                                          Area := ''
                                                                     ELSE Area := locCompanyInfo.Area
                                                                   END;
                                                                // STOP CDLINT - 12.8.05 - MV - modifications for Intrastat

                                                                //START WG012 - 27.10.2007 - PV - Relations between Ship-to Addresses
                                                                IF "Ship-to Code" <> ''
                                                                  THEN VALIDATE("Bill-to address code", ShipToAddr."Belongs to Mail address")
                                                                  ELSE VALIDATE("Bill-to address code", '');
                                                                //STOP WG012 - 27.10.2007 - PV - Relations between Ship-to Addresses

                                                                //START - WG - 05.08.2013 - RCH - M6036
                                                                IF "Ship-to Code" <> '' THEN BEGIN
                                                                   IF ShipToAddr."Shortcut Dimension 1 Code" <> '' THEN
                                                                      VALIDATE("Shortcut Dimension 1 Code", ShipToAddr."Shortcut Dimension 1 Code");
                                                                   IF ShipToAddr."Shortcut Dimension 2 Code" <> '' THEN
                                                                      VALIDATE("Shortcut Dimension 2 Code", ShipToAddr."Shortcut Dimension 2 Code");
                                                                   IF ShipToAddr."VAT Settlement Country Code" <> '' THEN
                                                                      VALIDATE("VAT Settlement Country Code", ShipToAddr."VAT Settlement Country Code");
                                                                   END;
                                                                //STOP - WG - 05.08.2013 - RCH - M6036
                                                              END;

                                                   CaptionML=[CSY=K¢d p˝°jemce;
                                                              ENU=Ship-to Code];
                                                   Description=CDLS1,CDLC20 }
    { 13  ;   ;Ship-to Name        ;Text50        ;OnValidate=BEGIN
                                                                //EISWZR Start
                                                                t_Dispopool.RESET;
                                                                t_Dispopool.SETRANGE(t_Dispopool.Typ, t_Dispopool.Typ::Verkaufsauftrag);
                                                                t_Dispopool.SETRANGE(t_Dispopool."No.", "No.");
                                                                IF t_Dispopool.FINDFIRST THEN
                                                                  BEGIN
                                                                    REPEAT                        //AVIA-RK-180504
                                                                      t_Dispopool.Name := "Ship-to Name";
                                                                      t_Dispopool.MODIFY;
                                                                    UNTIL t_Dispopool.NEXT = 0;   //AVIA-RK-180504
                                                                  END;
                                                                //EISWZR End
                                                              END;

                                                   CaptionML=[CSY=N†zev p˝°jemce;
                                                              ENU=Ship-to Name];
                                                   Description=M5409 }
    { 14  ;   ;Ship-to Name 2      ;Text50        ;OnValidate=BEGIN
                                                                //EISWZR Start
                                                                t_Dispopool.RESET;
                                                                t_Dispopool.SETRANGE(t_Dispopool.Typ, t_Dispopool.Typ::Verkaufsauftrag);
                                                                t_Dispopool.SETRANGE(t_Dispopool."No.", "No.");
                                                                IF t_Dispopool.FINDFIRST THEN
                                                                  BEGIN
                                                                    REPEAT                          //AVIA-RK-180504
                                                                      t_Dispopool.Name2 := "Ship-to Name 2";
                                                                      t_Dispopool.MODIFY;
                                                                     UNTIL t_Dispopool.NEXT = 0;    //AVIA-RK-180504
                                                                  END;
                                                                //EISWZR End
                                                              END;

                                                   CaptionML=[CSY=N†zev p˝°jemce 2;
                                                              ENU=Ship-to Name 2];
                                                   Description=M5409 }
    { 15  ;   ;Ship-to Address     ;Text30        ;OnValidate=BEGIN
                                                                //EISWZR Start
                                                                t_Dispopool.RESET;
                                                                t_Dispopool.SETRANGE(t_Dispopool.Typ, t_Dispopool.Typ::Verkaufsauftrag);
                                                                t_Dispopool.SETRANGE(t_Dispopool."No.", "No.");
                                                                IF t_Dispopool.FINDFIRST THEN
                                                                  BEGIN
                                                                    REPEAT                     //AVIA-RK-180504
                                                                      t_Dispopool.Address := "Ship-to Address";
                                                                      t_Dispopool.MODIFY;
                                                                    UNTIL t_Dispopool.NEXT = 0; //AVIA-RK-180504
                                                                  END;
                                                                //EISWZR End
                                                              END;

                                                   CaptionML=[CSY=Adresa p˝°jemce;
                                                              ENU=Ship-to Address] }
    { 16  ;   ;Ship-to Address 2   ;Text30        ;CaptionML=[CSY=Adresa p˝°jemce 2;
                                                              ENU=Ship-to Address 2] }
    { 17  ;   ;Ship-to City        ;Text30        ;OnValidate=BEGIN
                                                                IF "Date Received" = 0D THEN
                                                                  PostCode.ValidateCity("Ship-to City","Ship-to Post Code");

                                                                //EISWZR Start
                                                                t_Dispopool.RESET;
                                                                t_Dispopool.SETRANGE(t_Dispopool.Typ, t_Dispopool.Typ::Verkaufsauftrag);
                                                                t_Dispopool.SETRANGE(t_Dispopool."No.", "No.");
                                                                IF t_Dispopool.FINDFIRST THEN
                                                                  BEGIN
                                                                    REPEAT                          //AVIA-RK-180504
                                                                      t_Dispopool.City := "Ship-to City";
                                                                      t_Dispopool.MODIFY;
                                                                    UNTIL t_Dispopool.NEXT = 0;     //AVIA-RK-180504
                                                                  END;
                                                                //EISWZR End
                                                              END;

                                                   OnLookup=BEGIN
                                                              PostCode.LookUpCity("Ship-to City","Ship-to Post Code",TRUE);
                                                            END;

                                                   CaptionML=[CSY=Mÿsto p˝°jemce;
                                                              ENU=Ship-to City] }
    { 18  ;   ;Ship-to Contact     ;Text30        ;CaptionML=[CSY=Kontakt p˝°jemce;
                                                              ENU=Ship-to Contact] }
    { 19  ;   ;Order Date          ;Date          ;OnValidate=BEGIN
                                                                //EISWZR Start
                                                                //IF ("Document Type" IN ["Document Type"::Quote,"Document Type"::Order]) AND
                                                                IF ("Document Type" IN ["Document Type"::Quote]) AND
                                                                //EISWZR ENd
                                                                   NOT ("Order Date" = xRec."Order Date")
                                                                THEN
                                                                  PriceMessageIfSalesLinesExist(FIELDCAPTION("Order Date"));
                                                              END;

                                                   CaptionML=[CSY=Datum objedn†vky;
                                                              ENU=Order Date] }
    { 20  ;   ;Posting Date        ;Date          ;OnValidate=VAR
                                                                NoSeries@1000 : Record 308;
                                                              BEGIN
                                                                // START CDLZA - 5.2.2007 - ZJ:
                                                                IF (("Document Type" = "Document Type"::Invoice) OR ("Document Type" = "Document Type"::Order)) AND NOT("Tax Document") THEN
                                                                  IF ("Posting Date" <> xRec."Posting Date") THEN BEGIN
                                                                    CALCFIELDS("Linked Advance");
                                                                    IF ("Linked Advance") THEN
                                                                      "Check Advance Connections" := TRUE;
                                                                  END;
                                                                // STOP CDLZA - 5.2.2007 - ZJ:

                                                                IF ("Posting No." <> '') AND ("Posting No. Series" <> '') THEN BEGIN
                                                                  NoSeries.GET("Posting No. Series");
                                                                  IF NoSeries."Date Order" THEN
                                                                    ERROR(
                                                                      Text045,
                                                                      FIELDCAPTION("Posting Date"),FIELDCAPTION("Posting No. Series"),"Posting No. Series",
                                                                      NoSeries.FIELDCAPTION("Date Order"),NoSeries."Date Order","Document Type",
                                                                      FIELDCAPTION("Posting No."),"Posting No.");
                                                                END;

                                                                //START WG - 06.03.2009 - CDLJV - change VAT taxation Date before Document date (due to Due Date calculation)
                                                                //START - WG - 13.06.2012 - RCH - M3599 - Fixed VAT Taxation Date
                                                                IF NOT "Fixed VAT Taxation Date" THEN
                                                                //STOP - WG - 13.06.2012 - RCH - M3599 - Fixed VAT Taxation Date
                                                                   "VAT Taxation Date" := "Posting Date";
                                                                //STOP WG - 06.03.2009 - CDLJV - change VAT taxation Date before Document date (due to Due Date calculation)
                                                                VALIDATE("Document Date","Posting Date");

                                                                IF ("Document Type" IN ["Document Type"::Invoice,"Document Type"::"Credit Memo"]) AND
                                                                   NOT ("Posting Date" = xRec."Posting Date")
                                                                THEN
                                                                  PriceMessageIfSalesLinesExist(FIELDCAPTION("Posting Date"));

                                                                IF "Currency Code" <> '' THEN BEGIN
                                                                  UpdateCurrencyFactor;
                                                                  IF "Currency Factor" <> xRec."Currency Factor" THEN
                                                                    ConfirmUpdateCurrencyFactor;
                                                                END;

                                                                // START CDLEU - 3.4.2005 - ZJ: modification for European Union
                                                                //START - WG - 13.06.2012 - RCH - M3599 - Fixed VAT Taxation Date
                                                                IF NOT "Fixed VAT Taxation Date" THEN
                                                                //STOP - WG - 13.06.2012 - RCH - M3599 - Fixed VAT Taxation Date
                                                                   "VAT Taxation Date" := "Posting Date";
                                                                // STOP CDLEU - 3.4.2005 - ZJ: modification for European Union

                                                                //START CDLKH7 - 01.10.2015 - PU - VAT Control Statement
                                                                VALIDATE("VAT Control Statement Date","Posting Date");
                                                                //STOP CDLKH7 - 01.10.2015 - PU - VAT Control Statement

                                                                //START NAV2016 - 14.9.2017 - KH - Assignment
                                                                IF ("Document Type" <> 0) AND ("No." <> '') THEN BEGIN
                                                                  GetSalesHeaderEXT;
                                                                  NAV2016AssignmentManagement.GetSalesHeadAssignmentSign(Rec, SalesHeaderEXT, 2);
                                                                  ModifySalesHeaderEXT;
                                                                  CALCFIELDS("NAV2016 Assignment");
                                                                END;
                                                                //STOP NAV2016 - 14.9.2017 - KH - Assignment
                                                              END;

                                                   CaptionML=[CSY=Z£ütovac° datum;
                                                              ENU=Posting Date];
                                                   Description=CDLEU }
    { 21  ;   ;Shipment Date       ;Date          ;OnValidate=BEGIN
                                                                //EISWZR Start
                                                                // Original: UpdateSalesLines(FIELDCAPTION("Shipment Date"),CurrFieldNo <> 0);
                                                                UpdateSalesLines(FIELDCAPTION("Shipment Date"), FALSE);
                                                                //EISWZR End
                                                              END;

                                                   CaptionML=[CSY=Datum odesl†n°;
                                                              ENU=Shipment Date] }
    { 22  ;   ;Posting Description ;Text50        ;CaptionML=[CSY=Text poloßky;
                                                              ENU=Posting Description] }
    { 23  ;   ;Payment Terms Code  ;Code10        ;TableRelation="Payment Terms";
                                                   OnValidate=BEGIN
                                                                IF ("Payment Terms Code" <> '') AND ("Document Date" <> 0D) THEN BEGIN
                                                                  PaymentTerms.GET("Payment Terms Code");
                                                                //START JV - 30.01.2008 - Do not change for Credit Memo and Return Order
                                                                //old code:
                                                                {
                                                                  IF (("Document Type" IN ["Document Type"::"Return Order","Document Type"::"Credit Memo"]) AND
                                                                    NOT (PaymentTerms."Calc. Pmt. Disc. on Cr. Memos"))
                                                                  THEN BEGIN
                                                                    VALIDATE("Due Date","Document Date");
                                                                    VALIDATE("Pmt. Discount Date",0D);
                                                                    VALIDATE("Payment Discount %",0);
                                                                  END ELSE
                                                                }
                                                                //STOP JV - 30.01.2008 - Do not change for Credit Memo and Return Order
                                                                  BEGIN

                                                                //START WG033 - 27.11.2007 - PV - Due date calculation accoring to Business Area
                                                                {
                                                                  IF TbCustBusinessArea.GET("Sell-to Customer No.", GeschÑftsbereich)
                                                                    THEN
                                                                     BEGIN
                                                                      CASE TbCustBusinessArea."Due Date Calculation Type" OF
                                                                       TbCustBusinessArea."Due Date Calculation Type"::"Document Date" :
                                                                         BEGIN
                                                                //START - MKr - 09.08.2007
                                                                //    "Due Date" := CALCDATE(PaymentTerms."Due Date Calculation","Document Date");
                                                                    VALIDATE("Due Date",CALCDATE(PaymentTerms."Due Date Calculation","Document Date"));
                                                                //STOP  - MKr - 09.08.2007
                                                                         END;
                                                                       TbCustBusinessArea."Due Date Calculation Type"::"VAT Taxation Date" :
                                                                         BEGIN
                                                                           VALIDATE("Due Date",CALCDATE(PaymentTerms."Due Date Calculation","VAT Taxation Date"));
                                                                         END;
                                                                       ELSE VALIDATE("Due Date",CALCDATE(PaymentTerms."Due Date Calculation","Document Date"));
                                                                      END;
                                                                     END
                                                                    ELSE VALIDATE("Due Date",CALCDATE(PaymentTerms."Due Date Calculation","Document Date"));
                                                                }
                                                                  IF ("Order Type" = "Order Type"::Kraftstoff) AND ("Kind of Order" > 0) THEN
                                                                    VALIDATE("Due Date",CALCDATE(PaymentTerms."Due Date Calculation","VAT Taxation Date"))
                                                                   ELSE
                                                                    VALIDATE("Due Date",CALCDATE(PaymentTerms."Due Date Calculation","Document Date"));

                                                                //STOP WG033 - 27.11.2007 - PV - Due date calculation accoring to Business Area

                                                                //START JV - 30.01.2008 - Do not change for Credit Memo and Return Order
                                                                //old code:
                                                                {
                                                                    "Pmt. Discount Date" := CALCDATE(PaymentTerms."Discount Date Calculation","Document Date");
                                                                    VALIDATE("Payment Discount %",PaymentTerms."Discount %");
                                                                }
                                                                    IF (("Document Type" IN ["Document Type"::"Return Order","Document Type"::"Credit Memo"]) AND
                                                                      NOT (PaymentTerms."Calc. Pmt. Disc. on Cr. Memos"))
                                                                    THEN BEGIN
                                                                      VALIDATE("Pmt. Discount Date",0D);
                                                                      VALIDATE("Payment Discount %",0);
                                                                    END ELSE BEGIN
                                                                      "Pmt. Discount Date" := CALCDATE(PaymentTerms."Discount Date Calculation","Document Date");
                                                                      VALIDATE("Payment Discount %",PaymentTerms."Discount %");
                                                                    END;
                                                                //STOP JV - 30.01.2008 - Do not change for Credit Memo and Return Order

                                                                //START WG019 - 24.10.2007 - JV - Sales Source Prices
                                                                    IF SalesLinesExist AND NOT HideValidationDialog AND (CurrFieldNo<>0)THEN
                                                                      MESSAGE(
                                                                         Text018 +
                                                                         Text019,
                                                                         FIELDCAPTION("Payment Terms Code"));
                                                                //STOP WG019 - 24.10.2007 - JV - Sales Source Prices
                                                                  END;
                                                                END ELSE BEGIN
                                                                  VALIDATE("Due Date","Document Date");
                                                                  VALIDATE("Pmt. Discount Date",0D);
                                                                  VALIDATE("Payment Discount %",0);
                                                                END;

                                                                //NAV-22365>
                                                                IF CurrFieldNo <> 0 THEN
                                                                  IF "Document Type" = "Document Type"::"Credit Memo" THEN
                                                                    IF "Due Date" < WORKDATE THEN
                                                                      VALIDATE("Due Date", WORKDATE);
                                                                //NAV-22365<
                                                              END;

                                                   CaptionML=[CSY=K¢d platebn° podm°nky;
                                                              ENU=Payment Terms Code] }
    { 24  ;   ;Due Date            ;Date          ;OnValidate=BEGIN
                                                                //START - MKr - 09.08.2007
                                                                "Internal Due Date" := "Due Date";
                                                                //STOP  - MKr - 09.08.2007
                                                              END;

                                                   CaptionML=[CSY=Datum splatnosti;
                                                              ENU=Due Date] }
    { 25  ;   ;Payment Discount %  ;Decimal       ;OnValidate=BEGIN
                                                                IF NOT (CurrFieldNo IN [0,FIELDNO("Posting Date"),FIELDNO("Document Date")]) THEN
                                                                  TESTFIELD(Status,Status::Open);
                                                                GLSetup.GET;
                                                                IF "Payment Discount %" < GLSetup."VAT Tolerance %" THEN
                                                                  "VAT Base Discount %" := "Payment Discount %"
                                                                ELSE
                                                                  "VAT Base Discount %" := GLSetup."VAT Tolerance %";
                                                                VALIDATE("VAT Base Discount %");
                                                              END;

                                                   CaptionML=[CSY=Skonto %;
                                                              ENU=Payment Discount %];
                                                   DecimalPlaces=0:5 }
    { 26  ;   ;Pmt. Discount Date  ;Date          ;CaptionML=[CSY=Datum skonta;
                                                              ENU=Pmt. Discount Date] }
    { 27  ;   ;Shipment Method Code;Code10        ;TableRelation="Shipment Method";
                                                   OnValidate=BEGIN
                                                                TESTFIELD(Status,Status::Open);
                                                              END;

                                                   CaptionML=[CSY=K¢d zpÖsobu dod†vky;
                                                              ENU=Shipment Method Code] }
    { 28  ;   ;Location Code       ;Code10        ;TableRelation=Location WHERE (Use As In-Transit=CONST(No));
                                                   OnValidate=VAR
                                                                locCompanyInfo@1220001 : Record 79;
                                                                locTbCountry@1220000 : Record 9;
                                                                TempDocDim@1220002 : TEMPORARY Record 357;
                                                                LO_RE_SalesLine@1106700000 : Record 37;
                                                                BO_éndern@1106700001 : Boolean;
                                                              BEGIN
                                                                TESTFIELD(Status,Status::Open);

                                                                //WB230206-START
                                                                //IF ("Location Code" <> xRec."Location Code") AND
                                                                //  (xRec."Sell-to Customer No." = "Sell-to Customer No.")
                                                                //THEN
                                                                //  MessageIfSalesLinesExist(FIELDCAPTION("Location Code"));
                                                                //WB230206-START

                                                                UpdateShipToAddress;

                                                                IF "Location Code" <> '' THEN BEGIN
                                                                  IF Location.GET("Location Code") THEN
                                                                    "Outbound Whse. Handling Time" := Location."Outbound Whse. Handling Time";
                                                                // START CDLINT - 12.8.05 - MV - modifications for Intrastat
                                                                  IF "Ship-to Country Code" <> '' THEN BEGIN
                                                                    locTbCountry.GET("Ship-to Country Code");
                                                                    IF locTbCountry.IsEU THEN
                                                                      Area := Location.Area;
                                                                  END;
                                                                //STOP CDLINT - 12.8.05 - MV - modifications for Intrastat
                                                                END ELSE BEGIN
                                                                  IF InvtSetup.GET THEN
                                                                    "Outbound Whse. Handling Time" := InvtSetup."Outbound Whse. Handling Time";
                                                                END;

                                                                // START CDLINT - 12.8.05 - MV - modifications for Intrastat
                                                                IF "Ship-to Country Code" <> '' THEN BEGIN
                                                                  locTbCountry.GET("Ship-to Country Code");
                                                                  locCompanyInfo.GET;
                                                                  IF NOT locTbCountry.IsEU THEN
                                                                    Area := ''
                                                                  ELSE
                                                                    IF Area = '' THEN Area := locCompanyInfo.Area;
                                                                END ELSE
                                                                  Area := '';
                                                                // STOP CDLINT - 12.8.05 - MV - modifications for Intrastat

                                                                //START WG003 Mantis 3688 VP 15.1.2013 - function removed
                                                                ////START WG003 VP 9.8.2007
                                                                //CreateDim(
                                                                //  DATABASE::Location, "Location Code",
                                                                //  DATABASE::Customer,"Bill-to Customer No.",
                                                                //  DATABASE::Job,"Job No.",
                                                                //  DATABASE::"Salesperson/Purchaser","Salesperson Code",
                                                                //  DATABASE::Campaign,"Campaign No.",
                                                                //  DATABASE::"Responsibility Center","Responsibility Center",
                                                                //  DATABASE::"Customer Template","Bill-to Customer Template Code");
                                                                ////STOP WG003 VP 9.8.2007
                                                                //STOP WG003 Mantis 3688 VP 15.1.2013 - function removed

                                                                // SP-START
                                                                "Supply Point" := "Location Code";
                                                                // SP-ENDE

                                                                LO_RE_SalesLine.RESET;
                                                                LO_RE_SalesLine.SETRANGE("Document Type","Document Type");
                                                                LO_RE_SalesLine.SETRANGE("Document No.","No.");
                                                                IF LO_RE_SalesLine.FINDFIRST THEN
                                                                  REPEAT
                                                                  IF LO_RE_SalesLine.Type = LO_RE_SalesLine.Type::Item THEN BEGIN
                                                                    //WB100306-START
                                                                    BO_éndern := TRUE;
                                                                    LO_RE_SalesLine.FNK_NotKopfMod(BO_éndern);
                                                                //Verhindert, dass im Validate von LocCode in SalesLine ein Wert im Kopf geÑndert wird
                                                                    //WB100306-STOP
                                                                    LO_RE_SalesLine.VALIDATE("Location Code","Location Code");
                                                                    LO_RE_SalesLine.MODIFY;
                                                                  END;
                                                                  UNTIL LO_RE_SalesLine.NEXT = 0;
                                                                //WB230206-STOP
                                                                //WB100306-START
                                                                BO_éndern := FALSE;
                                                                LO_RE_SalesLine.FNK_NotKopfMod(BO_éndern);

                                                                IF "Location Code" <> '' THEN         //Anstatt aus der Salesline wird "Truck Fleet No." jetzt hier geÑndert.
                                                                  IF Location.GET("Location Code") THEN
                                                                    IF Location."Kind Of Stock" = Location."Kind Of Stock"::"TKW/Faktura" THEN
                                                                      "Truck Fleet No." := "Location Code";
                                                                //WB100306-STOP
                                                              END;

                                                   CaptionML=[CSY=K¢d lokace;
                                                              ENU=Location Code];
                                                   SQL Data Type=Varchar }
    { 29  ;   ;Shortcut Dimension 1 Code;Code20   ;TableRelation="Dimension Value".Code WHERE (Global Dimension No.=CONST(1));
                                                   OnValidate=BEGIN
                                                                ValidateShortcutDimCode(1,"Shortcut Dimension 1 Code");
                                                              END;

                                                   CaptionML=[CSY=K¢d zkratky dimenze 1;
                                                              ENU=Shortcut Dimension 1 Code];
                                                   CaptionClass='1,2,1' }
    { 30  ;   ;Shortcut Dimension 2 Code;Code20   ;TableRelation="Dimension Value".Code WHERE (Global Dimension No.=CONST(2));
                                                   OnValidate=BEGIN
                                                                ValidateShortcutDimCode(2,"Shortcut Dimension 2 Code");
                                                              END;

                                                   CaptionML=[CSY=K¢d zkratky dimenze 2;
                                                              ENU=Shortcut Dimension 2 Code];
                                                   CaptionClass='1,2,2' }
    { 31  ;   ;Customer Posting Group;Code10      ;TableRelation="Customer Posting Group";
                                                   CaptionML=[CSY=Èüto skupina z†kazn°ka;
                                                              ENU=Customer Posting Group];
                                                   Editable=No }
    { 32  ;   ;Currency Code       ;Code10        ;TableRelation=Currency;
                                                   OnValidate=BEGIN
                                                                IF NOT (CurrFieldNo IN [0,FIELDNO("Posting Date")]) THEN
                                                                  TESTFIELD(Status,Status::Open);
                                                                IF CurrFieldNo <> FIELDNO("Currency Code") THEN
                                                                  UpdateCurrencyFactor
                                                                ELSE BEGIN
                                                                  IF "Currency Code" <> xRec."Currency Code" THEN BEGIN
                                                                    IF SalesLinesExist THEN
                                                                      TESTFIELD("Service Mgt. Document",FALSE);
                                                                    UpdateCurrencyFactor;
                                                                    RecreateSalesLines(FIELDCAPTION("Currency Code"));
                                                                  END ELSE
                                                                    IF "Currency Code" <> '' THEN BEGIN
                                                                      UpdateCurrencyFactor;
                                                                      IF "Currency Factor" <> xRec."Currency Factor" THEN
                                                                        ConfirmUpdateCurrencyFactor;
                                                                    END;
                                                                END;

                                                                // START CDLZA - 5.2.2007 - ZJ:
                                                                CALCFIELDS("Linked Advance");
                                                                IF "Linked Advance" THEN
                                                                  CheckAdvCurrency(Rec);
                                                                // STOP CDLZA - 5.2.2007 - ZJ:
                                                                //START - WG - 16.11.2016 - MP - NAV-19104
                                                                CLEAR(gRecursiveCount);
                                                                //STOP - WG - 16.11.2016 - MP - NAV-19104
                                                                //WG032 23.04.2008 - CDLAC Start
                                                                CheckPaymentMetod;
                                                                //WG032 23.04.2008 - CDLAC Stop

                                                                //START WAG - 01.09.2014 - JV - J10015
                                                                IF ("VAT Settlement Country Code"<>'')AND("Currency Code" <> xRec."Currency Code") THEN BEGIN
                                                                  GetSalesHeaderEXT;
                                                                  ConfirmUpdateVATCurrencyFactor;
                                                                END;
                                                                //STOP WAG - 01.09.2014 - JV - J10015
                                                              END;

                                                   CaptionML=[CSY=K¢d mÿny;
                                                              ENU=Currency Code] }
    { 33  ;   ;Currency Factor     ;Decimal       ;OnValidate=BEGIN
                                                                IF "Currency Factor" <> xRec."Currency Factor" THEN
                                                                  UpdateSalesLines(FIELDCAPTION("Currency Factor"),FALSE);
                                                              END;

                                                   CaptionML=[CSY=Faktor mÿny;
                                                              ENU=Currency Factor];
                                                   DecimalPlaces=0:15;
                                                   MinValue=0;
                                                   Editable=No }
    { 34  ;   ;Customer Price Group;Code10        ;TableRelation="Customer Price Group";
                                                   OnValidate=BEGIN
                                                                MessageIfSalesLinesExist(FIELDCAPTION("Customer Price Group"));
                                                              END;

                                                   CaptionML=[CSY=Cenov† skupina z†kazn°ka;
                                                              ENU=Customer Price Group] }
    { 35  ;   ;Prices Including VAT;Boolean       ;OnValidate=VAR
                                                                SalesLine@1000 : Record 37;
                                                                Currency@1001 : Record 4;
                                                                RecalculatePrice@1002 : Boolean;
                                                              BEGIN
                                                                TESTFIELD(Status,Status::Open);

                                                                IF "Prices Including VAT" <> xRec."Prices Including VAT" THEN BEGIN
                                                                  SalesLine.SETRANGE("Document Type","Document Type");
                                                                  SalesLine.SETRANGE("Document No.","No.");
                                                                  SalesLine.SETFILTER("Unit Price",'<>%1',0);
                                                                  SalesLine.SETFILTER("VAT %",'<>%1',0);
                                                                  IF SalesLine.FINDFIRST THEN BEGIN
                                                                    RecalculatePrice :=
                                                                      CONFIRM(
                                                                        STRSUBSTNO(
                                                                          Text024 +
                                                                          Text026,
                                                                          FIELDCAPTION("Prices Including VAT"),SalesLine.FIELDCAPTION("Unit Price")),
                                                                        TRUE);
                                                                    SalesLine.SetSalesHeader(Rec);

                                                                    IF "Currency Code" = '' THEN
                                                                      Currency.InitRoundingPrecision
                                                                    ELSE
                                                                      Currency.GET("Currency Code");

                                                                    REPEAT
                                                                      SalesLine.TESTFIELD("Quantity Invoiced",0);
                                                                      IF NOT RecalculatePrice THEN BEGIN
                                                                        SalesLine."VAT Difference" := 0;
                                                                        SalesLine.InitOutstandingAmount;
                                                                      END ELSE
                                                                        IF "Prices Including VAT" THEN BEGIN
                                                                          SalesLine."Unit Price" :=
                                                                            ROUND(
                                                                              SalesLine."Unit Price" * (1 + (SalesLine."VAT %" / 100)),
                                                                              Currency."Unit-Amount Rounding Precision");
                                                                          IF SalesLine.Quantity <> 0 THEN BEGIN
                                                                            SalesLine."Line Discount Amount" :=
                                                                              ROUND(
                                                                                SalesLine.Quantity * SalesLine."Unit Price" * SalesLine."Line Discount %" / 100,
                                                                                Currency."Amount Rounding Precision");
                                                                            SalesLine.VALIDATE("Inv. Discount Amount",
                                                                              ROUND(
                                                                                SalesLine."Inv. Discount Amount" * (1 + (SalesLine."VAT %" / 100)),
                                                                                Currency."Amount Rounding Precision"));
                                                                          END;
                                                                        END ELSE BEGIN
                                                                          SalesLine."Unit Price" :=
                                                                            ROUND(
                                                                              SalesLine."Unit Price" / (1 + (SalesLine."VAT %" / 100)),
                                                                              Currency."Unit-Amount Rounding Precision");
                                                                          IF SalesLine.Quantity <> 0 THEN BEGIN
                                                                            SalesLine."Line Discount Amount" :=
                                                                              ROUND(
                                                                                SalesLine.Quantity * SalesLine."Unit Price" * SalesLine."Line Discount %" / 100,
                                                                                Currency."Amount Rounding Precision");
                                                                            SalesLine.VALIDATE("Inv. Discount Amount",
                                                                              ROUND(
                                                                                SalesLine."Inv. Discount Amount" / (1 + (SalesLine."VAT %" / 100)),
                                                                                Currency."Amount Rounding Precision"));
                                                                          END;
                                                                        END;
                                                                      SalesLine.MODIFY;
                                                                    UNTIL SalesLine.NEXT = 0;
                                                                  END;
                                                                END;
                                                              END;

                                                   CaptionML=[CSY=Ceny vüetnÿ DPH;
                                                              ENU=Prices Including VAT] }
    { 37  ;   ;Invoice Disc. Code  ;Code20        ;OnValidate=BEGIN
                                                                TESTFIELD(Status,Status::Open);
                                                                MessageIfSalesLinesExist(FIELDCAPTION("Invoice Disc. Code"));
                                                              END;

                                                   CaptionML=[CSY=K¢d fakturaün° slevy;
                                                              ENU=Invoice Disc. Code] }
    { 40  ;   ;Customer Disc. Group;Code10        ;TableRelation="Customer Discount Group";
                                                   OnValidate=BEGIN
                                                                TESTFIELD(Status,Status::Open);
                                                                MessageIfSalesLinesExist(FIELDCAPTION("Customer Disc. Group"));
                                                              END;

                                                   CaptionML=[CSY=Skupina slev z†kazn°ka;
                                                              ENU=Customer Disc. Group] }
    { 41  ;   ;Language Code       ;Code10        ;TableRelation=Language;
                                                   OnValidate=BEGIN
                                                                MessageIfSalesLinesExist(FIELDCAPTION("Language Code"));
                                                              END;

                                                   CaptionML=[CSY=K¢d jazyka;
                                                              ENU=Language Code] }
    { 43  ;   ;Salesperson Code    ;Code10        ;TableRelation=Salesperson/Purchaser;
                                                   OnValidate=VAR
                                                                TempDocDim@1000 : TEMPORARY Record 357;
                                                              BEGIN
                                                                TempDocDim.GetDimensions(DATABASE::"Sales Header","Document Type","No.",0,TempDocDim);

                                                                CreateDim(
                                                                  DATABASE::"Salesperson/Purchaser","Salesperson Code",
                                                                  DATABASE::Customer,"Bill-to Customer No.",
                                                                  DATABASE::Job,"Job No.",
                                                                  DATABASE::Campaign,"Campaign No.",
                                                                  DATABASE::"Responsibility Center","Responsibility Center",
                                                                  //Mantis 3688 VP 15.1.2013 DATABASE::Location, "Location Code",    //WG003 VP 9.8.2007
                                                                  DATABASE::"Customer Template","Bill-to Customer Template Code");

                                                                IF SalesLinesExist THEN
                                                                  TempDocDim.UpdateAllLineDim(DATABASE::"Sales Header","Document Type","No.",TempDocDim);
                                                              END;

                                                   CaptionML=[CSY=K¢d prodejce;
                                                              ENU=Salesperson Code] }
    { 45  ;   ;Order Class         ;Code10        ;CaptionML=[CSY=T˝°da objedn†vky;
                                                              ENU=Order Class] }
    { 46  ;   ;Comment             ;Boolean       ;FieldClass=FlowField;
                                                   CalcFormula=Exist("Sales Comment Line" WHERE (Document Type=FIELD(Document Type),
                                                                                                 No.=FIELD(No.)));
                                                   CaptionML=[CSY=Pozn†mka;
                                                              ENU=Comment];
                                                   Editable=No }
    { 47  ;   ;No. Printed         ;Integer       ;CaptionML=[CSY=Kolikr†t vytiÁtÿno;
                                                              ENU=No. Printed];
                                                   Editable=No }
    { 51  ;   ;On Hold             ;Code3         ;CaptionML=[CSY=Vyükat;
                                                              ENU=On Hold] }
    { 52  ;   ;Applies-to Doc. Type;Option        ;CaptionML=[CSY=Typ vyrovn†n° dokladu;
                                                              ENU=Applies-to Doc. Type];
                                                   OptionCaptionML=[CSY=" ,Platba,Faktura,Dobropis,Pen†le,Upom°nka,Refundace,Z†lohaSTD";
                                                                    ENU=" ,Payment,Invoice,Credit Memo,Finance Charge Memo,Reminder,Refund,AdvanceSTD"];
                                                   OptionString=[ ,Payment,Invoice,Credit Memo,Finance Charge Memo,Reminder,Refund,Advance] }
    { 53  ;   ;Applies-to Doc. No. ;Code20        ;OnValidate=BEGIN
                                                                IF "Applies-to Doc. No." <> '' THEN
                                                                  TESTFIELD("Bal. Account No.",'');

                                                                IF ("Applies-to Doc. No." <> xRec."Applies-to Doc. No.") AND (xRec."Applies-to Doc. No." <> '') AND
                                                                   ("Applies-to Doc. No." <> '')
                                                                THEN BEGIN
                                                                  SetAmountToApply("Applies-to Doc. No.","Bill-to Customer No.");
                                                                  SetAmountToApply(xRec."Applies-to Doc. No.","Bill-to Customer No.");
                                                                END ELSE
                                                                  IF ("Applies-to Doc. No." <> xRec."Applies-to Doc. No.") AND (xRec."Applies-to Doc. No." = '') THEN
                                                                    SetAmountToApply("Applies-to Doc. No.","Bill-to Customer No.")
                                                                  ELSE IF ("Applies-to Doc. No." <> xRec."Applies-to Doc. No.") AND ("Applies-to Doc. No." = '') THEN
                                                                    SetAmountToApply(xRec."Applies-to Doc. No.","Bill-to Customer No.");
                                                              END;

                                                   OnLookup=BEGIN
                                                              TESTFIELD("Bal. Account No.",'');
                                                              CustLedgEntry.SETCURRENTKEY("Customer No.",Open,Positive,"Due Date");
                                                              CustLedgEntry.SETRANGE("Customer No.","Bill-to Customer No.");
                                                              CustLedgEntry.SETRANGE(Open,TRUE);
                                                              IF "Applies-to Doc. No." <> '' THEN BEGIN
                                                                CustLedgEntry.SETRANGE("Document Type","Applies-to Doc. Type");
                                                                CustLedgEntry.SETRANGE("Document No.","Applies-to Doc. No.");
                                                                IF CustLedgEntry.FINDFIRST THEN;
                                                                CustLedgEntry.SETRANGE("Document Type");
                                                                CustLedgEntry.SETRANGE("Document No.");
                                                              END ELSE IF "Applies-to Doc. Type" <> 0 THEN BEGIN
                                                                CustLedgEntry.SETRANGE("Document Type","Applies-to Doc. Type");
                                                                IF CustLedgEntry.FINDFIRST THEN;
                                                                CustLedgEntry.SETRANGE("Document Type");
                                                              END ELSE IF Amount <> 0 THEN BEGIN
                                                                CustLedgEntry.SETRANGE(Positive,Amount < 0);
                                                                IF CustLedgEntry.FINDFIRST THEN;
                                                                CustLedgEntry.SETRANGE(Positive);
                                                              END;

                                                              ApplyCustEntries.SetSales(Rec,CustLedgEntry,SalesHeader.FIELDNO("Applies-to Doc. No."));
                                                              ApplyCustEntries.SETTABLEVIEW(CustLedgEntry);
                                                              ApplyCustEntries.SETRECORD(CustLedgEntry);
                                                              ApplyCustEntries.LOOKUPMODE(TRUE);
                                                              IF ApplyCustEntries.RUNMODAL = ACTION::LookupOK THEN BEGIN
                                                                ApplyCustEntries.GetCustLedgEntry(CustLedgEntry);
                                                                GenJnlApply.CheckAgainstApplnCurrency(
                                                                  "Currency Code",CustLedgEntry."Currency Code",GenJnILine."Account Type"::Customer,TRUE);
                                                                "Applies-to Doc. Type" := CustLedgEntry."Document Type";
                                                                "Applies-to Doc. No." := CustLedgEntry."Document No.";
                                                              END;
                                                              CLEAR(ApplyCustEntries);
                                                            END;

                                                   CaptionML=[CSY=¨°slo vyrovn†n° dokladu;
                                                              ENU=Applies-to Doc. No.] }
    { 55  ;   ;Bal. Account No.    ;Code20        ;TableRelation=IF (Bal. Account Type=CONST(G/L Account)) "G/L Account"
                                                                 ELSE IF (Bal. Account Type=CONST(Bank Account)) "Bank Account";
                                                   OnValidate=BEGIN
                                                                IF "Bal. Account No." <> '' THEN
                                                                  CASE "Bal. Account Type" OF
                                                                    "Bal. Account Type"::"G/L Account":
                                                                      BEGIN
                                                                        GLAcc.GET("Bal. Account No.");
                                                                        GLAcc.CheckGLAcc;
                                                                        GLAcc.TESTFIELD("Direct Posting",TRUE);
                                                                      END;
                                                                    "Bal. Account Type"::"Bank Account":
                                                                      BEGIN
                                                                        BankAcc.GET("Bal. Account No.");
                                                                        BankAcc.TESTFIELD(Blocked,FALSE);
                                                                        BankAcc.TESTFIELD("Currency Code","Currency Code");
                                                                      END;
                                                                  END;
                                                              END;

                                                   CaptionML=[CSY=¨°slo proti£ütu;
                                                              ENU=Bal. Account No.] }
    { 56  ;   ;Job No.             ;Code20        ;TableRelation=Job;
                                                   OnValidate=BEGIN
                                                                MessageIfSalesLinesExist(FIELDCAPTION("Job No."));

                                                                CreateDim(
                                                                  DATABASE::Job,"Job No.",
                                                                  DATABASE::Customer,"Bill-to Customer No.",
                                                                  DATABASE::"Salesperson/Purchaser","Salesperson Code",
                                                                  DATABASE::Campaign,"Campaign No.",
                                                                  DATABASE::"Responsibility Center","Responsibility Center",
                                                                  //Mantis 3688 VP 15.1.2013 DATABASE::Location, "Location Code",  //WG003 VP 9.8.2007
                                                                  DATABASE::"Customer Template","Bill-to Customer Template Code");
                                                              END;

                                                   CaptionML=[CSY=¨°slo projektu;
                                                              ENU=Job No.] }
    { 57  ;   ;Ship                ;Boolean       ;CaptionML=[CSY=K dod†n°;
                                                              ENU=Ship];
                                                   Editable=No }
    { 58  ;   ;Invoice             ;Boolean       ;CaptionML=[CSY=K fakturaci;
                                                              ENU=Invoice] }
    { 60  ;   ;Amount              ;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Sales Line".Amount WHERE (Document Type=FIELD(Document Type),
                                                                                              Document No.=FIELD(No.)));
                                                   CaptionML=[CSY=¨†stka;
                                                              ENU=Amount];
                                                   Editable=No;
                                                   AutoFormatType=1;
                                                   AutoFormatExpr="Currency Code" }
    { 61  ;   ;Amount Including VAT;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Sales Line"."Amount Including VAT" WHERE (Document Type=FIELD(Document Type),
                                                                                                              Document No.=FIELD(No.)));
                                                   CaptionML=[CSY=¨†stka vüetnÿ DPH;
                                                              ENU=Amount Including VAT];
                                                   Editable=No;
                                                   AutoFormatType=1;
                                                   AutoFormatExpr="Currency Code" }
    { 62  ;   ;Shipping No.        ;Code20        ;OnValidate=VAR
                                                                LO_RE_Salesline@1106700000 : Record 37;
                                                              BEGIN
                                                                LO_RE_Salesline.RESET;
                                                                LO_RE_Salesline.SETRANGE("Document Type","Document Type");
                                                                LO_RE_Salesline.SETRANGE("Document No.","No.");
                                                                IF LO_RE_Salesline.FINDFIRST THEN
                                                                REPEAT
                                                                  LO_RE_Salesline."Shipment No." := "Shipping No.";
                                                                  LO_RE_Salesline.MODIFY;
                                                                UNTIL LO_RE_Salesline.NEXT = 0;
                                                              END;

                                                   CaptionML=[CSY=¨°slo dod†vky;
                                                              ENU=Shipping No.] }
    { 63  ;   ;Posting No.         ;Code20        ;CaptionML=[CSY=¨°slo £ütov†n°;
                                                              ENU=Posting No.] }
    { 64  ;   ;Last Shipping No.   ;Code20        ;TableRelation="Sales Shipment Header";
                                                   CaptionML=[CSY=Posledn° ü°slo dod†vky;
                                                              ENU=Last Shipping No.];
                                                   Editable=No }
    { 65  ;   ;Last Posting No.    ;Code20        ;TableRelation="Sales Invoice Header";
                                                   CaptionML=[CSY=Posl.ü°slo faktury;
                                                              ENU=Last Posting No.];
                                                   Editable=No }
    { 70  ;   ;VAT Registration No.;Text20        ;CaptionML=[CSY=DI¨;
                                                              ENU=VAT Registration No.];
                                                   Description=CDLS1 }
    { 71  ;   ;Combine Shipments   ;Boolean       ;CaptionML=[CSY=Kombinovat dod†vky;
                                                              ENU=Combine Shipments] }
    { 73  ;   ;Reason Code         ;Code10        ;TableRelation="Reason Code";
                                                   CaptionML=[CSY=K¢d p˝°üiny;
                                                              ENU=Reason Code] }
    { 74  ;   ;Gen. Bus. Posting Group;Code10     ;TableRelation="Gen. Business Posting Group";
                                                   OnValidate=BEGIN
                                                                TESTFIELD(Status,Status::Open);
                                                                IF xRec."Gen. Bus. Posting Group" <> "Gen. Bus. Posting Group" THEN
                                                                  IF GenBusPostingGrp.ValidateVatBusPostingGroup(GenBusPostingGrp,"Gen. Bus. Posting Group") THEN BEGIN
                                                                    "VAT Bus. Posting Group" := GenBusPostingGrp."Def. VAT Bus. Posting Group";

                                                                    //START CDLOUD - 19.11.2015 - DuLo - Special tax arrangement - SK 2016
                                                                    SalesSetup.GET;
                                                                    IF SalesSetup."Special Tax Arrangement" AND
                                                                       (SalesSetup."OUD Valid From Date" <> 0D) AND
                                                                       ("VAT Taxation Date" <> 0D) AND
                                                                       ("VAT Taxation Date" >= SalesSetup."OUD Valid From Date")
                                                                    THEN BEGIN
                                                                      IF ((SalesSetup."OUD Valid To Date" <> 0D) AND ("VAT Taxation Date" <= SalesSetup."OUD Valid To Date")) OR
                                                                         (SalesSetup."OUD Valid To Date" = 0D)
                                                                      THEN BEGIN
                                                                        VATBusPostGroup.GET("VAT Bus. Posting Group");
                                                                        VATBusPostGroup.TESTFIELD("OUD VAT Bus. Posting Group");
                                                                        "VAT Bus. Posting Group" := VATBusPostGroup."OUD VAT Bus. Posting Group";
                                                                      END;
                                                                    END;
                                                                    //STOP CDLOUD - 19.11.2015 - DuLo - Special tax arrangement - SK 2016

                                                                    RecreateSalesLines(FIELDCAPTION("Gen. Bus. Posting Group"));
                                                                  END;
                                                              END;

                                                   CaptionML=[CSY=Obecn† obch.£üto skupina;
                                                              ENU=Gen. Bus. Posting Group] }
    { 75  ;   ;EU 3-Party Trade    ;Boolean       ;CaptionML=[CSY=EU obchod 3.strany;
                                                              ENU=EU 3-Party Trade] }
    { 76  ;   ;Transaction Type    ;Code10        ;TableRelation="Transaction Type";
                                                   OnValidate=BEGIN
                                                                UpdateSalesLines(FIELDCAPTION("Transaction Type"),FALSE);
                                                              END;

                                                   CaptionML=[CSY=Typ transakce;
                                                              ENU=Transaction Type] }
    { 77  ;   ;Transport Method    ;Code10        ;TableRelation="Transport Method";
                                                   OnValidate=BEGIN
                                                                UpdateSalesLines(FIELDCAPTION("Transport Method"),FALSE);
                                                              END;

                                                   CaptionML=[CSY=Typ p˝epravy;
                                                              ENU=Transport Method] }
    { 78  ;   ;VAT Country Code    ;Code10        ;TableRelation=Country;
                                                   CaptionML=[CSY=K¢d zemÿ DPH;
                                                              ENU=VAT Country Code] }
    { 79  ;   ;Sell-to Customer Name;Text50       ;CaptionML=[CSY=Z†kazn°k-n†zev;
                                                              ENU=Sell-to Customer Name];
                                                   Description=M5409 }
    { 80  ;   ;Sell-to Customer Name 2;Text50     ;CaptionML=[CSY=Z†kazn°k-n†zev 2;
                                                              ENU=Sell-to Customer Name 2];
                                                   Description=M5409 }
    { 81  ;   ;Sell-to Address     ;Text30        ;CaptionML=[CSY=Z†kazn°k-adresa;
                                                              ENU=Sell-to Address] }
    { 82  ;   ;Sell-to Address 2   ;Text30        ;CaptionML=[CSY=Z†kazn°k-adresa 2;
                                                              ENU=Sell-to Address 2] }
    { 83  ;   ;Sell-to City        ;Text30        ;OnValidate=BEGIN
                                                                IF "Date Received" = 0D THEN
                                                                  PostCode.ValidateCity("Sell-to City","Sell-to Post Code");
                                                              END;

                                                   OnLookup=BEGIN
                                                              PostCode.LookUpCity("Sell-to City","Sell-to Post Code",TRUE);
                                                            END;

                                                   CaptionML=[CSY=Z†kazn°k-mÿsto;
                                                              ENU=Sell-to City] }
    { 84  ;   ;Sell-to Contact     ;Text30        ;CaptionML=[CSY=Z†kazn°k-kontakt;
                                                              ENU=Sell-to Contact] }
    { 85  ;   ;Bill-to Post Code   ;Code20        ;TableRelation="Post Code";
                                                   OnValidate=BEGIN
                                                                IF "Date Received" = 0D THEN
                                                                  PostCode.ValidatePostCode("Bill-to City","Bill-to Post Code");
                                                              END;

                                                   OnLookup=BEGIN
                                                              PostCode.LookUpPostCode("Bill-to City","Bill-to Post Code",TRUE);
                                                            END;

                                                   ValidateTableRelation=No;
                                                   TestTableRelation=No;
                                                   CaptionML=[CSY=PS¨ pl†tce;
                                                              ENU=Bill-to Post Code] }
    { 86  ;   ;Bill-to County      ;Text30        ;CaptionML=[CSY=Kraj pl†tce;
                                                              ENU=Bill-to County] }
    { 87  ;   ;Bill-to Country Code;Code10        ;TableRelation=Country;
                                                   CaptionML=[CSY=K¢d zemÿ pl†tce;
                                                              ENU=Bill-to Country Code] }
    { 88  ;   ;Sell-to Post Code   ;Code20        ;TableRelation="Post Code";
                                                   OnValidate=BEGIN
                                                                IF "Date Received" = 0D THEN
                                                                  PostCode.ValidatePostCode("Sell-to City","Sell-to Post Code");
                                                              END;

                                                   OnLookup=BEGIN
                                                              PostCode.LookUpPostCode("Sell-to City","Sell-to Post Code",TRUE);
                                                            END;

                                                   ValidateTableRelation=No;
                                                   TestTableRelation=No;
                                                   CaptionML=[CSY=Z†kazn°k-PS¨;
                                                              ENU=Sell-to Post Code] }
    { 89  ;   ;Sell-to County      ;Text30        ;CaptionML=[CSY=Z†kazn°k-kraj;
                                                              ENU=Sell-to County] }
    { 90  ;   ;Sell-to Country Code;Code10        ;TableRelation=Country;
                                                   OnValidate=BEGIN
                                                                VALIDATE("Ship-to Country Code");
                                                              END;

                                                   CaptionML=[CSY=Z†kazn°k-k¢d zemÿ;
                                                              ENU=Sell-to Country Code] }
    { 91  ;   ;Ship-to Post Code   ;Code20        ;TableRelation="Post Code";
                                                   OnValidate=BEGIN
                                                                IF "Date Received" = 0D THEN
                                                                  PostCode.ValidatePostCode("Ship-to City","Ship-to Post Code");

                                                                //EISWZR Start
                                                                t_Dispopool.RESET;
                                                                t_Dispopool.SETRANGE(t_Dispopool.Typ, t_Dispopool.Typ::Verkaufsauftrag);
                                                                t_Dispopool.SETRANGE(t_Dispopool."No.", "No.");
                                                                IF t_Dispopool.FINDFIRST THEN
                                                                  BEGIN
                                                                    REPEAT          //AVIA-RK-180504
                                                                      t_Dispopool."Delivery Post Code" := "Ship-to Post Code";
                                                                      t_Dispopool.MODIFY;
                                                                    UNTIL t_Dispopool.NEXT = 0;   //AVIA-RK-180504
                                                                  END;
                                                                //EISWZR End
                                                              END;

                                                   OnLookup=BEGIN
                                                              PostCode.LookUpPostCode("Ship-to City","Ship-to Post Code",TRUE);
                                                            END;

                                                   ValidateTableRelation=No;
                                                   TestTableRelation=No;
                                                   CaptionML=[CSY=PS¨ p˝°jemce;
                                                              ENU=Ship-to Post Code] }
    { 92  ;   ;Ship-to County      ;Text30        ;CaptionML=[CSY=Kraj p˝°jemce;
                                                              ENU=Ship-to County] }
    { 93  ;   ;Ship-to Country Code;Code10        ;TableRelation=Country;
                                                   OnValidate=BEGIN
                                                                IF "Ship-to Country Code" <> '' THEN
                                                                  "VAT Country Code" := "Ship-to Country Code"
                                                                ELSE
                                                                  "VAT Country Code" := "Sell-to Country Code"
                                                              END;

                                                   CaptionML=[CSY=K¢d zemÿ p˝°jemce;
                                                              ENU=Ship-to Country Code] }
    { 94  ;   ;Bal. Account Type   ;Option        ;CaptionML=[CSY=Typ proti£ütu;
                                                              ENU=Bal. Account Type];
                                                   OptionCaptionML=[CSY=Finanün° £üet,Bankovn° £üet;
                                                                    ENU=G/L Account,Bank Account];
                                                   OptionString=G/L Account,Bank Account }
    { 97  ;   ;Exit Point          ;Code10        ;TableRelation="Entry/Exit Point";
                                                   OnValidate=BEGIN
                                                                UpdateSalesLines(FIELDCAPTION("Exit Point"),FALSE);
                                                              END;

                                                   CaptionML=[CSY=M°sto p˝echodu;
                                                              ENU=Exit Point] }
    { 98  ;   ;Correction          ;Boolean       ;CaptionML=[CSY=Oprava;
                                                              ENU=Correction] }
    { 99  ;   ;Document Date       ;Date          ;OnValidate=BEGIN
                                                                VALIDATE("Payment Terms Code");

                                                                //START WAG - 16.10.2014 - JV - J10015
                                                                GetSalesHeaderEXT;
                                                                IF SalesHeaderEXT."VAT Currency Code" <> '' THEN BEGIN
                                                                  IF "Document Date" <> xRec."Document Date" THEN BEGIN
                                                                    ConfirmUpdateVATCurrencyFactor
                                                                  //START - WG - 14.08.2015 - MP - NAV-13613
                                                                  //END;
                                                                  END ELSE BEGIN
                                                                    IF SalesHeaderEXT."VAT Currency Factor" <> GetVATCurrencyFactor() THEN BEGIN
                                                                      ConfirmUpdateVATCurrencyFactor();
                                                                    END;
                                                                  END;
                                                                  //STOP - WG - 14.08.2015 - MP - NAV-13613
                                                                END;
                                                                //STOP WAG - 16.10.2014 - JV - J10015
                                                              END;

                                                   CaptionML=[CSY=Datum dokladu;
                                                              ENU=Document Date] }
    { 100 ;   ;External Document No.;Code20       ;CaptionML=[CSY=¨°slo extern°ho dokladu;
                                                              ENU=External Document No.] }
    { 101 ;   ;Area                ;Code10        ;TableRelation=Area;
                                                   OnValidate=BEGIN
                                                                UpdateSalesLines(FIELDCAPTION(Area),FALSE);
                                                              END;

                                                   CaptionML=[CSY=Oblast;
                                                              ENU=Area] }
    { 102 ;   ;Transaction Specification;Code10   ;TableRelation="Transaction Specification";
                                                   OnValidate=BEGIN
                                                                UpdateSalesLines(FIELDCAPTION("Transaction Specification"),FALSE);
                                                              END;

                                                   CaptionML=[CSY=Specifikace transakce;
                                                              ENU=Transaction Specification] }
    { 104 ;   ;Payment Method Code ;Code10        ;TableRelation="Payment Method";
                                                   OnValidate=BEGIN
                                                                //EISWZR Start
                                                                IF PaymentTerms.GET("Payment Terms Code") THEN
                                                                  IF "Document Type" = "Document Type"::"Credit Memo" THEN
                                                                    IF PaymentTerms."Calc. Pmt. Disc. on Cr. Memos" THEN
                                                                      PaymentMethod.validateCustPaymentMethod("Payment Method Code", "Bill-to Customer No.");
                                                                //EISWZR End

                                                                PaymentMethod.INIT;
                                                                IF "Payment Method Code" <> '' THEN
                                                                  PaymentMethod.GET("Payment Method Code");
                                                                "Bal. Account Type" := PaymentMethod."Bal. Account Type";
                                                                "Bal. Account No." := PaymentMethod."Bal. Account No.";
                                                                IF "Bal. Account No." <> '' THEN BEGIN
                                                                  TESTFIELD("Applies-to Doc. No.",'');
                                                                  TESTFIELD("Applies-to ID",'');
                                                                END;
                                                              END;

                                                   CaptionML=[CSY=K¢d zpÖsobu platby;
                                                              ENU=Payment Method Code] }
    { 105 ;   ;Shipping Agent Code ;Code10        ;TableRelation="Shipping Agent";
                                                   OnValidate=BEGIN
                                                                TESTFIELD(Status,Status::Open);
                                                                IF xRec."Shipping Agent Code" = "Shipping Agent Code" THEN
                                                                  EXIT;

                                                                "Shipping Agent Service Code" := '';
                                                                GetShippingTime(FIELDNO("Shipping Agent Code"));
                                                                UpdateSalesLines(FIELDCAPTION("Shipping Agent Code"),CurrFieldNo<>0);
                                                              END;

                                                   CaptionML=[CSY=K¢d p˝epravce;
                                                              ENU=Shipping Agent Code] }
    { 106 ;   ;Package Tracking No.;Text30        ;CaptionML=[CSY=Sledovac° ü°slo z†silky;
                                                              ENU=Package Tracking No.] }
    { 107 ;   ;No. Series          ;Code10        ;TableRelation="No. Series";
                                                   CaptionML=[CSY=¨°seln† ˝ada;
                                                              ENU=No. Series];
                                                   Editable=No }
    { 108 ;   ;Posting No. Series  ;Code10        ;TableRelation="No. Series";
                                                   OnValidate=BEGIN
                                                                IF "Posting No. Series" <> '' THEN BEGIN
                                                                  SalesSetup.GET;
                                                                  TestNoSeries;
                                                                  NoSeriesMgt.TestSeries(GetPostingNoSeriesCode,"Posting No. Series");
                                                                  //NAV-16164+
                                                                  //NAV-18944+
                                                                  IF NoSeries.GET("Posting No. Series") THEN
                                                                  //NoSeries.GET("No. Series")
                                                                  //NAV-18944-
                                                                  VALIDATE("Internal document",NoSeries."Internal Docs Nos.");
                                                                  //NAV-16164-
                                                                END;
                                                                TESTFIELD("Posting No.",'');

                                                                //START NAV2016 - 14.9.2017 - KH - Assignment
                                                                IF ("Document Type" <> 0) AND ("No." <> '') THEN BEGIN
                                                                  GetSalesHeaderEXT;
                                                                  NAV2016AssignmentManagement.GetSalesHeadAssignmentSign(Rec, SalesHeaderEXT, 2);
                                                                  ModifySalesHeaderEXT;
                                                                  CALCFIELDS("NAV2016 Assignment");
                                                                END;
                                                                //STOP NAV2016 - 14.9.2017 - KH - Assignment
                                                              END;

                                                   OnLookup=BEGIN
                                                              WITH SalesHeader DO BEGIN
                                                                SalesHeader := Rec;
                                                                SalesSetup.GET;
                                                                TestNoSeries;
                                                                IF NoSeriesMgt.LookupSeries(GetPostingNoSeriesCode,"Posting No. Series") THEN
                                                                  VALIDATE("Posting No. Series");
                                                                Rec := SalesHeader;
                                                              END;
                                                            END;

                                                   CaptionML=[CSY=¨°seln† ˝ada £ütov†n°;
                                                              ENU=Posting No. Series] }
    { 109 ;   ;Shipping No. Series ;Code10        ;TableRelation="No. Series";
                                                   OnValidate=BEGIN
                                                                IF "Shipping No. Series" <> '' THEN BEGIN
                                                                  SalesSetup.GET;
                                                                  SalesSetup.TESTFIELD("Posted Shipment Nos.");
                                                                  NoSeriesMgt.TestSeries(SalesSetup."Posted Shipment Nos.","Shipping No. Series");
                                                                END;
                                                                TESTFIELD("Shipping No.",'');
                                                              END;

                                                   OnLookup=BEGIN
                                                              WITH SalesHeader DO BEGIN
                                                                SalesHeader := Rec;
                                                                SalesSetup.GET;
                                                                SalesSetup.TESTFIELD("Posted Shipment Nos.");
                                                                IF NoSeriesMgt.LookupSeries(SalesSetup."Posted Shipment Nos.","Shipping No. Series") THEN
                                                                  VALIDATE("Shipping No. Series");
                                                                Rec := SalesHeader;
                                                              END;
                                                            END;

                                                   CaptionML=[CSY=¨°seln† ˝ada dod†vek;
                                                              ENU=Shipping No. Series] }
    { 114 ;   ;Tax Area Code       ;Code20        ;TableRelation="Tax Area";
                                                   OnValidate=BEGIN
                                                                TESTFIELD(Status,Status::Open);
                                                                MessageIfSalesLinesExist(FIELDCAPTION("Tax Area Code"));
                                                              END;

                                                   CaptionML=[CSY=K¢d daÂovÇ oblasti;
                                                              ENU=Tax Area Code] }
    { 115 ;   ;Tax Liable          ;Boolean       ;OnValidate=BEGIN
                                                                TESTFIELD(Status,Status::Open);
                                                                MessageIfSalesLinesExist(FIELDCAPTION("Tax Liable"));
                                                              END;

                                                   CaptionML=[CSY=DaÂov† povinnost;
                                                              ENU=Tax Liable] }
    { 116 ;   ;VAT Bus. Posting Group;Code10      ;TableRelation="VAT Business Posting Group";
                                                   OnValidate=BEGIN
                                                                TESTFIELD(Status,Status::Open);
                                                                IF xRec."VAT Bus. Posting Group" <> "VAT Bus. Posting Group" THEN
                                                                  RecreateSalesLines(FIELDCAPTION("VAT Bus. Posting Group"));
                                                              END;

                                                   CaptionML=[CSY=DPH obchodn° £üto skupina;
                                                              ENU=VAT Bus. Posting Group] }
    { 117 ;   ;Reserve             ;Option        ;CaptionML=[CSY=Rezervovat;
                                                              ENU=Reserve];
                                                   OptionCaptionML=[CSY=Nikdy,Volitelnÿ,Vßdy;
                                                                    ENU=Never,Optional,Always];
                                                   OptionString=Never,Optional,Always }
    { 118 ;   ;Applies-to ID       ;Code20        ;OnValidate=VAR
                                                                TempCustLedgEntry@1000 : Record 21;
                                                              BEGIN
                                                                IF "Applies-to ID" <> '' THEN
                                                                  TESTFIELD("Bal. Account No.",'');
                                                                IF ("Applies-to ID" <> xRec."Applies-to ID") AND (xRec."Applies-to ID" <> '') THEN BEGIN
                                                                  CustLedgEntry.SETCURRENTKEY("Customer No.",Open);
                                                                  CustLedgEntry.SETRANGE("Customer No.","Bill-to Customer No.");
                                                                  CustLedgEntry.SETRANGE(Open,TRUE);
                                                                  CustLedgEntry.SETRANGE("Applies-to ID",xRec."Applies-to ID");
                                                                  IF CustLedgEntry.FINDFIRST THEN
                                                                    CustEntrySetApplID.SetApplId(CustLedgEntry,TempCustLedgEntry,0,0,'');
                                                                  CustLedgEntry.RESET;
                                                                END;
                                                              END;

                                                   CaptionML=[CSY=ID vyrovn†n°;
                                                              ENU=Applies-to ID] }
    { 119 ;   ;VAT Base Discount % ;Decimal       ;OnValidate=BEGIN
                                                                IF NOT (CurrFieldNo IN [0,FIELDNO("Posting Date"),FIELDNO("Document Date")]) THEN
                                                                  TESTFIELD(Status,Status::Open);
                                                                GLSetup.GET;
                                                                IF "VAT Base Discount %" > GLSetup."VAT Tolerance %" THEN
                                                                  ERROR(
                                                                    Text007,
                                                                    FIELDCAPTION("VAT Base Discount %"),
                                                                    GLSetup.FIELDCAPTION("VAT Tolerance %"),
                                                                    GLSetup.TABLECAPTION);

                                                                IF ("VAT Base Discount %" = xRec."VAT Base Discount %") AND
                                                                   (CurrFieldNo <> 0)
                                                                THEN
                                                                  EXIT;

                                                                SalesLine.SETRANGE("Document Type","Document Type");
                                                                SalesLine.SETRANGE("Document No.","No.");
                                                                SalesLine.SETFILTER(Type,'<>%1',SalesLine.Type::" ");
                                                                SalesLine.SETFILTER(Quantity,'<>0');
                                                                //DocDim.LOCKTABLE;
                                                                //SalesLine.LOCKTABLE;
                                                                IF SalesLine.FINDFIRST THEN BEGIN
                                                                  MODIFY;
                                                                  REPEAT
                                                                    IF (SalesLine."Quantity Invoiced" <> SalesLine.Quantity) OR
                                                                       ("Shipping Advice" <> "Shipping Advice"::Partial) OR
                                                                       (SalesLine.Type <> SalesLine.Type::"Charge (Item)") OR
                                                                       (CurrFieldNo <> 0)
                                                                    THEN BEGIN
                                                                      SalesLine.UpdateAmounts;
                                                                      SalesLine.MODIFY;
                                                                    END;
                                                                  UNTIL SalesLine.NEXT = 0;
                                                                END;
                                                                SalesLine.RESET;
                                                              END;

                                                   CaptionML=[CSY=Sleva z†kladu DPH %;
                                                              ENU=VAT Base Discount %];
                                                   DecimalPlaces=0:5;
                                                   MinValue=0;
                                                   MaxValue=100 }
    { 120 ;   ;Status              ;Option        ;CaptionML=[CSY=Stav;
                                                              ENU=Status];
                                                   OptionCaptionML=[CSY=Otev˝eno,Vyd†no;
                                                                    ENU=Open,Released];
                                                   OptionString=Open,Released;
                                                   Editable=No }
    { 121 ;   ;Invoice Discount Calculation;Option;CaptionML=[CSY=VÏpoüet fakturaün° slevy;
                                                              ENU=Invoice Discount Calculation];
                                                   OptionCaptionML=[CSY=¶†dn†,%,¨†stka;
                                                                    ENU=None,%,Amount];
                                                   OptionString=None,%,Amount;
                                                   Editable=No }
    { 122 ;   ;Invoice Discount Value;Decimal     ;CaptionML=[CSY=Hodnota fakturaün° slevy;
                                                              ENU=Invoice Discount Value];
                                                   Editable=No;
                                                   AutoFormatType=1 }
    { 123 ;   ;Send IC Document    ;Boolean       ;OnValidate=BEGIN
                                                                IF "Send IC Document" THEN BEGIN
                                                                  TESTFIELD("Sell-to IC Partner Code");
                                                                  TESTFIELD("IC Direction","IC Direction"::Outgoing);
                                                                END;
                                                              END;

                                                   CaptionML=[CSY=Odeslat mezipodnikovÏ doklad;
                                                              ENU=Send IC Document] }
    { 124 ;   ;IC Status           ;Option        ;CaptionML=[CSY=Stav mezipodnikovÇ transakce;
                                                              ENU=IC Status];
                                                   OptionCaptionML=[CSY=NovÇ,P˝ipravenÇ,OdeslanÇ;
                                                                    ENU=New,Pending,Sent];
                                                   OptionString=New,Pending,Sent }
    { 125 ;   ;Sell-to IC Partner Code;Code20     ;TableRelation="IC Partner";
                                                   CaptionML=[CSY=K¢d mezipod.partnera-z†kazn°ka;
                                                              ENU=Sell-to IC Partner Code];
                                                   Editable=No }
    { 126 ;   ;Bill-to IC Partner Code;Code20     ;TableRelation="IC Partner";
                                                   CaptionML=[CSY=K¢d mezipod. partnera - pl†tce;
                                                              ENU=Bill-to IC Partner Code];
                                                   Editable=No }
    { 129 ;   ;IC Direction        ;Option        ;OnValidate=BEGIN
                                                                IF "IC Direction" = "IC Direction"::Incoming THEN
                                                                  "Send IC Document" := FALSE;
                                                              END;

                                                   CaptionML=[CSY=MezipodnikovÏ smÿr;
                                                              ENU=IC Direction];
                                                   OptionCaptionML=[CSY=Odchoz°,p˝°choz°;
                                                                    ENU=Outgoing,Incoming];
                                                   OptionString=Outgoing,Incoming }
    { 5043;   ;No. of Archived Versions;Integer   ;FieldClass=FlowField;
                                                   CalcFormula=Max("Sales Header Archive"."Version No." WHERE (Document Type=FIELD(Document Type),
                                                                                                               No.=FIELD(No.),
                                                                                                               Doc. No. Occurrence=FIELD(Doc. No. Occurrence)));
                                                   CaptionML=[CSY=Poüet archivovanÏch verz°;
                                                              ENU=No. of Archived Versions];
                                                   Editable=No }
    { 5048;   ;Doc. No. Occurrence ;Integer       ;CaptionML=[CSY=VÏskyty ü. dokladu;
                                                              ENU=Doc. No. Occurrence] }
    { 5050;   ;Campaign No.        ;Code20        ;TableRelation=Campaign;
                                                   OnValidate=VAR
                                                                TempDocDim@1000 : TEMPORARY Record 357;
                                                              BEGIN
                                                                MODIFY;
                                                                TempDocDim.GetDimensions(DATABASE::"Sales Header","Document Type","No.",0,TempDocDim);

                                                                CreateDim(
                                                                  DATABASE::Campaign,"Campaign No.",
                                                                  DATABASE::Customer,"Bill-to Customer No.",
                                                                  DATABASE::Job,"Job No.",
                                                                  DATABASE::"Salesperson/Purchaser","Salesperson Code",
                                                                  DATABASE::"Responsibility Center","Responsibility Center",
                                                                  //Mantis 3688 VP 15.1.2013 DATABASE::Location, "Location Code",  //WG003 VP 9.8.2007
                                                                  DATABASE::"Customer Template","Bill-to Customer Template Code");

                                                                IF SalesLinesExist THEN
                                                                  TempDocDim.UpdateAllLineDim(DATABASE::"Sales Header","Document Type","No.",TempDocDim);
                                                              END;

                                                   CaptionML=[CSY=¨°slo kampanÿ;
                                                              ENU=Campaign No.] }
    { 5051;   ;Sell-to Customer Template Code;Code10;
                                                   TableRelation="Customer Template";
                                                   OnValidate=VAR
                                                                SellToCustTemplate@1000 : Record 5105;
                                                              BEGIN
                                                                TESTFIELD("Document Type","Document Type"::Quote);
                                                                TESTFIELD(Status,Status::Open);

                                                                IF NOT InsertMode AND
                                                                  ("Sell-to Customer Template Code" <> xRec."Sell-to Customer Template Code") AND
                                                                  (xRec."Sell-to Customer Template Code" <> '')
                                                                THEN BEGIN
                                                                  IF HideValidationDialog THEN
                                                                    Confirmed := TRUE
                                                                  ELSE
                                                                    Confirmed := CONFIRM(Text004,FALSE,FIELDCAPTION("Sell-to Customer Template Code"));
                                                                  IF Confirmed THEN BEGIN
                                                                    SalesLine.RESET;
                                                                    SalesLine.SETRANGE("Document Type","Document Type");
                                                                    SalesLine.SETRANGE("Document No.","No.");
                                                                    IF "Sell-to Customer Template Code" = '' THEN BEGIN
                                                                      IF SalesLine.FINDFIRST THEN
                                                                        ERROR(Text005,FIELDCAPTION("Sell-to Customer Template Code"));
                                                                      INIT;
                                                                      SalesSetup.GET;
                                                                      InitRecord;
                                                                      "No. Series" := xRec."No. Series";
                                                                      IF xRec."Shipping No." <> '' THEN BEGIN
                                                                        "Shipping No. Series" := xRec."Shipping No. Series";
                                                                        "Shipping No." := xRec."Shipping No.";
                                                                      END;
                                                                      IF xRec."Posting No." <> '' THEN BEGIN
                                                                        "Posting No. Series" := xRec."Posting No. Series";
                                                                        "Posting No." := xRec."Posting No.";
                                                                        //NAV-18944+
                                                                        "Internal document" := xRec."Internal document";
                                                                        //NAV-18944-
                                                                      END;
                                                                      IF xRec."Return Receipt No." <> '' THEN BEGIN
                                                                        "Return Receipt No. Series" := xRec."Return Receipt No. Series";
                                                                        "Return Receipt No." := xRec."Return Receipt No.";
                                                                      END;
                                                                      EXIT;
                                                                    END;
                                                                  END ELSE BEGIN
                                                                    "Sell-to Customer Template Code" := xRec."Sell-to Customer Template Code";
                                                                    EXIT;
                                                                  END;
                                                                END;

                                                                IF SellToCustTemplate.GET("Sell-to Customer Template Code") THEN BEGIN
                                                                  SellToCustTemplate.TESTFIELD("Gen. Bus. Posting Group");
                                                                  "Gen. Bus. Posting Group" := SellToCustTemplate."Gen. Bus. Posting Group";
                                                                  "VAT Bus. Posting Group" := SellToCustTemplate."VAT Bus. Posting Group";

                                                                  //START CDLOUD - 19.11.2015 - DuLo - Special tax arrangement - SK 2016
                                                                  SalesSetup.GET;
                                                                  IF SalesSetup."Special Tax Arrangement" AND
                                                                     (SalesSetup."OUD Valid From Date" <> 0D) AND
                                                                     ("VAT Taxation Date" <> 0D) AND
                                                                     ("VAT Taxation Date" >= SalesSetup."OUD Valid From Date")
                                                                  THEN BEGIN
                                                                    IF ((SalesSetup."OUD Valid To Date" <> 0D) AND ("VAT Taxation Date" <= SalesSetup."OUD Valid To Date")) OR
                                                                       (SalesSetup."OUD Valid To Date" = 0D)
                                                                    THEN BEGIN
                                                                      VATBusPostGroup.GET("VAT Bus. Posting Group");
                                                                      VATBusPostGroup.TESTFIELD("OUD VAT Bus. Posting Group");
                                                                      "VAT Bus. Posting Group" := VATBusPostGroup."OUD VAT Bus. Posting Group";
                                                                    END;
                                                                  END;
                                                                  //STOP CDLOUD - 19.11.2015 - DuLo - Special tax arrangement - SK 2016

                                                                  IF "Bill-to Customer No." = '' THEN
                                                                    VALIDATE("Bill-to Customer Template Code","Sell-to Customer Template Code");
                                                                END;

                                                                IF NOT InsertMode AND
                                                                  ((xRec."Sell-to Customer Template Code" <> "Sell-to Customer Template Code") OR
                                                                   (xRec."Currency Code" <> "Currency Code"))
                                                                THEN
                                                                  RecreateSalesLines(FIELDCAPTION("Sell-to Customer Template Code"));
                                                              END;

                                                   CaptionML=[CSY=Z†kazn°k-k¢d Áablony;
                                                              ENU=Sell-to Customer Template Code] }
    { 5052;   ;Sell-to Contact No. ;Code20        ;TableRelation=Contact;
                                                   OnValidate=VAR
                                                                ContBusinessRelation@1004 : Record 5054;
                                                                Cont@1002 : Record 5050;
                                                                Opportunity@1000 : Record 5092;
                                                              BEGIN
                                                                TESTFIELD(Status,Status::Open);

                                                                IF ("Sell-to Contact No." <> xRec."Sell-to Contact No.") AND
                                                                   (xRec."Sell-to Contact No." <> '')
                                                                THEN BEGIN
                                                                  IF ("Sell-to Contact No." = '') AND ("Opportunity No." <> '') THEN
                                                                    ERROR(Text049,FIELDCAPTION("Sell-to Contact No."));
                                                                  IF HideValidationDialog THEN
                                                                    Confirmed := TRUE
                                                                  ELSE
                                                                    Confirmed := CONFIRM(Text004,FALSE,FIELDCAPTION("Sell-to Contact No."));
                                                                  IF Confirmed THEN BEGIN
                                                                    SalesLine.RESET;
                                                                    SalesLine.SETRANGE("Document Type","Document Type");
                                                                    SalesLine.SETRANGE("Document No.","No.");
                                                                    IF ("Sell-to Contact No." = '') AND ("Sell-to Customer No." = '') THEN BEGIN
                                                                      IF SalesLine.FINDFIRST THEN
                                                                        ERROR(Text005,FIELDCAPTION("Sell-to Contact No."));
                                                                      INIT;
                                                                      SalesSetup.GET;
                                                                      InitRecord;
                                                                      "No. Series" := xRec."No. Series";
                                                                      IF xRec."Shipping No." <> '' THEN BEGIN
                                                                        "Shipping No. Series" := xRec."Shipping No. Series";
                                                                        "Shipping No." := xRec."Shipping No.";
                                                                      END;
                                                                      IF xRec."Posting No." <> '' THEN BEGIN
                                                                        "Posting No. Series" := xRec."Posting No. Series";
                                                                        "Posting No." := xRec."Posting No.";
                                                                        //NAV-18944+
                                                                        "Internal document" := xRec."Internal document";
                                                                        //NAV-18944-
                                                                      END;
                                                                      IF xRec."Return Receipt No." <> '' THEN BEGIN
                                                                        "Return Receipt No. Series" := xRec."Return Receipt No. Series";
                                                                        "Return Receipt No." := xRec."Return Receipt No.";
                                                                      END;
                                                                      EXIT;
                                                                    END;
                                                                    IF "Opportunity No." <> '' THEN BEGIN
                                                                      Opportunity.GET("Opportunity No.");
                                                                      IF Opportunity."Contact No." <> "Sell-to Contact No." THEN BEGIN
                                                                        MODIFY;
                                                                        Opportunity.VALIDATE("Contact No.","Sell-to Contact No.");
                                                                        Opportunity.MODIFY;
                                                                      END
                                                                    END;
                                                                  END ELSE BEGIN
                                                                    Rec := xRec;
                                                                    EXIT;
                                                                  END;
                                                                END;

                                                                IF ("Sell-to Customer No." <> '') AND ("Sell-to Contact No." <> '') THEN BEGIN
                                                                  Cont.GET("Sell-to Contact No.");
                                                                  ContBusinessRelation.RESET;
                                                                  ContBusinessRelation.SETCURRENTKEY("Link to Table","No.");
                                                                  ContBusinessRelation.SETRANGE("Link to Table",ContBusinessRelation."Link to Table"::Customer);
                                                                  ContBusinessRelation.SETRANGE("No.","Sell-to Customer No.");
                                                                    IF ContBusinessRelation.FINDFIRST THEN
                                                                      IF ContBusinessRelation."Contact No." <> Cont."Company No." THEN
                                                                        ERROR(Text038,Cont."No.",Cont.Name,"Sell-to Customer No.");
                                                                END;

                                                                UpdateSellToCust("Sell-to Contact No.");
                                                              END;

                                                   OnLookup=VAR
                                                              Cont@1001 : Record 5050;
                                                              ContBusinessRelation@1000 : Record 5054;
                                                            BEGIN
                                                              IF ("Sell-to Customer No." <> '') AND (Cont.GET("Sell-to Contact No.")) THEN
                                                                Cont.SETRANGE("Company No.",Cont."Company No.")
                                                              ELSE
                                                                IF "Sell-to Customer No." <> '' THEN BEGIN
                                                                  ContBusinessRelation.RESET;
                                                                  ContBusinessRelation.SETCURRENTKEY("Link to Table","No.");
                                                                  ContBusinessRelation.SETRANGE("Link to Table",ContBusinessRelation."Link to Table"::Customer);
                                                                  ContBusinessRelation.SETRANGE("No.","Sell-to Customer No.");
                                                                  IF ContBusinessRelation.FINDFIRST THEN
                                                                    Cont.SETRANGE("Company No.",ContBusinessRelation."Contact No.");
                                                                END ELSE
                                                                  Cont.SETFILTER("Company No.",'<>''''');

                                                              IF "Sell-to Contact No." <> '' THEN
                                                                IF Cont.GET("Sell-to Contact No.") THEN ;
                                                              IF FORM.RUNMODAL(0,Cont) = ACTION::LookupOK THEN BEGIN
                                                                xRec := Rec;
                                                                VALIDATE("Sell-to Contact No.",Cont."No.");
                                                              END;
                                                            END;

                                                   CaptionML=[CSY=Z†kazn°k-ü°slo kontaktu;
                                                              ENU=Sell-to Contact No.] }
    { 5053;   ;Bill-to Contact No. ;Code20        ;TableRelation=Contact;
                                                   OnValidate=VAR
                                                                ContBusinessRelation@1004 : Record 5054;
                                                                Cont@1002 : Record 5050;
                                                              BEGIN
                                                                TESTFIELD(Status,Status::Open);

                                                                IF ("Bill-to Contact No." <> xRec."Bill-to Contact No.") AND
                                                                   (xRec."Bill-to Contact No." <> '')
                                                                THEN BEGIN
                                                                  IF HideValidationDialog THEN
                                                                    Confirmed := TRUE
                                                                  ELSE
                                                                    Confirmed := CONFIRM(Text004,FALSE,FIELDCAPTION("Bill-to Contact No."));
                                                                  IF Confirmed THEN BEGIN
                                                                    SalesLine.RESET;
                                                                    SalesLine.SETRANGE("Document Type","Document Type");
                                                                    SalesLine.SETRANGE("Document No.","No.");
                                                                    IF ("Bill-to Contact No." = '') AND ("Bill-to Customer No." = '') THEN BEGIN
                                                                      IF SalesLine.FINDFIRST THEN
                                                                        ERROR(Text005,FIELDCAPTION("Bill-to Contact No."));
                                                                      INIT;
                                                                      SalesSetup.GET;
                                                                      InitRecord;
                                                                      "No. Series" := xRec."No. Series";
                                                                      IF xRec."Shipping No." <> '' THEN BEGIN
                                                                        "Shipping No. Series" := xRec."Shipping No. Series";
                                                                        "Shipping No." := xRec."Shipping No.";
                                                                      END;
                                                                      IF xRec."Posting No." <> '' THEN BEGIN
                                                                        "Posting No. Series" := xRec."Posting No. Series";
                                                                        "Posting No." := xRec."Posting No.";
                                                                        //NAV-18944+
                                                                        "Internal document" := xRec."Internal document";
                                                                        //NAV-18944-
                                                                      END;
                                                                      IF xRec."Return Receipt No." <> '' THEN BEGIN
                                                                        "Return Receipt No. Series" := xRec."Return Receipt No. Series";
                                                                        "Return Receipt No." := xRec."Return Receipt No.";
                                                                      END;
                                                                      EXIT;
                                                                    END;
                                                                  END ELSE BEGIN
                                                                    "Bill-to Contact No." := xRec."Bill-to Contact No.";
                                                                    EXIT;
                                                                  END;
                                                                END;

                                                                IF ("Bill-to Customer No." <> '') AND ("Bill-to Contact No." <> '') THEN BEGIN
                                                                  Cont.GET("Bill-to Contact No.");
                                                                  ContBusinessRelation.RESET;
                                                                  ContBusinessRelation.SETCURRENTKEY("Link to Table","No.");
                                                                  ContBusinessRelation.SETRANGE("Link to Table",ContBusinessRelation."Link to Table"::Customer);
                                                                  ContBusinessRelation.SETRANGE("No.","Bill-to Customer No.");
                                                                    IF ContBusinessRelation.FINDFIRST THEN
                                                                      IF ContBusinessRelation."Contact No." <> Cont."Company No." THEN
                                                                        ERROR(Text038,Cont."No.",Cont.Name,"Bill-to Customer No.");
                                                                END;

                                                                UpdateBillToCust("Bill-to Contact No.");
                                                              END;

                                                   OnLookup=VAR
                                                              Cont@1001 : Record 5050;
                                                              ContBusinessRelation@1000 : Record 5054;
                                                            BEGIN
                                                              IF ("Bill-to Customer No." <> '') AND Cont.GET("Bill-to Contact No.") THEN
                                                                Cont.SETRANGE("Company No.",Cont."Company No.")
                                                              ELSE
                                                                IF Cust.GET("Bill-to Customer No.") THEN BEGIN
                                                                  ContBusinessRelation.RESET;
                                                                  ContBusinessRelation.SETCURRENTKEY("Link to Table","No.");
                                                                  ContBusinessRelation.SETRANGE("Link to Table",ContBusinessRelation."Link to Table"::Customer);
                                                                  ContBusinessRelation.SETRANGE("No.","Bill-to Customer No.");
                                                                  IF ContBusinessRelation.FINDFIRST THEN
                                                                    Cont.SETRANGE("Company No.",ContBusinessRelation."Contact No.");
                                                                END ELSE
                                                                  Cont.SETFILTER("Company No.",'<>''''');

                                                              IF "Bill-to Contact No." <> '' THEN
                                                                IF Cont.GET("Bill-to Contact No.") THEN ;
                                                              IF FORM.RUNMODAL(0,Cont) = ACTION::LookupOK THEN BEGIN
                                                                xRec := Rec;
                                                                VALIDATE("Bill-to Contact No.",Cont."No.");
                                                              END;
                                                            END;

                                                   CaptionML=[CSY=¨°slo kontaktu pl†tce;
                                                              ENU=Bill-to Contact No.] }
    { 5054;   ;Bill-to Customer Template Code;Code10;
                                                   TableRelation="Customer Template";
                                                   OnValidate=VAR
                                                                BillToCustTemplate@1001 : Record 5105;
                                                                TempDocDim@1000 : TEMPORARY Record 357;
                                                              BEGIN
                                                                TESTFIELD("Document Type","Document Type"::Quote);
                                                                TESTFIELD(Status,Status::Open);

                                                                IF NOT InsertMode AND
                                                                  ("Bill-to Customer Template Code" <> xRec."Bill-to Customer Template Code") AND
                                                                  (xRec."Bill-to Customer Template Code" <> '')
                                                                THEN BEGIN
                                                                  IF HideValidationDialog THEN
                                                                    Confirmed := TRUE
                                                                  ELSE
                                                                    Confirmed := CONFIRM(Text004,FALSE,FIELDCAPTION("Bill-to Customer Template Code"));
                                                                  IF Confirmed THEN BEGIN
                                                                    SalesLine.RESET;
                                                                    SalesLine.SETRANGE("Document Type","Document Type");
                                                                    SalesLine.SETRANGE("Document No.","No.");
                                                                    IF "Bill-to Customer Template Code" = '' THEN BEGIN
                                                                      IF SalesLine.FINDFIRST THEN
                                                                        ERROR(Text005,FIELDCAPTION("Bill-to Customer Template Code"));
                                                                      INIT;
                                                                      SalesSetup.GET;
                                                                      InitRecord;
                                                                      "No. Series" := xRec."No. Series";
                                                                      IF xRec."Shipping No." <> '' THEN BEGIN
                                                                        "Shipping No. Series" := xRec."Shipping No. Series";
                                                                        "Shipping No." := xRec."Shipping No.";
                                                                      END;
                                                                      IF xRec."Posting No." <> '' THEN BEGIN
                                                                        "Posting No. Series" := xRec."Posting No. Series";
                                                                        "Posting No." := xRec."Posting No.";
                                                                        //NAV-18944+
                                                                        "Internal document" := xRec."Internal document";
                                                                        //NAV-18944-
                                                                      END;
                                                                      IF xRec."Return Receipt No." <> '' THEN BEGIN
                                                                        "Return Receipt No. Series" := xRec."Return Receipt No. Series";
                                                                        "Return Receipt No." := xRec."Return Receipt No.";
                                                                      END;
                                                                      EXIT;
                                                                    END;
                                                                  END ELSE BEGIN
                                                                    "Bill-to Customer Template Code" := xRec."Bill-to Customer Template Code";
                                                                    EXIT;
                                                                  END;
                                                                END;

                                                                VALIDATE("Ship-to Code",'');
                                                                IF BillToCustTemplate.GET("Bill-to Customer Template Code") THEN BEGIN
                                                                  BillToCustTemplate.TESTFIELD("Customer Posting Group");
                                                                  "Customer Posting Group" := BillToCustTemplate."Customer Posting Group";
                                                                  "Invoice Disc. Code" := BillToCustTemplate."Invoice Disc. Code";
                                                                  "Customer Price Group" := BillToCustTemplate."Customer Price Group";
                                                                  "Customer Disc. Group" := BillToCustTemplate."Customer Disc. Group";
                                                                  "Allow Line Disc." := BillToCustTemplate."Allow Line Disc.";
                                                                  VALIDATE("Payment Terms Code", BillToCustTemplate."Payment Terms Code");
                                                                  VALIDATE("Payment Method Code", BillToCustTemplate."Payment Method Code");
                                                                  "Shipment Method Code" := BillToCustTemplate."Shipment Method Code";
                                                                END;

                                                                TempDocDim.GetDimensions(DATABASE::"Sales Header","Document Type","No.",0,TempDocDim);
                                                                CreateDim(
                                                                  DATABASE::"Customer Template","Bill-to Customer Template Code",
                                                                  DATABASE::"Salesperson/Purchaser","Salesperson Code",
                                                                  DATABASE::Customer,"Bill-to Customer No.",
                                                                  DATABASE::Job,"Job No.",
                                                                  DATABASE::Campaign,"Campaign No.",
                                                                  //Mantis 3688 VP 15.1.2013 DATABASE::Location, "Location Code",  //WG003 VP 9.8.2007
                                                                  DATABASE::"Responsibility Center","Responsibility Center");
                                                                IF SalesLinesExist THEN
                                                                  TempDocDim.UpdateAllLineDim(DATABASE::"Sales Header","Document Type","No.",TempDocDim);

                                                                IF NOT InsertMode AND
                                                                  (xRec."Sell-to Customer Template Code" = "Sell-to Customer Template Code") AND
                                                                  (xRec."Bill-to Customer Template Code" <> "Bill-to Customer Template Code")
                                                                THEN
                                                                  RecreateSalesLines(FIELDCAPTION("Bill-to Customer Template Code"));
                                                              END;

                                                   CaptionML=[CSY=K¢d Áablony pl†tce;
                                                              ENU=Bill-to Customer Template Code] }
    { 5055;   ;Opportunity No.     ;Code20        ;TableRelation=Opportunity.No. WHERE (Contact No.=FIELD(Sell-to Contact No.),
                                                                                        Closed=CONST(No));
                                                   OnValidate=VAR
                                                                Opportunity@1000 : Record 5092;
                                                                SalesHeader@1001 : Record 36;
                                                              BEGIN
                                                                IF xRec."Opportunity No." <> "Opportunity No." THEN BEGIN
                                                                  IF "Opportunity No." <> '' THEN
                                                                    IF Opportunity.GET("Opportunity No.") THEN BEGIN
                                                                      Opportunity.TESTFIELD(Status,Opportunity.Status::"In Progress");
                                                                      IF Opportunity."Sales Document No." <> '' THEN BEGIN
                                                                        IF CONFIRM (Text048,FALSE,Opportunity."Sales Document No.",Opportunity."No.") THEN BEGIN
                                                                          IF SalesHeader.GET("Document Type"::Quote,Opportunity."Sales Document No.") THEN BEGIN
                                                                            SalesHeader."Opportunity No." := '';
                                                                            SalesHeader.MODIFY;
                                                                          END;
                                                                          Opportunity."Sales Document Type" := Opportunity."Sales Document Type"::Quote;
                                                                          Opportunity."Sales Document No." := "No.";
                                                                          Opportunity.MODIFY;
                                                                        END ELSE
                                                                          "Opportunity No." := xRec."Opportunity No.";
                                                                      END ELSE BEGIN
                                                                        Opportunity."Sales Document Type" := Opportunity."Sales Document Type"::Quote;
                                                                        Opportunity."Sales Document No." := "No.";
                                                                        Opportunity.MODIFY;
                                                                      END
                                                                    END;
                                                                  IF xRec."Opportunity No." <> '' THEN
                                                                    IF Opportunity.GET(xRec."Opportunity No.") THEN BEGIN
                                                                      Opportunity."Sales Document No." := '';
                                                                      Opportunity."Sales Document Type" := Opportunity."Sales Document Type"::" ";
                                                                      Opportunity.MODIFY;
                                                                    END;
                                                                END;
                                                              END;

                                                   CaptionML=[CSY=¨°slo p˝°leßitosti;
                                                              ENU=Opportunity No.] }
    { 5700;   ;Responsibility Center;Code10       ;TableRelation="Responsibility Center";
                                                   OnValidate=BEGIN
                                                                TESTFIELD(Status,Status::Open);
                                                                IF NOT UserMgt.CheckRespCenter(0,"Responsibility Center") THEN
                                                                  ERROR (
                                                                    Text027,
                                                                     RespCenter.TABLECAPTION,UserMgt.GetSalesFilter());

                                                                "Location Code" := UserMgt.GetLocation(0,'',"Responsibility Center");
                                                                IF "Location Code" <> '' THEN BEGIN
                                                                  IF Location.GET("Location Code") THEN
                                                                    "Outbound Whse. Handling Time" := Location."Outbound Whse. Handling Time";
                                                                END ELSE BEGIN
                                                                  IF InvtSetup.GET THEN
                                                                    "Outbound Whse. Handling Time" := InvtSetup."Outbound Whse. Handling Time";
                                                                END;

                                                                UpdateShipToAddress;

                                                                CreateDim(
                                                                  DATABASE::"Responsibility Center","Responsibility Center",
                                                                  DATABASE::Customer,"Bill-to Customer No.",
                                                                  DATABASE::Job,"Job No.",
                                                                  DATABASE::"Salesperson/Purchaser","Salesperson Code",
                                                                  DATABASE::Campaign,"Campaign No.",
                                                                  //Mantis 3688 VP 15.1.2013 DATABASE::Location, "Location Code",  //WG003 VP 9.8.2007
                                                                  DATABASE::"Customer Template","Bill-to Customer Template Code");

                                                                IF (xRec."Responsibility Center" <> "Responsibility Center") THEN
                                                                  RecreateSalesLines(FIELDCAPTION("Responsibility Center"));
                                                              END;

                                                   CaptionML=[CSY=Centrum odpovÿdnosti;
                                                              ENU=Responsibility Center] }
    { 5750;   ;Shipping Advice     ;Option        ;OnValidate=BEGIN
                                                                TESTFIELD(Status,Status::Open);
                                                                //EISWZR Start
                                                                // IC¯:WZ.TL BEGIN
                                                                IF "IC Company" <> '' THEN
                                                                  ERROR(Text50010);
                                                                // IC¯:WZ.TL END
                                                                //EISWZR End
                                                                WhseSourceHeader.SalesHeaderVerifyChange(Rec,xRec);
                                                              END;

                                                   CaptionML=[CSY=Doporuüen† dod†vka;
                                                              ENU=Shipping Advice];
                                                   OptionCaptionML=[CSY=¨†steünÿ,Kompletnÿ;
                                                                    ENU=Partial,Complete];
                                                   OptionString=Partial,Complete }
    { 5752;   ;Completely Shipped  ;Boolean       ;FieldClass=FlowField;
                                                   CalcFormula=Min("Sales Line"."Completely Shipped" WHERE (Document Type=FIELD(Document Type),
                                                                                                            Document No.=FIELD(No.),
                                                                                                            Type=FILTER(<>' '),
                                                                                                            Location Code=FIELD(Location Filter)));
                                                   CaptionML=[CSY=VÁe dod†no;
                                                              ENU=Completely Shipped];
                                                   Editable=No }
    { 5753;   ;Posting from Whse. Ref.;Integer    ;CaptionML=[CSY=Odkaz £ütov†n° ze skladu;
                                                              ENU=Posting from Whse. Ref.] }
    { 5754;   ;Location Filter     ;Code10        ;FieldClass=FlowFilter;
                                                   TableRelation=Location;
                                                   CaptionML=[CSY=Filtr lokace;
                                                              ENU=Location Filter] }
    { 5790;   ;Requested Delivery Date;Date       ;OnValidate=BEGIN
                                                                TESTFIELD(Status,Status::Open);
                                                                IF "Promised Delivery Date" <> 0D THEN
                                                                  ERROR(
                                                                    Text028,
                                                                    FIELDCAPTION("Requested Delivery Date"),
                                                                    FIELDCAPTION("Promised Delivery Date"));

                                                                IF "Requested Delivery Date" <> xRec."Requested Delivery Date" THEN
                                                                  UpdateSalesLines(FIELDCAPTION("Requested Delivery Date"),CurrFieldNo<>0);

                                                                //START WG034 - PV - 28.12.2007 - fill Requested deliv. date
                                                                "Latest Shipping Date" := "Requested Delivery Date";
                                                                VALIDATE("Shipment Date", "Requested Delivery Date");
                                                                VALIDATE("Posting Date", "Requested Delivery Date");
                                                                //STOP WG034 - PV - 28.12.2007 - fill Requested deliv. date
                                                              END;

                                                   CaptionML=[CSY=PoßadovanÇ datum dod†vky;
                                                              ENU=Requested Delivery Date] }
    { 5791;   ;Promised Delivery Date;Date        ;OnValidate=BEGIN
                                                                TESTFIELD(Status,Status::Open);
                                                                IF "Promised Delivery Date" <> xRec."Promised Delivery Date" THEN
                                                                  UpdateSalesLines(FIELDCAPTION("Promised Delivery Date"),CurrFieldNo<>0);
                                                              END;

                                                   CaptionML=[CSY=P˝isl°benÇ datum dod†vky;
                                                              ENU=Promised Delivery Date] }
    { 5792;   ;Shipping Time       ;DateFormula   ;OnValidate=BEGIN
                                                                TESTFIELD(Status,Status::Open);
                                                                IF "Shipping Time" <> xRec."Shipping Time" THEN
                                                                  UpdateSalesLines(FIELDCAPTION("Shipping Time"),CurrFieldNo<>0);
                                                              END;

                                                   CaptionML=[CSY=Doba dod†vky;
                                                              ENU=Shipping Time] }
    { 5793;   ;Outbound Whse. Handling Time;DateFormula;
                                                   OnValidate=BEGIN
                                                                TESTFIELD(Status,Status::Open);
                                                                IF ("Outbound Whse. Handling Time" <> xRec."Outbound Whse. Handling Time") AND
                                                                  (xRec."Sell-to Customer No." = "Sell-to Customer No.")
                                                                THEN
                                                                  UpdateSalesLines(FIELDCAPTION("Outbound Whse. Handling Time"),CurrFieldNo<>0);
                                                              END;

                                                   CaptionML=[CSY=Doba vyskladnÿn°;
                                                              ENU=Outbound Whse. Handling Time] }
    { 5794;   ;Shipping Agent Service Code;Code10 ;TableRelation="Shipping Agent Services".Code WHERE (Shipping Agent Code=FIELD(Shipping Agent Code));
                                                   OnValidate=BEGIN
                                                                TESTFIELD(Status,Status::Open);
                                                                GetShippingTime(FIELDNO("Shipping Agent Service Code"));
                                                                UpdateSalesLines(FIELDCAPTION("Shipping Agent Service Code"),CurrFieldNo<>0);
                                                              END;

                                                   CaptionML=[CSY=K¢d slußby p˝epravce;
                                                              ENU=Shipping Agent Service Code] }
    { 5795;   ;Late Order Shipping ;Boolean       ;FieldClass=FlowField;
                                                   CalcFormula=Exist("Sales Line" WHERE (Document Type=FIELD(Document Type),
                                                                                         Sell-to Customer No.=FIELD(Sell-to Customer No.),
                                                                                         Document No.=FIELD(No.),
                                                                                         Shipment Date=FIELD(Date Filter),
                                                                                         Outstanding Quantity=FILTER(<>0)));
                                                   CaptionML=[CSY=Pozdn° dod†vka objedn†vky;
                                                              ENU=Late Order Shipping];
                                                   Editable=No }
    { 5796;   ;Date Filter         ;Date          ;FieldClass=FlowFilter;
                                                   CaptionML=[CSY=Filtr data;
                                                              ENU=Date Filter] }
    { 5800;   ;Receive             ;Boolean       ;CaptionML=[CSY=K p˝°jmu;
                                                              ENU=Receive] }
    { 5801;   ;Return Receipt No.  ;Code20        ;CaptionML=[CSY=¨°slo p˝°jemky vratky;
                                                              ENU=Return Receipt No.] }
    { 5802;   ;Return Receipt No. Series;Code10   ;TableRelation="No. Series";
                                                   OnValidate=BEGIN
                                                                IF "Return Receipt No. Series" <> '' THEN BEGIN
                                                                  SalesSetup.GET;
                                                                  SalesSetup.TESTFIELD("Posted Return Receipt Nos.");
                                                                  NoSeriesMgt.TestSeries(SalesSetup."Posted Return Receipt Nos.","Return Receipt No. Series");
                                                                END;
                                                                TESTFIELD("Return Receipt No.",'');
                                                              END;

                                                   OnLookup=BEGIN
                                                              WITH SalesHeader DO BEGIN
                                                                SalesHeader := Rec;
                                                                SalesSetup.GET;
                                                                SalesSetup.TESTFIELD("Posted Return Receipt Nos.");
                                                                IF NoSeriesMgt.LookupSeries(SalesSetup."Posted Return Receipt Nos.","Return Receipt No. Series") THEN
                                                                  VALIDATE("Return Receipt No. Series");
                                                                Rec := SalesHeader;
                                                              END;
                                                            END;

                                                   CaptionML=[CSY=¨°seln† ˝ada p˝°jemky vratky;
                                                              ENU=Return Receipt No. Series] }
    { 5803;   ;Last Return Receipt No.;Code20     ;TableRelation="Return Receipt Header";
                                                   CaptionML=[CSY=¨°slo posledn° p˝°jemky vratky;
                                                              ENU=Last Return Receipt No.];
                                                   Editable=No }
    { 5900;   ;Service Mgt. Document;Boolean      ;CaptionML=[CSY=Doklad spr†vce servisu;
                                                              ENU=Service Mgt. Document] }
    { 6201;   ;Expiration Date     ;Date          ;CaptionML=[CSY=Datum expirace;
                                                              ENU=Expiration Date] }
    { 6202;   ;CP Status           ;Option        ;CaptionML=[CSY=CP stav;
                                                              ENU=CP Status];
                                                   OptionCaptionML=[CSY=" ,Poßadov†no z†kazn°kem,P˝ijato z†kazn°kem,Odm°tnuto";
                                                                    ENU=" ,Requested by Customer,Accepted by Customer,Rejected"];
                                                   OptionString=[ ,Requested by Customer,Accepted by Customer,Rejected];
                                                   Editable=No }
    { 6203;   ;Auto Created        ;Boolean       ;CaptionML=[CSY=Automat.vytvo˝enÇ;
                                                              ENU=Auto Created];
                                                   Editable=No }
    { 6210;   ;Login ID            ;Code30        ;TableRelation="Commerce Portal Login";
                                                   CaptionML=[CSY=ID p˝ihl†Áen°;
                                                              ENU=Login ID];
                                                   Editable=No }
    { 6211;   ;Web Site Code       ;Code20        ;TableRelation="Web Site";
                                                   CaptionML=[CSY=K¢d webovÇho serveru;
                                                              ENU=Web Site Code] }
    { 7001;   ;Allow Line Disc.    ;Boolean       ;OnValidate=BEGIN
                                                                TESTFIELD(Status,Status::Open);
                                                                MessageIfSalesLinesExist(FIELDCAPTION("Allow Line Disc."));
                                                              END;

                                                   CaptionML=[CSY=Povolit ˝†dkovou slevu;
                                                              ENU=Allow Line Disc.] }
    { 7200;   ;Get Shipment Used   ;Boolean       ;CaptionML=[CSY=Z°skat poußitou dod†vku;
                                                              ENU=Get Shipment Used];
                                                   Editable=No }
    { 11700;  ;Registration No.    ;Text20        ;CaptionML=[CSY=I¨O;
                                                              ENU=Registration No.] }
    { 11750;  ;Advance Order No.   ;Code20        ;TableRelation="Sales Header".No. WHERE (Document Type=CONST(Order),
                                                                                           Bill-to Customer No.=FIELD(Bill-to Customer No.));
                                                   CaptionML=[CSY=¨°slo objedn†vky z†lohy;
                                                              ENU=Advance Order No.] }
    { 11751;  ;Advance Payments    ;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=-Sum("Detailed Cust. Ledg. Entry".Amount WHERE (Document Type=CONST(Advance),
                                                                                                               Advance Ref. No.=FIELD(No.)));
                                                   CaptionML=[CSY=Z†lohovÇ platby;
                                                              ENU=Advance Payments];
                                                   Editable=No }
    { 50030;  ;FF-Code AkzeptanzTS ;Code10        ;CaptionML=CSY=K¢d akceptovanÇ ¨S;
                                                   Description=Q1 }
    { 55010;  ;VAT Taxation Date   ;Date          ;OnValidate=VAR
                                                                locText55001@1000000000 : TextConst 'CSY=nen° v rozmez° V†m povolenÏch datumÖ £ütov†n° DPH;ENU=is not within your range of allowed VAT Taxation Dates';
                                                                lrecSalesLine@1220000 : Record 37;
                                                                lrecSell@1220001 : Record 18;
                                                                lrecBill@1220002 : Record 18;
                                                                "--OUD--"@1220003 : Boolean;
                                                                VATBusGroup_L@1220004 : Code[20];
                                                              BEGIN
                                                                // START CDLEU - 3.4.2005 - ZJ: modification for European Union
                                                                // - check if VAT Taxation Date is allowed
                                                                //START WG154 Mantis 6625 VP 9.12.2013
                                                                //IF cuGenJnlCheckLine.VATDateNotAllowed("VAT Taxation Date")
                                                                IF cuGenJnlCheckLine.VATDateNotAllowed("VAT Taxation Date", "VAT Settlement Country Code")
                                                                //STOP WG154 Mantis 6625 VP 9.12.2013
                                                                   THEN FIELDERROR("VAT Taxation Date",locText55001);
                                                                // STOP CDLEU - 3.4.2005 - ZJ: modification for European Union

                                                                //START WG033 - 27.11.2007 - PV - Due date calculation accoring to Business Area
                                                                VALIDATE("Payment Terms Code");
                                                                //STOP WG033 - 27.11.2007 - PV - Due date calculation accoring to Business Area

                                                                //START - WG - 07.06.2012 - RCH - M3959 - Customer Adress History
                                                                IF lrecSell.GET("Sell-to Customer No.") THEN BEGIN
                                                                   SellToAdressH(lrecSell,"VAT Taxation Date");
                                                                   END;
                                                                IF lrecBill.GET("Bill-to Customer No.") THEN BEGIN
                                                                   BillToAdressH(lrecBill,"VAT Taxation Date");
                                                                   END;
                                                                //!!!SetVATNoAndVATPg; //Nelze mÏta...
                                                                //STOP - WG - 07.06.2012 - RCH - M3959 - Customer Adress History

                                                                //START CDLOUD - 19.11.2015 - DuLo - Special tax arrangement - SK 2016
                                                                IF "VAT Taxation Date" <> xRec."VAT Taxation Date" THEN BEGIN
                                                                  VATBusGroup_L := '';
                                                                  SalesSetup.GET;
                                                                  IF SalesSetup."Special Tax Arrangement" AND
                                                                     (SalesSetup."OUD Valid From Date" <> 0D) AND
                                                                     ("VAT Taxation Date" <> 0D) AND
                                                                     ("VAT Taxation Date" >= SalesSetup."OUD Valid From Date") AND
                                                                     (((SalesSetup."OUD Valid To Date" <> 0D) AND ("VAT Taxation Date" <= SalesSetup."OUD Valid To Date")) OR
                                                                      (SalesSetup."OUD Valid To Date" = 0D))
                                                                  THEN BEGIN
                                                                    IF "Sell-to Customer No." <> '' THEN BEGIN
                                                                        Cust.GET("Sell-to Customer No.");
                                                                      GLSetup.GET;
                                                                      IF ("Bill-to Customer No." <> '') AND
                                                                         ("Bill-to Customer No." <> "Sell-to Customer No.") AND
                                                                         (GLSetup."Bill-to/Sell-to VAT Calc." = GLSetup."Bill-to/Sell-to VAT Calc."::"Bill-to/Pay-to No.")
                                                                      THEN
                                                                        Cust.GET("Bill-to Customer No.");
                                                                      VATBusPostGroup.GET(Cust."VAT Bus. Posting Group");
                                                                      VATBusPostGroup.TESTFIELD("OUD VAT Bus. Posting Group");
                                                                      VATBusGroup_L := VATBusPostGroup."OUD VAT Bus. Posting Group";
                                                                    END;
                                                                  //START - WG - 14.04.2016 - MP - NAV-15949
                                                                  END;
                                                                  //END ELSE BEGIN
                                                                  //  IF "Sell-to Customer No." <> '' THEN BEGIN
                                                                  //      Cust.GET("Sell-to Customer No.");
                                                                  //    GLSetup.GET;
                                                                  //    IF ("Bill-to Customer No." <> '') AND
                                                                  //       ("Bill-to Customer No." <> "Sell-to Customer No.") AND
                                                                  //       (GLSetup."Bill-to/Sell-to VAT Calc." = GLSetup."Bill-to/Sell-to VAT Calc."::"Bill-to/Pay-to No.")
                                                                  //    THEN
                                                                  //      Cust.GET("Bill-to Customer No.");
                                                                  //    VATBusGroup_L := Cust."VAT Bus. Posting Group";
                                                                  //  END;
                                                                  //END;
                                                                  //STOP - WG - 14.04.2016 - MP - NAV-15949
                                                                  IF (VATBusGroup_L <> '') AND (VATBusGroup_L <> "VAT Bus. Posting Group") THEN
                                                                    VALIDATE("VAT Bus. Posting Group", VATBusGroup_L);
                                                                END;
                                                                //STOP CDLOUD - 19.11.2015 - DuLo - Special tax arrangement - SK 2016

                                                                //START WAG - 01.09.2014 - JV - J10015
                                                                GetSalesHeaderEXT;
                                                                IF SalesHeaderEXT."VAT Currency Code" <> '' THEN BEGIN
                                                                  IF "VAT Taxation Date" <> xRec."VAT Taxation Date" THEN BEGIN
                                                                    ConfirmUpdateVATCurrencyFactor
                                                                  //START - WG - 14.08.2015 - MP - NAV-13613
                                                                  //END;
                                                                  END ELSE BEGIN
                                                                    IF SalesHeaderEXT."VAT Currency Factor" <> GetVATCurrencyFactor() THEN BEGIN
                                                                      ConfirmUpdateVATCurrencyFactor()
                                                                    END;
                                                                  END;
                                                                  //STOP - WG - 14.08.2015 - MP - NAV-13613
                                                                END;
                                                                //STOP WAG - 01.09.2014 - JV - J10015
                                                              END;

                                                   CaptionML=[CSY=Datum povinnosti p˝iznat daÂ;
                                                              ENU=VAT Taxation Date];
                                                   Description=CDLEU }
    { 55015;  ;External Credit Memo;Boolean       ;OnValidate=BEGIN

                                                                IF NOT ("Document Type" IN  ["Document Type"::"Credit Memo", "Document Type"::"Return Order"]) THEN
                                                                  FIELDERROR("Document Type");

                                                                TESTFIELD(Status,Status::Open);

                                                                IF "External Credit Memo" <> xRec."External Credit Memo" THEN
                                                                  MODIFY;
                                                                IF SalesLinesExist THEN BEGIN
                                                                  REPEAT
                                                                    IF SalesLine."VAT Prod. Posting Group" <> '' THEN BEGIN
                                                                      SalesLine.VALIDATE("VAT Prod. Posting Group");
                                                                      SalesLine.MODIFY;
                                                                    END;
                                                                  UNTIL SalesLine.NEXT = 0;
                                                                END;
                                                              END;

                                                   CaptionML=[CSY=Extern° dobropis;
                                                              ENU=External Credit Memo;
                                                              SKY=ExternÏ dobropis];
                                                   Description=WG136 }
    { 60000;No;Abrechnungsland     ;Text30        ;CaptionML=CSY=Zemÿ vy£ütov†n°;
                                                   Description=M5409 - Disabled }
    { 60001;No;Land                ;Code20        ;TableRelation=Country;
                                                   CaptionML=CSY=Zemÿ;
                                                   Description=M5409 - Disabled }
    { 60003;No;UST-Id fur Rev.Charge;Text30       ;CaptionML=CSY="DI¨ ";
                                                   Description=M5409 - Disabled }
    { 60017;  ;Transaktionen nicht zurucks.;Boolean;
                                                   CaptionML=CSY=Bez spÿtnÇ transakc° }
    { 60100;  ;Ship-to District    ;Text50        ;CaptionML=ENU=Ship-to District }
    { 60103;  ;Tank-Truck Invoicing Type;Option   ;OnValidate=BEGIN
                                                                // *** START Index VB¯1 ---------
                                                                IF "Tank-Truck Invoicing Type" = "Tank-Truck Invoicing Type"::Shipment THEN
                                                                  "Invoice Mailing" := TRUE
                                                                ELSE
                                                                  "Invoice Mailing" := FALSE;
                                                                // *** ENDE Index VB¯1 ---------
                                                              END;

                                                   OptionCaptionML=ENU=Shipment,Invoice TT,Cash Sale;
                                                   OptionString=Shipment,Invoice TT,Cash Sale;
                                                   Description=VB¯1 }
    { 60104;  ;Invoice Mailing     ;Boolean       ;Description=VB¯1 }
    { 60105;  ;SARE-KZ             ;Option        ;CaptionML=ENU=Collective Invoice Indicator;
                                                   OptionCaptionML=ENU=S-Single invoice,D-CI per Delivery Address,I-CI per Invoice Address;
                                                   OptionString=E,L,R;
                                                   Description=SR¯5 }
    { 60106;  ;Schlussel SARY      ;Option        ;CaptionML=ENU=Key SARY;
                                                   OptionCaptionML=ENU=" ,one Invoice per delivery day,one Invoice for all delivery days";
                                                   OptionString=[ ,0,1];
                                                   Description=SR¯5 }
    { 60200;  ;Geschaftsbereich    ;Code10        ;TableRelation=Geschaftsbereich;
                                                   OnValidate=BEGIN
                                                                // - TESSOL1.00:BG¯1 --- start
                                                                UpdateSalesLines(FIELDCAPTION(Geschaftsbereich), FALSE);
                                                                // - TESSOL1.00:BG¯1 --- Ende
                                                              END;

                                                   CaptionML=CSY=Obchodn° oblast;
                                                   Description=GB¯1 }
    { 60201;  ;GeschBer_Auftragstyp;Option        ;CaptionML=CSY=Obchodn° oblast_Typ objedn†vky;
                                                   OptionCaptionML=CSY=" ,TopnÏ olej,Maziva,PohonÇ hmoty,,Plat. karta,,,Tankovac° karta,MÏto";
                                                   OptionString=[ ,Heizîl,Schmierstoff,Kraftstoff,,Flottenkarte,,,Tankkarte,Maut] }
    { 60300;  ;EiKpreiskalk. Preisformel;Boolean  ;CaptionML=CSY=EiK vÏpoüet ceny (Cen. form.) }
    { 60400;  ;Monatsendrechnung   ;Boolean       ;CaptionML=CSY=Mÿs°ün° vy£ütov†n°;
                                                   Description=haube, Kontingentregulierung;
                                                   Editable=No }
    { 60401;No;Land Ruckvergutung  ;Code20        ;CaptionML=CSY=Zemÿ zpÿtn† n†hrada }
    { 60402;No;Mauttyp             ;Option        ;CaptionML=CSY=Typ mÏta;
                                                   OptionCaptionML=CSY=" ,Tranakün° mÏto,MÏto p˝°mÇ";
                                                   OptionString=[ ,Transaktionsmaut,Maut DE] }
    { 60600;No;Fax versendet       ;Boolean       ;CaptionML=CSY=Fax odeslal }
    { 60601;No;Mail versendet      ;Boolean       ;CaptionML=CSY=Mail odeslal }
    { 60602;  ;assigned to delivery note;Boolean  ;CaptionML=[DEU=zu Lieferschein zugeordnet;
                                                              ENU=assigned to delivery note] }
    { 61201;  ;Internal document   ;Boolean       ;CaptionML=[CSY=Intern° doklad;
                                                              ENU=Internal document];
                                                   Description=NAV-16164 }
    { 70000;  ;Amortisationszuschlag berechn.;Boolean;
                                                   OnValidate=BEGIN
                                                                // 09.08.07   wz.ub
                                                                IF NOT "Amortisationszuschlag berechn." THEN
                                                                  "Satz fur Amortisation" := 0
                                                                ELSE BEGIN
                                                                  IF  Cust.GET("Sell-to Customer No.") THEN
                                                                    IF Cust."Amortisationszuschlag berechn." THEN BEGIN
                                                                      "Satz fur Amortisation" := Cust."Satz fur Amortisation";
                                                                      "Amortisationszuschlag berechn." := TRUE
                                                                    END ELSE
                                                                      "Amortisationszuschlag berechn." := FALSE;
                                                                END;
                                                                // 09.08.07   wz.ub
                                                              END;

                                                   CaptionML=CSY=Vy£ütov†n° amortizace;
                                                   Description=Tessol }
    { 70001;  ;Satz fur Amortisation;Decimal      ;CaptionML=CSY=Vÿc pro amortizaci;
                                                   Description=Tessol }
    { 70955;  ;Printing Method     ;Option        ;CaptionML=[CSY=ZpÖsob tisku;
                                                              ENU=Printing Method];
                                                   OptionCaptionML=[CSY=" ,Norm†ln°,Jednotlivÿ,P˝eskoüit";
                                                                    ENU=" ,Normal,Separate,Skip"];
                                                   OptionString=[ ,Normal,Separate,Skip];
                                                   Description=DPS }
    { 76000;  ;NAV2016 Assignment  ;Boolean       ;FieldClass=FlowField;
                                                   CalcFormula=Lookup("Sales Header EXT"."NAV2016 Assignment" WHERE (Document Type=FIELD(Document Type),
                                                                                                                     No.=FIELD(No.)));
                                                   OnValidate=VAR
                                                                CompanyInformationL@1220000 : Record 79;
                                                              BEGIN
                                                              END;

                                                   CaptionML=[CSY=Postoupen° do NAV2016;
                                                              ENU=NAV2016 Assignment];
                                                   Description=NAV2016;
                                                   Editable=No }
    { 77700;  ;Unreliable Taxpayer ;Option        ;FieldClass=FlowField;
                                                   CalcFormula=Lookup(Customer."Unreliable Taxpayer" WHERE (No.=FIELD(Bill-to Customer No.)));
                                                   CaptionML=[CSY=NespolehlivÏ pl†tce;
                                                              ENU=Unreliable Taxpayer];
                                                   OptionCaptionML=[CSY=" ,Ano,Ne,Nenalezen";
                                                                    ENU=" ,Yes,No,Not Found"];
                                                   OptionString=[ ,Yes,No,Not Found];
                                                   Description=CDLUT;
                                                   Editable=No }
    { 77701;  ;Unreliability Publication Date;Date;FieldClass=FlowField;
                                                   CalcFormula=Lookup(Customer."Unreliability Publication Date" WHERE (No.=FIELD(Bill-to Customer No.)));
                                                   CaptionML=[CSY=Datum zve˝ejnÿn° nespolehlivosti;
                                                              ENU=Unreliability Publication Date];
                                                   Description=CDLUT;
                                                   Editable=No }
    { 77705;  ;Last Update Date and Time;DateTime ;FieldClass=FlowField;
                                                   CalcFormula=Lookup(Customer."Last Update Date and Time" WHERE (No.=FIELD(Bill-to Customer No.)));
                                                   CaptionML=[CSY=Datum a üas posledn° aktualizace;
                                                              ENU=Last Update Date and Time];
                                                   Description=CDLUT;
                                                   Editable=No }
    { 77706;  ;Published Account   ;Boolean       ;FieldClass=FlowField;
                                                   CalcFormula=Lookup("Customer Bank Account"."Published Account" WHERE (Customer No.=FIELD(Sell-to Customer No.),
                                                                                                                         Code=FIELD(Cust. Bank Acc. Code)));
                                                   CaptionML=[CSY=Zve˝ejnÿnÏ £üet;
                                                              ENU=Published Account];
                                                   Description=CDLUT;
                                                   Editable=No }
    { 80000;  ;VAT Reg. No. SK     ;Text20        ;CaptionML=[CSY=DI¨ SK;
                                                              ENU=VAT Reg. No. SK];
                                                   Description=CDLS1 }
    { 82001;  ;VAT Control Statement Date;Date    ;CaptionML=[CSY=Datum hl†Áen° DPH;
                                                              ENU=VAT Control Statement Date];
                                                   Description=KH7 }
    { 82002;  ;Tax Doc. Registration No.;Text20   ;OnValidate=BEGIN

                                                                //START CDLKH7 - 01.10.2015 - PU - VAT Control Statement
                                                                VALIDATE("External Document No.",VATControlStatMgtCU.TaxRegNoEvaluation("Tax Doc. Registration No."));
                                                                //STOP CDLKH7 - 01.10.2015 - PU - VAT Control Statement
                                                              END;

                                                   CaptionML=[CSY=Ev. ü°slo daÂovÇho dokladu;
                                                              ENU=Tax Doc. Registration No.;
                                                              SKY=Ev. ü°slo daÂovÇho dokladu];
                                                   Description=KH7 }
    { 84400;  ;Internal Due Date   ;Date          ;CaptionML=[CSY=Datum splatnosti intern°;
                                                              ENU=Internal Due Date];
                                                   Description=WG004 }
    { 84401;  ;Purch. Ord. Prod. Comment;Boolean  ;FieldClass=FlowField;
                                                   CalcFormula=Exist("Purch. Order Comment" WHERE (Type=CONST(Product),
                                                                                                   Sales Header Doc. Type=FIELD(Document Type),
                                                                                                   Sales Header No.=FIELD(No.)));
                                                   CaptionML=[CSY=Pozn†mka u n†k. obj. - dodavatel;
                                                              ENU=Purch. Ord. Prod. Comment];
                                                   Description=WG034;
                                                   Editable=No }
    { 84402;  ;Purch. Ord. Transp. Comment;Boolean;FieldClass=FlowField;
                                                   CalcFormula=Exist("Purch. Order Comment" WHERE (Type=CONST(Transport),
                                                                                                   Sales Header Doc. Type=FIELD(Document Type),
                                                                                                   Sales Header No.=FIELD(No.)));
                                                   CaptionML=[CSY=Pozn†mka u n†k. obj. - p˝epravce;
                                                              ENU=Purch. Ord. Prod. Comment];
                                                   Description=WG034;
                                                   Editable=No }
    { 84403;  ;Quantity Total      ;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Sales Line"."Quantity (Base)" WHERE (Document Type=FIELD(Document Type),
                                                                                                         Document No.=FIELD(No.),
                                                                                                         Type=CONST(Item)));
                                                   CaptionML=[CSY=Mnoßstv° celkem;
                                                              ENU=Quantity Total];
                                                   Description=WG;
                                                   Editable=No }
    { 84416;  ;VAT Settlement Country Code;Code10 ;TableRelation=Country;
                                                   OnValidate=VAR
                                                                locBussUnit@1220000 : Record 220;
                                                                "---WG---"@1220001 : Integer;
                                                                locText55001@1220002 : TextConst 'CSY=nen° v rozmez° V†m povolenÏch datumÖ £ütov†n° DPH;ENU=is not within your range of allowed VAT Taxation Dates';
                                                                lrecCountry@1220003 : Record 9;
                                                                lrecCustomer@1220004 : Record 18;
                                                                lrecCustVATRegNo@1220005 : Record 84437;
                                                                locCustHaveVATRegNo@1220006 : Boolean;
                                                              BEGIN
                                                                SetVATNoAndVATPg;

                                                                //START WG140 KH 260612
                                                                VALIDATE("Business Unit Code", locBussUnit.GetBusinessUnit("VAT Settlement Country Code"));
                                                                //STOP WG140 KH 260612

                                                                //START - WG - 10.01.2013 - MP - bilingual documents
                                                                UpdateLineTranslations();
                                                                //STOP - WG - 10.01.2013 - MP - bilingual documents

                                                                //START WG154 Mantis 6625 VP 9.12.2013
                                                                IF cuGenJnlCheckLine.VATDateNotAllowed("VAT Taxation Date", "VAT Settlement Country Code")
                                                                   THEN FIELDERROR("VAT Taxation Date",locText55001);
                                                                //STOP WG154 Mantis 6625 VP 9.12.2013

                                                                //START - WG - 27.01.2016 - MP - NAV-16210
                                                                // === orig code ===
                                                                ////START - WG - 28.05.2014 - RCH - M5183
                                                                ////-- pouze ruünÿ nebo TASK
                                                                //locCustHaveVATRegNo := FALSE;
                                                                //IF Geschaftsbereich = '' THEN BEGIN
                                                                //  lrecCountry.RESET;
                                                                //  lrecCountry.SETRANGE(Code,"VAT Settlement Country Code");
                                                                //  lrecCountry.SETFILTER("VAT Registration No.",'<>%1','');
                                                                //  lrecCountry.SETRANGE("Rev.Char. neuplatneno",FALSE);
                                                                //  lrecCountry.SETFILTER("Reverse Charge from",'<=%1',"VAT Taxation Date");
                                                                //  lrecCountry.SETFILTER("Reverse Charge to",'>=%1|%2',"VAT Taxation Date",0D);
                                                                //  IF lrecCountry.FINDFIRST THEN BEGIN
                                                                //    //-- DIC na z†kazn°kovi
                                                                //    IF lrecCustomer.GET("Bill-to Customer No.") THEN BEGIN
                                                                //      IF lrecCustomer."Country Code" = "VAT Settlement Country Code" THEN BEGIN
                                                                //        IF lrecCustomer."VAT Registration No." <> '' THEN
                                                                //          locCustHaveVATRegNo := TRUE;
                                                                //      END;
                                                                //    END;
                                                                //    //-- DIC v tabulce DIC z†kazn°ka
                                                                //    lrecCustVATRegNo.RESET;
                                                                //    lrecCustVATRegNo.SETRANGE("Customer No.",lrecCustomer."No.");
                                                                //    lrecCustVATRegNo.SETRANGE("VAT Reg. Country Code","VAT Settlement Country Code");
                                                                //    lrecCustVATRegNo.SETFILTER("Valid From",'<=%1',"VAT Taxation Date");
                                                                //    lrecCustVATRegNo.SETFILTER("Valid To",'>=%1|%2',"VAT Taxation Date",0D);
                                                                //    IF lrecCustVATRegNo.FINDFIRST THEN BEGIN
                                                                //      IF lrecCustVATRegNo."VAT Registration No." <> '' THEN
                                                                //        locCustHaveVATRegNo := TRUE;
                                                                //    END;
                                                                //    IF locCustHaveVATRegNo THEN BEGIN
                                                                //      lrecCountry.TESTFIELD("VAT EU_REG");
                                                                //      VALIDATE("VAT Bus. Posting Group", lrecCountry."VAT EU_REG");
                                                                //    END;
                                                                //  END;
                                                                //END;
                                                                ////STOP - WG - 28.05.2014 - RCH - M5183

                                                                // === new code ===
                                                                CLEAR(locCustHaveVATRegNo);
                                                                IF Geschaftsbereich = '' THEN BEGIN
                                                                  lrecCountry.RESET;
                                                                  lrecCountry.SETRANGE(Code,"VAT Settlement Country Code");
                                                                  lrecCountry.SETFILTER("VAT Registration No.",'<>%1','');
                                                                  lrecCountry.SETRANGE("Rev.Char. neuplatneno",FALSE);
                                                                  lrecCountry.SETFILTER("Reverse Charge from",'<=%1',"VAT Taxation Date");
                                                                  lrecCountry.SETFILTER("Reverse Charge to",'>=%1|%2',"VAT Taxation Date",0D);
                                                                  IF lrecCountry.FINDFIRST THEN BEGIN
                                                                    IF NOT lrecCustomer.GET("Bill-to Customer No.") THEN
                                                                      lrecCustomer.GET("Sell-to Customer No.");

                                                                    // === CS translation: pokud je zakaznik neplatce, pak nechavam puvodni ucto skupinu ===
                                                                    IF NOT lrecCustomer."Not VAT Payer" THEN BEGIN
                                                                      IF (lrecCustomer."Country Code" = "VAT Settlement Country Code") OR
                                                                         ((lrecCustomer."Country Code" <> "VAT Settlement Country Code") AND
                                                                          (NOT lrecCountry."Stop Rev.Chrg. For UnResident"))THEN BEGIN
                                                                        // === CS translation: prvni podminka vyse, pokud je zakaznik ze zeme plneni DPH, pak se zkontroluje zda ma
                                                                        // registrovane DIC a samozrejme musi byt platce, pokud ano, meni se ucto skupina ===
                                                                        // === CS translation: druha podminka vyse, pokud zakaznik neni ze zeme plneni DPH, pak:
                                                                        // 1) jestlize "zakazat TRCH nerezidenta", pak nemenim ucto skupinu
                                                                        // 2) jestlize povolit TRCH nerezidenta, pak menim ucto skupinu v pripade, ze ma zakaznik registrovane DIC a
                                                                        //    samozrejme musi byt platce, pokud ano, meni se ucto skupina ===
                                                                        IF (lrecCustomer."VAT Registration No." <> '') AND (lrecCustomer."Country Code" = "VAT Settlement Country Code") THEN
                                                                          locCustHaveVATRegNo := TRUE
                                                                        ELSE BEGIN
                                                                          lrecCustVATRegNo.RESET;
                                                                          lrecCustVATRegNo.SETRANGE("Customer No.",lrecCustomer."No.");
                                                                          lrecCustVATRegNo.SETRANGE("VAT Reg. Country Code", "VAT Settlement Country Code");
                                                                          lrecCustVATRegNo.SETFILTER("Valid From",'<=%1', "VAT Taxation Date");
                                                                          lrecCustVATRegNo.SETFILTER("Valid To",'>=%1|%2', "VAT Taxation Date", 0D);
                                                                          IF lrecCustVATRegNo.FINDFIRST THEN
                                                                            IF lrecCustVATRegNo."VAT Registration No." <> '' THEN
                                                                              locCustHaveVATRegNo := TRUE;
                                                                        END;
                                                                      END;
                                                                    END;
                                                                    IF locCustHaveVATRegNo THEN BEGIN
                                                                      lrecCountry.TESTFIELD("VAT EU_REG");
                                                                      VALIDATE("VAT Bus. Posting Group", lrecCountry."VAT EU_REG");
                                                                    END;
                                                                  END;
                                                                END;
                                                                //STOP - WG - 27.01.2016 - MP - NAV-16210

                                                                //START WAG - 01.09.2014 - JV - J10015
                                                                IF "VAT Settlement Country Code" <> xRec."VAT Settlement Country Code" THEN BEGIN
                                                                  VATCurrCodeOnValidate(VATCurrMgt.GetVATCurrencyCode("VAT Settlement Country Code"));
                                                                  UpdateVATCurrencyFactor;
                                                                END;
                                                                //STOP WAG - 01.09.2014 - JV - J10015
                                                              END;

                                                   CaptionML=[CSY=K¢d zemÿ plnÿn° DPH;
                                                              ENU=VAT Settlement Country Code];
                                                   Description=WG021 }
    { 84418;  ;Predref Date        ;Date           }
    { 84419;  ;Correspondence Type ;Option        ;CaptionML=[CSY=Typ korespondence;
                                                              ENU=Correspondence Type];
                                                   OptionCaptionML=[CSY=" ,VÏtisk,E-mail,Fax,,,,,,,SMS";
                                                                    ENU=" ,Hard Copy,E-Mail,Fax,,,,,,,SMS"];
                                                   OptionString=[ ,Hard Copy,E-Mail,Fax,,,,,,,SMS];
                                                   Description=WG034 }
    { 84420;  ;Sended by email(fax)-counter;Integer;
                                                   CaptionML=CSY=Poüet odesl†n° emailem(faxem);
                                                   Description=WG034 }
    { 84425;  ;Refund Provision Invoice;Boolean   ;CaptionML=[CSY=Faktura za provizi refundace;
                                                              ENU=Refund Provision Invoice];
                                                   Description=WG047 }
    { 84426;  ;Prerefund Provision Invoice;Boolean;CaptionML=[CSY=Faktura za provizi p˝edrefundace;
                                                              ENU=Prerefund Provision Invoice];
                                                   Description=WG047 }
    { 84427;  ;Minimum Preref.Amt Invoice;Boolean ;CaptionML=[CSY=Faktura za min. provizi p˝edrefundace;
                                                              ENU=Minimum Prerefund Amount Invoice];
                                                   Description=WG047 }
    { 84428;  ;Dont send electronically;Boolean   ;CaptionML=[CSY=Neodes°lat elektronicky;
                                                              ENU=Dont send electronically];
                                                   Description=WG071 }
    { 84430;  ;Allow Zero-Amount Posting;Boolean  ;CaptionML=[CSY=Povolit £üto.nulovÇ hodnoty;
                                                              ENU=Allow Zero-Amount Posting];
                                                   Description=AC }
    { 84431;  ;Refund Request No.  ;Code30        ;Description=WG047 }
    { 84432;  ;Prerefund Bonus Invoice No.;Code20 ;TableRelation="Sales Invoice Header";
                                                   CaptionML=[CSY=¨°slo provizn° faktury za p˝edrefundaci;
                                                              ENU=Prerefund Bonus Invoice No.];
                                                   Description=WG047 }
    { 84433;  ;Cancel Req. Refund  ;Boolean       ;CaptionML=[CSY=Storno refundace;
                                                              ENU=Cancel Request Refund];
                                                   Description=WG047;
                                                   Editable=No }
    { 84435;  ;NI Credit Memo      ;Boolean       ;CaptionML=[CSY=NI p˝edrefund. dobropis;
                                                              ENU=NI Credit Memo];
                                                   Description=WG133 }
    { 84436;  ;Customer NI         ;Boolean       ;Description=WG133 }
    { 84437;  ;Send immediately    ;Boolean       ;CaptionML=[CSY=Odeslat ihned;
                                                              ENU=Send immediately];
                                                   Description=WG071 }
    { 84452;  ;Company VAT Registration No.;Text20;CaptionML=[CSY=DI¨ spoleünosti;
                                                              ENU=Company VAT Registration No.];
                                                   Description=WG021 }
    { 84453;  ;Check Apply Pre-Pay EE;Boolean     ;Description=WG141 }
    { 84490;  ;Payments Invoiced   ;Boolean       ;CaptionML=[CSY=Poplatky vyfakturov†ny;
                                                              ENU=Payments Invoiced];
                                                   Description=WG080 }
    { 84492;  ;Bonus Of Toll Invoiced;Boolean     ;CaptionML=[CSY=MÏtnÇ provize vyfakturov†ny;
                                                              ENU=Bonus Of Toll Invoiced];
                                                   Description=WG112 }
    { 84493;  ;Toll Country Code   ;Code10        ;CaptionML=[CSY=K¢d zemÿ mÏta;
                                                              ENU=Toll Country Code];
                                                   Description=WG112 }
    { 84495;  ;Toll PL EURPLN Rate ;Decimal       ;CaptionML=CSY=MÏto PL EURPLN kurs;
                                                   Description=WG120 }
    { 84496;  ;Amount Below Limit  ;Boolean       ;CaptionML=[CSY=¨†stka pod limit;
                                                              ENU=Amount Below The Limit];
                                                   Description=WG131 }
    { 84497;  ;Reinv. Order Below Limit;Boolean   ;CaptionML=CSY=Objedn†vka p˝efakturace pod limit;
                                                   Description=WG131 }
    { 84500;  ;Doc. No. Returns Deposit OBU;Code20;CaptionML=[CSY=¨°slo dokladu vracen° depozitu OBU;
                                                              ENU=Doc. No. Returns Deposit OBU];
                                                   Description=WG032 }
    { 84501;  ;SklPohTypPlatby     ;Integer       ;Description=WG014 }
    { 84502;  ;CisloZadal          ;Text30        ;Description=WG014 }
    { 84503;  ;KartaStrojCislo     ;Text30        ;Description=WG014 }
    { 84504;  ;SmenaCislo          ;Text30        ;Description=WG014 }
    { 84505;  ;CentrosSklPohDoc    ;Boolean       ;Description=WG014 }
    { 84506;  ;ToDeliveryPosting   ;Boolean       ;Description=WG014 }
    { 84507;  ;ToInvoicePosting    ;Boolean       ;Description=WG014 }
    { 84508;  ;Inv. Period Start Date;Date        ;CaptionML=[CSY=Zaü†tek fakturaünÇho obdob°;
                                                              ENU=Inv. Period Start Date] }
    { 84509;  ;Inv. Period End Date;Date          ;CaptionML=[CSY=Konec fakturaün°ho obdob°;
                                                              ENU=Inv. Period End Date] }
    { 84510;  ;CastkaCelkemBDPH    ;Decimal        }
    { 84511;  ;CastkaCelkemSDPH    ;Decimal        }
    { 84512;  ;DPHZakladSnizena5   ;Decimal        }
    { 84513;  ;DPHCelkemSnizena5   ;Decimal        }
    { 84514;  ;DPHZakladZakladni   ;Decimal        }
    { 84515;  ;DPHZakladSnizena    ;Decimal        }
    { 84516;  ;DPHZakladOsvobozeno ;Decimal        }
    { 84517;  ;DPHCelkemZakladni   ;Decimal        }
    { 84518;  ;DPHCelkemSnizena    ;Decimal        }
    { 84519;  ;Invoicing Period Type;Integer       }
    { 84520;  ;Ako SklPohTyp 2     ;Boolean        }
    { 84550;  ;Bill-to address code;Code10        ;TableRelation="Ship-to Address".Code WHERE (Customer No.=FIELD(Sell-to Customer No.),
                                                                                               Address Type=CONST(Delivery address));
                                                   OnValidate=VAR
                                                                locTbBillToAddress@1220000 : Record 222;
                                                                locTbSalesLine@1220001 : Record 37;
                                                                locText001@1220003 : TextConst 'CSY=Dodac° adresa %1 je spojena s fakturaün° adresou %2. %3 %4 obsahuje ˝†dky, kterÇ maj° dodac° adresu napojenou na jinou faktuaün° adresu.\\Na jednom dokladu nemÖßete pouß°t dodac° adresy s rÖznÏmi fakturaün°mi adresami.;ENU=Ship-to address %1 is connected with Bill-to address %2. %3 %4 has lines with Ship-to address connected to another Bill-to address.\\You can not use Ship-to Addresses with different Bill-to Addresses on the same document.';
                                                                locText002@1220002 : TextConst 'CSY=NemÖßete zadat fakturaün° adresu %1, protoße K¢d p˝°jemce %2 je spojen s fakturaün° adresou %3.\\Na jednom dokladu nelze pouß°t dodac° adresy s rÖznÏmi fakturaün°mi adresami.;ENU=You can not enter Bill-to address %1 because Ship-to address %2 is connected with Bill-to address %3.\\It is not possible to use Ship-to Addresses with different Bill-to Addresses on the same document.';
                                                              BEGIN
                                                                //START WG012 - 27.10.2007 - PV - Relations between Ship-to Addresses
                                                                IF "Bill-to address code" <> xRec."Bill-to address code" THEN BEGIN
                                                                  //test for Ship-to address
                                                                  IF ("Ship-to Code" <> '') AND (xRec."Bill-to address code" <> '') THEN BEGIN
                                                                    locTbBillToAddress.GET("Sell-to Customer No.", "Ship-to Code");
                                                                    IF (CurrFieldNo = FIELDNO("Bill-to address code")) AND (locTbBillToAddress.Code <> "Bill-to address code") THEN
                                                                      ERROR(locText002, "Bill-to address code", "Ship-to Code", locTbBillToAddress."Belongs to Mail address");
                                                                  END;

                                                                  //test for sales lines
                                                                  locTbSalesLine.SETRANGE("Document Type", "Document Type");
                                                                  locTbSalesLine.SETRANGE("Document No.", "No.");
                                                                  locTbSalesLine.SETFILTER("Ship-to Code", '<>%1', '');
                                                                  IF locTbSalesLine.FINDFIRST THEN
                                                                    REPEAT
                                                                     locTbBillToAddress.GET(locTbSalesLine."Sell-to Customer No.", locTbSalesLine."Ship-to Code");
                                                                     IF locTbBillToAddress."Belongs to Mail address" <> "Bill-to address code" THEN
                                                                       ERROR(locText001, "Ship-to Code", "Bill-to address code", "Document Type", "No.");
                                                                    UNTIL locTbSalesLine.NEXT = 0;

                                                                  IF "Bill-to address code" = ''
                                                                    THEN VALIDATE("Bill-to Customer No.")
                                                                    ELSE BEGIN
                                                                     locTbBillToAddress.GET("Sell-to Customer No.", "Bill-to address code");
                                                                     "Bill-to address code" := locTbBillToAddress.Code;
                                                                     "Bill-to Name"         := locTbBillToAddress.Name;
                                                                     "Bill-to Name 2"       := locTbBillToAddress."Name 2";
                                                                     "Bill-to Address"      := locTbBillToAddress.Address;
                                                                     "Bill-to Address 2"    := locTbBillToAddress."Address 2";
                                                                     "Bill-to City"         := locTbBillToAddress.City;
                                                                     "Bill-to Contact"      := locTbBillToAddress."Contact Person";
                                                                     "Bill-to Post Code"    := locTbBillToAddress."Post Code";
                                                                     "Bill-to County"       := locTbBillToAddress.County;
                                                                //START WG012 - JD - 25.03.2010
                                                                //old code
                                                                //     "Bill-to Country Code" := locTbBillToAddress."Country Code" //country code must be the same as Bill-to Code on customer card
                                                                //new code
                                                                     "Bill-to Country Code" := locTbBillToAddress."Country Code";
                                                                //STOP WG012 - JD - 25.03.2010
                                                                  END;
                                                                END;
                                                                //STOP WG012 - 27.10.2007 - PV - Relations between Ship-to Addresses
                                                              END;

                                                   CaptionML=[CSY=K¢d zas°lac° adresy;
                                                              ENU=Mail address code];
                                                   Description=WG012;
                                                   Editable=Yes }
    { 84551;  ;Error CENT          ;Boolean        }
    { 84552;  ;Auto Post Ship      ;Boolean        }
    { 84553;  ;Konsig Document     ;Boolean       ;CaptionML=[CSY=Doklad konsignace;
                                                              ENU=Konsig Document] }
    { 84560;  ;Wholesale Contract No.;Integer     ;TableRelation=Document.No. WHERE (Contact No.=FIELD(Sell-to Customer No.));
                                                   OnLookup=VAR
                                                              locTbDocument@1220000 : Record 84457;
                                                            BEGIN
                                                              //START WG0025 - 27.11.2007 - PV - Link to Document table (Wholesales Contract No.)
                                                              //START - WG028 - 14.12.2009 - MP - set customer limit and approval
                                                              locTbDocument.SETRANGE(Company, COMPANYNAME);
                                                              //STOP - WG028 - 14.12.2009 - MP - set customer limit and approval
                                                              locTbDocument.SETRANGE("Contact No.", "Sell-to Customer No.");
                                                              locTbDocument.SETFILTER("Valid From", '<=%1', "Requested Delivery Date");
                                                              locTbDocument.SETFILTER("Valid To", '>=%1', "Requested Delivery Date");
                                                              IF FORM.RUNMODAL(FORM::"Document List", locTbDocument) = ACTION::LookupOK THEN
                                                                VALIDATE("Wholesale Contract No.", locTbDocument."No.");
                                                              //STOP WG0025 - 27.11.2007 - PV - Link to Document table (Wholesales Contract No.)
                                                            END;

                                                   CaptionML=[CSY=¨°slo smlouvy;
                                                              ENU=Wholesale Contract No.];
                                                   Description=WG025 }
    { 84561;  ;Wholesale Contract Description;Text30;
                                                   FieldClass=FlowField;
                                                   CalcFormula=Lookup(Document.Description WHERE (No.=FIELD(Wholesale Contract No.)));
                                                   CaptionML=[CSY=Popis smlouvy;
                                                              ENU=Wholesale Contract Description];
                                                   Description=WG025;
                                                   Editable=No }
    { 84562;  ;Kind of Order       ;Option        ;OnValidate=VAR
                                                                ReasonCodeMngmt@1220000 : Codeunit 61014;
                                                              BEGIN
                                                                IF "Kind of Order" IN ["Kind of Order"::"Vendor->Customer","Kind of Order"::"Stock->Customer"] THEN BEGIN
                                                                  VALIDATE("Reason Code",ReasonCodeMngmt.InitReasonCode('WHOLESALE'));
                                                                END
                                                                ELSE
                                                                IF "Reason Code" = 'WHOLESALE' THEN
                                                                  "Reason Code" := '';
                                                              END;

                                                   CaptionML=[CSY=Druh objedn†vky;
                                                              ENU=Kind of Order];
                                                   OptionCaptionML=[CSY=" ,Dodavatel->Z†kazn°k,Sklad->Z†kazn°k,Dodavatel->Sklad,Sklad->Sklad,Sklad->Konsignace,Konsignace->Z†kazn°k";
                                                                    ENU=" ,Vendor->Customer,Stock->Customer,Vendor->Stock,Stock->Stock,Stock->Consignment,Consignment->Customer"];
                                                   OptionString=[ ,Vendor->Customer,Stock->Customer,Vendor->Stock,Stock->Stock,Stock->Consignment,Consignment->Customer];
                                                   Description=WG026 }
    { 84563;  ;Supply Point Name   ;Text30        ;FieldClass=FlowField;
                                                   CalcFormula=Lookup(Location.Name WHERE (Code=FIELD(Supply Point)));
                                                   CaptionML=[CSY=N†zev termin†lu;
                                                              ENU=Supply Point Name];
                                                   Description=WG034;
                                                   Editable=No }
    { 84564;  ;Missing Product Order;Boolean      ;FieldClass=FlowField;
                                                   CalcFormula=Exist("Sales Line" WHERE (Document Type=FIELD(Document Type),
                                                                                         Document No.=FIELD(No.),
                                                                                         Type=CONST(Item),
                                                                                         No.=FILTER(<>''),
                                                                                         Purchase Order No. Product=FILTER('')));
                                                   CaptionML=CSY=Chyb° objedn†vka PHM;
                                                   Description=WG034;
                                                   Editable=No }
    { 84565;  ;Missing Transport Order;Boolean    ;FieldClass=FlowField;
                                                   CalcFormula=Exist("Sales Line" WHERE (Document Type=FIELD(Document Type),
                                                                                         Document No.=FIELD(No.),
                                                                                         Type=CONST(Item),
                                                                                         No.=FILTER(<>''),
                                                                                         Purchase Order No. Trans=FILTER('')));
                                                   CaptionML=CSY=Chyb° objedn†vka p˝epravy;
                                                   Description=WG034;
                                                   Editable=No }
    { 84566;  ;Exist Line With Loading Ticket;Boolean;
                                                   FieldClass=FlowField;
                                                   CalcFormula=Exist("Sales Line" WHERE (Document Type=FIELD(Document Type),
                                                                                         Document No.=FIELD(No.),
                                                                                         Type=CONST(Item),
                                                                                         No.=FILTER(<>''),
                                                                                         Loading Ticket No.=FILTER(<>'')));
                                                   CaptionML=[CSY=Existuje ˝†dek s n†kl. listem;
                                                              ENU=Exist Line With Loading Ticket];
                                                   Description=WG034;
                                                   Editable=No }
    { 84570;  ;Created - User ID   ;Code20        ;OnLookup=VAR
                                                              LoginMgt@1000 : Codeunit 418;
                                                            BEGIN
                                                            END;

                                                   TestTableRelation=No;
                                                   CaptionML=[CSY=Vytvo˝eno - ID ußivatele;
                                                              ENU=Created - User ID];
                                                   Description=WG034;
                                                   Editable=No }
    { 84571;  ;Created - Date      ;Date          ;CaptionML=[CSY=Vytvo˝eno - Datum;
                                                              ENU=Created - Date];
                                                   Description=WG034;
                                                   Editable=No }
    { 84572;  ;Created - Time      ;Time          ;CaptionML=[CSY=Vytvo˝eno - ¨as;
                                                              ENU=Created - Time];
                                                   Description=WG034;
                                                   Editable=No }
    { 84573;  ;Modified - User ID  ;Code20        ;OnLookup=VAR
                                                              LoginMgt@1000 : Codeunit 418;
                                                            BEGIN
                                                            END;

                                                   TestTableRelation=No;
                                                   CaptionML=[CSY=Upraveno - ID ußivatele;
                                                              ENU=Modified - User ID];
                                                   Description=WG034;
                                                   Editable=No }
    { 84574;  ;Modified - Date     ;Date          ;CaptionML=[CSY=Upraveno - Datum;
                                                              ENU=Modified - Date];
                                                   Description=WG034;
                                                   Editable=No }
    { 84575;  ;Modified - Time     ;Time          ;CaptionML=[CSY=Upraveno - ¨as;
                                                              ENU=Modified - Time];
                                                   Description=WG034;
                                                   Editable=No }
    { 84576;  ;VAT Settlement Cust. Country;Boolean;
                                                   OnValidate=VAR
                                                                lCustVATRegNo@1220000 : Record 84437;
                                                                lrecCountry@1220002 : Record 9;
                                                              BEGIN
                                                                //START WG065 - 06.03.2009 - JV - change VAT Reg No and VAT Buss. Post Group by Customer Headquoter
                                                                //START - WG080 - 02.03.2010 - MP - processing charge for dep. cust.
                                                                //IF "VAT Settlement Cust. Country" THEN BEGIN
                                                                //START - WAG - 04.02.2014 - MP - Ticket#20140109105155
                                                                GetCust("Sell-to Customer No.");
                                                                //STOP - WAG - 04.02.2014 - MP - Ticket#20140109105155
                                                                IF "VAT Settlement Cust. Country" AND (NOT Cust."Not VAT Payer") THEN BEGIN
                                                                //STOP - WG080 - 02.03.2010 - MP - processing charge for dep. cust.
                                                                  //START - WG047 - 27.10.2010 - MP - repair validate field "VAT Settlement Cust. Country"
                                                                  { old:
                                                                  IF CurrFieldNo<>0 THEN BEGIN
                                                                    IF (NOT lCustVATRegNo.GET("Bill-to Customer No.","Bill-to Country Code"))OR(lCustVATRegNo."VAT Registration No."='') THEN
                                                                      ERROR(Text60005,FIELDCAPTION("Bill-to Customer No."),"Bill-to Country Code");
                                                                    VALIDATE("VAT Registration No.",lCustVATRegNo."VAT Registration No.");
                                                                  END;
                                                                  }
                                                                  IF (NOT lCustVATRegNo.GET("Bill-to Customer No.","Bill-to Country Code"))OR(lCustVATRegNo."VAT Registration No."='') THEN BEGIN
                                                                    //START - WG - 23.11.2010 - MP - repair validate field "VAT Settlement Cust. Country"
                                                                    {
                                                                    IF CurrFieldNo<>0 THEN
                                                                      ERROR(Text60005,FIELDCAPTION("Bill-to Customer No."),"Bill-to Country Code");
                                                                    }
                                                                    //START - WAG - 04.02.2014 - MP - Ticket#20140109105155
                                                                    //lrecCust.GET("Sell-to Customer No.");
                                                                    //VALIDATE("VAT Registration No.", lrecCust."VAT Registration No.");
                                                                    VALIDATE("VAT Registration No.", Cust."VAT Registration No.");
                                                                    //STOP - WAG - 04.02.2014 - MP - Ticket#20140109105155
                                                                    //STOP - WG - 23.11.2010 - MP - repair validate field "VAT Settlement Cust. Country"
                                                                  END ELSE
                                                                    VALIDATE("VAT Registration No.",lCustVATRegNo."VAT Registration No.");
                                                                  //STOP - WG047 - 27.10.2010 - MP - repair validate field "VAT Settlement Cust. Country"

                                                                  SalesSetup.GET;
                                                                  SalesSetup.TESTFIELD("VAT Bus. Post. Gr by HeadQtr");
                                                                  //START - WG - 03.04.2012 - MP - invoicing for customer out of EU
                                                                  SalesSetup.TESTFIELD("VAT Bus. Post. Gr-Serv. Out EU");
                                                                  IF NOT lrecCountry.GET(Cust."Country Code") THEN
                                                                    CLEAR(lrecCountry);

                                                                  IF lrecCountry."EU Country Code" = '' THEN
                                                                    VALIDATE("VAT Bus. Posting Group", SalesSetup."VAT Bus. Post. Gr-Serv. Out EU")
                                                                  ELSE
                                                                  //STOP - WG - 03.04.2012 - MP - invoicing for customer out of EU
                                                                    VALIDATE("VAT Bus. Posting Group", SalesSetup."VAT Bus. Post. Gr by HeadQtr");
                                                                END ELSE
                                                                  VALIDATE("VAT Settlement Country Code");
                                                                //STOP WG065 - 06.03.2009 - JV - change VAT Reg No and VAT Buss. Post Group by Customer Headquoter
                                                              END;

                                                   CaptionML=[CSY=M°sto plnÿn° dle s°dla z†kazn°ka;
                                                              ENU=VAT Settlement Cust. Country];
                                                   Description=WG065 }
    { 84577;  ;Fixed VAT Taxation Date;Boolean    ;CaptionML=CSY=PevnÇ datum DPH }
    { 84578;  ;Business Unit Code  ;Code10        ;TableRelation="Business Unit";
                                                   CaptionML=[CSY=K¢d £üetn° jednotky;
                                                              ENU=Business Unit Code;
                                                              SKY=K¢d £ütovnej jednotky];
                                                   Description=WAG140 }
    { 84579;  ;Discount Type       ;Option        ;CaptionML=CSY=Typ slevy;
                                                   OptionCaptionML=[CSY=Na jednotku,Fix,Procento;
                                                                    ENU=Unit,Fix,Percent];
                                                   OptionString=unit,fix,percent;
                                                   Description=WG145 }
    { 84580;  ;NI Receivable Date  ;Date          ;CaptionML=CSY=Datum splatnosti NI pohled†vky }
    { 84600;  ;Rechnungslegung     ;Option        ;CaptionML=CSY=Perioda fakturace;
                                                   OptionCaptionML=[CSY=" ,TÏdnÿ,Dek†dnÿ,1/2 mÿs°ünÿ,Mÿs°ünÿ,Dennÿ,Kvart†lnÿ";
                                                                    DEU=" ,Wîchentlich,Decade,1/2 monatlich,Monatlich,TÑglich,Quartal";
                                                                    ENU=" ,Week,Decade,1/2 month,Month,Day,Quartal"];
                                                   OptionString=[ ,Wîchentlich,Decade,1/2 monatlich,Monatlich,TÑglich,Quartal];
                                                   Editable=Yes }
    { 84601;  ;Clean Inv. Period Code;Code10      ;TableRelation="Clean Invoicing Period".Code;
                                                   CaptionML=[CSY=K¢d periody üistÇ fakturace;
                                                              ENU=Clean Inv. Period Code] }
    { 88101;  ;Insolvency Document ;Boolean       ;CaptionML=[CSY=Doklad za dlußn°kem v insolvenci;
                                                              ENU=Document for the insolvent debtor];
                                                   Description=DPH11 }
    { 88102;  ;Orig.TAX Document No.;Code20       ;OnValidate=BEGIN
                                                                //WG - 23.03.2015 - SS - NAV-11865
                                                                {
                                                                IF GUIALLOWED THEN
                                                                  IF Rec."Document Type" = Rec."Document Type"::"Credit Memo" THEN
                                                                    CheckBYUARUCreditMemo(Rec);
                                                                }
                                                                //WG - 23.03.2015 - SS - NAV-11865
                                                              END;

                                                   CaptionML=[CSY=¨°slo pÖvodn°ho daÂovÇho dokladu;
                                                              ENU=Orig.TAX Document No.];
                                                   Description=DPH11 }
    { 88660;  ;Different G/L Account Code;Code10  ;TableRelation="Different G/L Account".Code;
                                                   OnValidate=BEGIN
                                                                // START CDLCHP - 2.2.2007 - ZJ:
                                                                GetCust("Sell-to Customer No.");
                                                                IF CustPostGroup.GET(Cust."Customer Posting Group") THEN
                                                                BEGIN
                                                                  IF "Different G/L Account Code" <>'' THEN
                                                                  BEGIN
                                                                    IF DiffGL.GET("Different G/L Account Code",CustPostGroup."Receivables Account") THEN
                                                                      "G/L Account No." := DiffGL."Different G/L Account No."
                                                                    ELSE
                                                                      "G/L Account No." := CustPostGroup."Receivables Account" ;
                                                                  END
                                                                  ELSE
                                                                    "G/L Account No." := CustPostGroup."Receivables Account" ;
                                                                END;
                                                                // START CDLCHP - 2.2.2007 - ZJ:
                                                              END;

                                                   CaptionML=[CSY=K¢d odliÁnÇho £ütu HK;
                                                              ENU=Different G/L Account Code];
                                                   Description=CDLCHP }
    { 88661;  ;G/L Account No.     ;Code20        ;TableRelation="G/L Account".No.;
                                                   CaptionML=[CSY=¨°slo £ütu HK;
                                                              ENU=G/L Account No.];
                                                   Description=CDLCHP;
                                                   Editable=No }
    { 88800;  ;Cust. Bank Acc. Code;Code10        ;TableRelation="Customer Bank Account".Code WHERE (Customer No.=FIELD(Sell-to Customer No.));
                                                   CaptionML=[CSY=K¢d bank. £ütu z†kazn°ka;
                                                              ENU=Cust. Bank Acc. Code];
                                                   Description=CDLBA }
    { 88801;  ;KS                  ;Code10        ;CaptionML=CSY=KS;
                                                   Description=CDLBA }
    { 88802;  ;SS                  ;Code20        ;CaptionML=CSY=SS;
                                                   Description=CDLBA }
    { 88803;  ;Bank Account No.    ;Code20        ;TableRelation="Bank Account";
                                                   OnValidate=VAR
                                                                lBankAcc@1220000 : Record 270;
                                                              BEGIN
                                                                //START WG119 Mantis 1340 VP 24.2.2011
                                                                IF "Bank Account No." <> '' THEN BEGIN
                                                                  lBankAcc.GET("Bank Account No.");
                                                                  lBankAcc.TESTFIELD("Not Invoice", FALSE);
                                                                END;
                                                                //STOP WG119 Mantis 1340 VP 24.2.2011
                                                              END;

                                                   CaptionML=[CSY=¨°slo bankovn°ho £ütu;
                                                              ENU=Bank Account No.];
                                                   Description=CDLBA }
    { 88850;  ;EU 3-Party Trade 2  ;Boolean       ;OnValidate=VAR
                                                                locTbSalesLine@1000000006 : Record 37;
                                                                locNewVATProdPostGr@1000000005 : Code[10];
                                                                locTbVATProdPostingGr@1000000004 : Record 324;
                                                                locTbGLAcc@1000000003 : Record 15;
                                                                locTbItem@1000000002 : Record 27;
                                                                locTbResource@1000000001 : Record 156;
                                                                locTbItemCharge@1000000000 : Record 5800;
                                                                lText001@1000000007 : TextConst 'CSY=Chcete opravdu zmÿnit DPH £üto skupinu zboß° v ˝†dc°ch?;ENU=Are you sure to change VAT Prod. Posting Group in lines?';
                                                                lText002@1000000008 : TextConst 'CSY=Akce byla p˝eruÁena ußivatelem.;ENU=Action was interrupted by the user.';
                                                              BEGIN
                                                                // START CDLS3 - 12.10.2005 - MV - modification for EU - 3rd Party Trade SK
                                                                //automatic change "VAT Prod. Posting Group" for EU 3rd party trade 2
                                                                IF ("EU 3-Party Trade 2" <> xRec."EU 3-Party Trade 2") THEN
                                                                  IF CONFIRM(lText001) THEN
                                                                    BEGIN
                                                                      locTbSalesLine.SETRANGE("Document Type","Document Type");
                                                                      locTbSalesLine.SETRANGE("Document No.","No.");
                                                                      IF locTbSalesLine.FINDFIRST THEN
                                                                         REPEAT
                                                                           locNewVATProdPostGr := locTbSalesLine."VAT Prod. Posting Group";
                                                                           IF "EU 3-Party Trade 2" THEN
                                                                             BEGIN
                                                                               IF locTbVATProdPostingGr.GET(locTbSalesLine."VAT Prod. Posting Group") THEN
                                                                                 IF locTbVATProdPostingGr."Code For EU 3-Party Trade 2" <> '' THEN
                                                                                      locNewVATProdPostGr := locTbVATProdPostingGr."Code For EU 3-Party Trade 2";
                                                                             END
                                                                           ELSE
                                                                             BEGIN
                                                                               locTbVATProdPostingGr.RESET;
                                                                               locTbVATProdPostingGr.SETRANGE("Code For EU 3-Party Trade 2",locTbSalesLine."VAT Prod. Posting Group");
                                                                               IF locTbVATProdPostingGr.FINDFIRST THEN
                                                                                 CASE locTbSalesLine.Type OF
                                                                                   locTbSalesLine.Type::"G/L Account" :
                                                                                     IF locTbGLAcc.GET(locTbSalesLine."No.") THEN
                                                                                        locNewVATProdPostGr := locTbGLAcc."VAT Prod. Posting Group";
                                                                                   locTbSalesLine.Type::Item :
                                                                                     IF locTbItem.GET(locTbSalesLine."No.") THEN
                                                                                        locNewVATProdPostGr := locTbItem."VAT Prod. Posting Group";
                                                                                   locTbSalesLine.Type::"Charge (Item)" :
                                                                                     IF locTbItemCharge.GET(locTbSalesLine."No.") THEN
                                                                                        locNewVATProdPostGr := locTbItemCharge."VAT Prod. Posting Group";
                                                                                   ELSE locNewVATProdPostGr := ''
                                                                                 END;
                                                                             END;
                                                                             IF locNewVATProdPostGr <> locTbSalesLine."VAT Prod. Posting Group" THEN
                                                                               BEGIN
                                                                                 CASE "Document Type" OF
                                                                                   "Document Type"::Order :           //purchase orders
                                                                                     IF (locTbSalesLine."Quantity Shipped" = locTbSalesLine."Quantity Invoiced") THEN
                                                                                      locTbSalesLine.VALIDATE("VAT Prod. Posting Group",locNewVATProdPostGr);
                                                                                   "Document Type"::"Return Order" :  //purchase return orders
                                                                                     IF (locTbSalesLine."Return Qty. Received" = locTbSalesLine."Quantity Invoiced") THEN
                                                                                      locTbSalesLine.VALIDATE("VAT Prod. Posting Group",locNewVATProdPostGr);
                                                                                    ELSE locTbSalesLine.VALIDATE("VAT Prod. Posting Group",locNewVATProdPostGr);
                                                                                 END;
                                                                                 locTbSalesLine.MODIFY;
                                                                               END;
                                                                         UNTIL locTbSalesLine.NEXT = 0;
                                                                      END
                                                                  ELSE ERROR(lText002);
                                                                // STOP CDLS3 - 12.10.2005 - MV - modification for EU - 3rd Party Trade SK
                                                              END;

                                                   CaptionML=[CSY=EU obchod 3.strany 2;
                                                              ENU=EU 3-Party Trade 2];
                                                   Description=CDLS3 }
    { 88910;  ;Linked Advance      ;Boolean       ;FieldClass=FlowField;
                                                   CalcFormula=Exist("Advance Link" WHERE (Link Type=CONST(Sale),
                                                                                           Posted=CONST(No),
                                                                                           Document Type=FIELD(Document Type),
                                                                                           Document No.=FIELD(No.)));
                                                   CaptionML=[CSY=P˝ipojen† z†loha;
                                                              ENU=Linked Advance];
                                                   Description=CDLZA }
    { 88911;  ;Tax Document        ;Boolean       ;CaptionML=[CSY=DaÂovÏ doklad;
                                                              ENU=Tax Document];
                                                   Description=CDLZA }
    { 88912;  ;Suppress Inv. Rounding;Boolean     ;CaptionML=[CSY=Potlaü zaokrouhlen° faktury;
                                                              ENU=Suppress Inv. Rounding];
                                                   Description=CDLZA }
    { 88913;  ;Check Advance Connections;Boolean  ;CaptionML=[CSY=Zkontrolovat p˝ipojenÇ z†lohy;
                                                              ENU=Check Advance Connections];
                                                   Description=CDLZA }
    { 88914;  ;Cr.Memo Advance     ;Code20        ;TableRelation=Advance.No. WHERE (Advance Type=CONST(Sale),
                                                                                    Posted=CONST(Yes),
                                                                                    Closed=CONST(No),
                                                                                    Partner No.=FIELD(Sell-to Customer No.));
                                                   OnValidate=BEGIN
                                                                // START CDLZA - 23.5.2007 - ZJ:
                                                                IF ("Cr.Memo Advance" <> '') AND ("Document Type"<>"Document Type"::"Credit Memo") THEN
                                                                  ERROR(Err005,FIELDCAPTION("Cr.Memo Advance"),FIELDCAPTION("Document Type"));
                                                                // STOP CDLZA - 23.5.2007 - ZJ:
                                                              END;

                                                   CaptionML=CSY=¨°slo z†lohy k dobropisu;
                                                   Description=CDLZA }
    { 88920;  ;Different VAT Calculation;Boolean  ;CaptionML=[CSY=OdliÁnÏ zpÖsob vÏpoütu DPH;
                                                              ENU=Different VAT Calculation];
                                                   Description=CDLFCA }
    { 88921;  ;Not Use Diff. VAT Calculation;Boolean;
                                                   CaptionML=[CSY=Nepouß°t odliÁnÏ zpÖsob vÏpoütu DPH;
                                                              ENU=Not Use Different VAT Calculation];
                                                   Description=CDLFCA }
    { 88950;  ;Total Quantity Shipped;Decimal     ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Sales Line"."Qty. Shipped (Base)" WHERE (Document Type=FIELD(Document Type),
                                                                                                             Document No.=FIELD(No.),
                                                                                                             Type=CONST(Item)));
                                                   CaptionML=[CSY=Celkem dod†no mnoßstv°;
                                                              ENU=Total Quantity Shipped];
                                                   Description=WG }
    { 5010000;;Supply Point        ;Code10        ;TableRelation=Location;
                                                   OnValidate=VAR
                                                                LCL_RE_SalesLine@1106700000 : Record 37;
                                                              BEGIN
                                                                IF ("Supply Point" = '') AND (xRec."Supply Point" <> '') THEN
                                                                  MESSAGE(Text1106700008,
                                                                           FIELDCAPTION("Supply Point"));

                                                                //SP¯1-START
                                                                IF (("Order Type" = "Order Type"::Heizîl) OR ("Order Type" = "Order Type"::Kraftstoff)) THEN
                                                                  BEGIN
                                                                // *** START-SB231003
                                                                IF ((CurrFieldNo = FIELDNO("Supply Point")) AND (xRec."Supply Point" <> "Supply Point") AND (NOT "Order created")) THEN BEGIN
                                                                  COMMIT;
                                                                  LCL_RE_SalesLine.RESET;
                                                                  LCL_RE_SalesLine.SETRANGE("Document Type","Document Type");
                                                                  LCL_RE_SalesLine.SETRANGE("Document No.","No.");
                                                                  LCL_RE_SalesLine.SETRANGE(Type,LCL_RE_SalesLine.Type::Item);
                                                                  IF LCL_RE_SalesLine.FINDFIRST THEN
                                                                    REPEAT
                                                                      LCL_RE_SalesLine.FNK_LocationAktualisieren(Rec);
                                                                    UNTIL LCL_RE_SalesLine.NEXT = 0;
                                                                  END;
                                                                // *** ENDE-SB231003
                                                                END;
                                                                // ST¯1-ENDE;

                                                                IF "Supply Point" <> xRec."Supply Point" THEN BEGIN
                                                                  "Lines Refreshed" := FALSE;
                                                                  //START - WG - 01.08.2010 - MP - repair functionality
                                                                  //MODIFY;
                                                                  IF MODIFY THEN;
                                                                  //STOP - WG - 01.08.2010 - MP - repair functionality
                                                                END;

                                                                // 30.11.2006 wz.ub
                                                                "Location Code" := "Supply Point";
                                                                // 30.11.2006 wz.ub
                                                              END;

                                                   CaptionML=[CSY=K¢d termin†lu;
                                                              ENU=Supply Point;
                                                              DEA=Beladestelle];
                                                   SQL Data Type=Varchar }
    { 5010001;;Order Type          ;Option        ;OnValidate=BEGIN
                                                                IF "Order Type" = "Order Type"::"Monatsabrechnung TS" THEN
                                                                  ERROR(Text1106700009,"Order Type");

                                                                //WB230206-START
                                                                GetCust("Sell-to Customer No.");
                                                                IF ("Order Type" = "Order Type"::"Schmierstoff/Folgemarkt") THEN BEGIN
                                                                    Cust.TESTFIELD("LocationCode of LubricantStock");
                                                                    VALIDATE("Location Code", Cust."LocationCode of LubricantStock");
                                                                END ELSE
                                                                  VALIDATE("Location Code",UserMgt.GetLocation(0,Cust."Location Code","Responsibility Center"));
                                                                //WB230206-STOP
                                                              END;

                                                   CaptionML=[ENU=Order Type;
                                                              DEA=Auftragstyp];
                                                   OptionCaptionML=[ENU=" ,Fuel Oil,Lubricant,Fuel,Monthly Billing PS,Fleet Card,Miscellaneous,Promotion Material,Tank Card,Toll,Refund,Co_Branded";
                                                                    DEA=" ,Heizîl,Schmierstoff/Folgemarkt,Kraftstoff,Monatsabrechnung TS,Flottenkarte,Sonstiges,Werbematerial,Tankkarte,Maut,RÅckvergÅtung,Co_Branded"];
                                                   OptionString=[ ,Heizîl,Schmierstoff/Folgemarkt,Kraftstoff,Monatsabrechnung TS,Flottenkarte,Sonstiges,Werbematerial,Tankkarte,Maut,RÅckvergÅtung,Co_Branded];
                                                   Description=[ ,Heizîl,Schmierstoff/Folgemarkt,Kraftstoff,Monatsabrechnung TS,Flottenkarte,Sonstiges,Werbematerial] }
    { 5010002;;Freight Table       ;Code10        ;TableRelation="Freight Table";
                                                   OnValidate=VAR
                                                                locTbFreightTable@1220000 : Record 5010007;
                                                              BEGIN
                                                                //START WG037 - PV - 16.12.2007 - Freight Calculation
                                                                //orig:
                                                                {
                                                                IF "Freight Table" = '' THEN
                                                                  VALIDATE("Freight Rate (LCY)",0)
                                                                ELSE
                                                                  IF "Freight Table" <> xRec."Freight Table" THEN BEGIN
                                                                    "Lines Refreshed" := FALSE;
                                                                    MODIFY;
                                                                  END;
                                                                }
                                                                //modified:
                                                                IF "Freight Table" = '' THEN BEGIN
                                                                  VALIDATE("Freight Rate (LCY)",0);
                                                                  VALIDATE("Shipping Agent Code", '');
                                                                  VALIDATE("Supply Point", '');
                                                                 END ELSE BEGIN
                                                                  IF "Freight Table" <> xRec."Freight Table" THEN
                                                                    "Lines Refreshed" := FALSE;
                                                                  locTbFreightTable.GET("Freight Table");
                                                                  VALIDATE("Shipping Agent Code", locTbFreightTable."Shipping Agent Code");
                                                                  UpdateSalesLines(FIELDCAPTION("Freight Table"), TRUE);

                                                                  VALIDATE("Supply Point", locTbFreightTable."Loading Point Code");
                                                                  UpdateSalesLines(FIELDCAPTION("Supply Point"), TRUE);
                                                                END;
                                                                //STOP WG037 - PV - 16.12.2007 - Freight Calculation


                                                                 //MS13¯-BEGIN   - Keine Meldung, wenn Frachttabelle gewechstelt wird, da automatisch neu berechnet wird.
                                                                 //   MESSAGE(Text1106700010);
                                                                 //MS13¯-END
                                                              END;

                                                   CaptionML=[CSY=Tabulka p˝epravy;
                                                              ENU=Freight Table;
                                                              DEA=Frachttabelle];
                                                   SQL Data Type=Variant }
    { 5010003;;Type of Contingent  ;Code10        ;TableRelation="Contingent Type";
                                                   CaptionML=[ENU=Type of Contingent;
                                                              DEA=Kontingenttyp];
                                                   SQL Data Type=Variant }
    { 5010004;;Freight Rate (LCY)  ;Decimal       ;OnValidate=BEGIN
                                                                IF (CurrFieldNo <> 0) AND (CurrFieldNo <> FIELDNO("Freight Table")) THEN BEGIN
                                                                  IF "Freight Rate (LCY)" <> xRec."Freight Rate (LCY)" THEN
                                                                    IF NOT CONFIRM(Text1106700011+
                                                                                   Text1106700012,FALSE,FIELDCAPTION("Freight Rate (LCY)")) THEN
                                                                      "Freight Rate (LCY)" := xRec."Freight Rate (LCY)"
                                                                    ELSE
                                                                      UpdateSalesLines(FIELDCAPTION("Freight Rate (LCY)"),FALSE);
                                                                END
                                                                ELSE
                                                                  UpdateSalesLines(FIELDCAPTION("Freight Rate (LCY)"),FALSE);
                                                              END;

                                                   CaptionML=[ENU=Freight Rate (LCY);
                                                              DEA=Frachtsatz (MW)] }
    { 5010005;;Margin (LCY)        ;Decimal       ;OnValidate=BEGIN
                                                                IF "Margin (LCY)" <> xRec."Margin (LCY)" THEN BEGIN
                                                                  IF "Order created" THEN
                                                                    ERROR(Text1106700013,
                                                                           FIELDCAPTION("Order created"),"Order created");
                                                                  IF NOT CONFIRM(Text1106700014+
                                                                                 Text1106700012,FALSE,FIELDCAPTION("Margin (LCY)")) THEN
                                                                    "Margin (LCY)" := xRec."Margin (LCY)"
                                                                  ELSE
                                                                    UpdateSalesLines(FIELDCAPTION("Margin (LCY)"),FALSE);
                                                                END;
                                                              END;

                                                   CaptionML=[ENU=Margin (LCY);
                                                              DEA=Marge (MW)] }
    { 5010006;;Total Qty.          ;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Sales Line"."Outstanding Qty. (Base)" WHERE (Document Type=FIELD(Document Type),
                                                                                                                 Document No.=FIELD(No.),
                                                                                                                 Type=CONST(Item)));
                                                   CaptionML=[CSY=Celkem zbÏvaj°c° mnoßstv°;
                                                              ENU=Total Qty.;
                                                              DEA=Gesamtmenge];
                                                   Description=calc.,WG;
                                                   Editable=No }
    { 5010007;;Office              ;Code1         ;TableRelation="Customer-Specific Setup";
                                                   OnValidate=BEGIN
                                                                IF Office <> xRec.Office THEN
                                                                  MessageIfSalesLinesExist(FIELDCAPTION(Office));
                                                              END;

                                                   CaptionML=[ENU=Office;
                                                              DEA=Niederlassung];
                                                   SQL Data Type=Variant }
    { 5010008;No;Bill of Delivery Text;Text30     ;CaptionML=[ENU=Bill of Delivery Text;
                                                              DEA=LS Text] }
    { 5010009;;Delivery Time from  ;Time          ;OnValidate=BEGIN
                                                                t_Dispopool.RESET;
                                                                t_Dispopool.SETRANGE(t_Dispopool.Typ, t_Dispopool.Typ::Verkaufsauftrag);
                                                                t_Dispopool.SETRANGE(t_Dispopool."No.", "No.");
                                                                IF t_Dispopool.FINDFIRST THEN
                                                                  BEGIN
                                                                    REPEAT                       //AVIA-RK-180504
                                                                      t_Dispopool."Delivery Time From" := "Delivery Time from";
                                                                      t_Dispopool.MODIFY;
                                                                    UNTIL t_Dispopool.NEXT = 0;  //AVIA-RK-180504
                                                                  END;
                                                              END;

                                                   CaptionML=[CSY=Dodat v üase od;
                                                              ENU=Delivery Time from;
                                                              DEA=Anlieferung Zeit von] }
    { 5010010;;Delivery Time Until ;Time          ;OnValidate=BEGIN
                                                                t_Dispopool.RESET;
                                                                t_Dispopool.SETRANGE(t_Dispopool.Typ, t_Dispopool.Typ::Verkaufsauftrag);
                                                                t_Dispopool.SETRANGE(t_Dispopool."No.", "No.");
                                                                IF t_Dispopool.FINDFIRST THEN
                                                                  BEGIN
                                                                    REPEAT                   //AVIA-RK-180504
                                                                      t_Dispopool."Delivery Time Until" := "Delivery Time Until";
                                                                      t_Dispopool.MODIFY;
                                                                    UNTIL t_Dispopool.NEXT = 0;  //AVIA-RK-180504
                                                                  END;
                                                              END;

                                                   CaptionML=[CSY=Dodat v üase do;
                                                              ENU=Delivery Time Until;
                                                              DEA=Anlieferung Zeit bis] }
    { 5010011;;Existing Customer Remarks;Boolean  ;FieldClass=FlowField;
                                                   CalcFormula=Exist("Comment Line" WHERE (Table Name=CONST(Customer),
                                                                                           No.=FIELD(Sell-to Customer No.)));
                                                   CaptionML=[ENU=Existing Customer Remarks;
                                                              DEA=Bemerkungen Debitor vorhanden];
                                                   Editable=No }
    { 5010012;;Credit Limit Exceeded;Boolean      ;CaptionML=[ENU=Credit Limit Exceeded;
                                                              DEA=Kreditlimit Åberschritten];
                                                   Editable=Yes }
    { 5010013;;Cr. Limit Exceeded at (Date);Date  ;CaptionML=[ENU=Credit Limit Exceeded at (Date);
                                                              DEA=Kreditlimit Åberschritten am];
                                                   Editable=No }
    { 5010014;;Cr. Limit Exceeded at (Time);Time  ;CaptionML=[ENU=Cr. Limit Exceeded at (Time);
                                                              DEA=Kreditlimit Åberschritten um];
                                                   Editable=No }
    { 5010015;;Credit Limit Exceeded (by);Code10  ;CaptionML=[ENU=Credit Limit Exceeded (by);
                                                              DEA=Kreditlimit Åberschritten von];
                                                   SQL Data Type=Variant;
                                                   Editable=Yes }
    { 5010016;;Order Released at (Date);Date      ;CaptionML=[ENU=Order Released at (Date);
                                                              DEA=Auftrag freigegeben am];
                                                   Editable=No }
    { 5010017;;Order Released at (Time);Time      ;CaptionML=[ENU=Order Released at (Time);
                                                              DEA=Auftrag freigegeben um];
                                                   Editable=No }
    { 5010018;;Order Released by   ;Code20        ;CaptionML=[ENU=Order Released by;
                                                              DEA=Auftrag freigegeben von];
                                                   SQL Data Type=Variant;
                                                   Editable=No }
    { 5010019;;No. of Delivery Notes printed2;Integer;
                                                   CaptionML=[ENU=Number of Delivery Notes printed;
                                                              DEA=Anzahl gedruckt LS];
                                                   Editable=No }
    { 5010020;;Contact Person      ;Code20        ;TableRelation="User Setup"."User ID";
                                                   CaptionML=[CSY=Kontaktn° osoba;
                                                              ENU=Contact Person;
                                                              DEA=Benutzer];
                                                   SQL Data Type=Variant }
    { 5010021;;Order created       ;Boolean       ;OnValidate=BEGIN

                                                                IF "Order created" THEN BEGIN
                                                                  "Order created at (Date)"  := WORKDATE;
                                                                  "Order created at (Time)"  := TIME;
                                                                  "Order created by" := USERID;
                                                                END
                                                                ELSE BEGIN
                                                                  "Order created at (Date)"  := 0D;
                                                                  "Order created at (Time)"  := 0T;
                                                                  "Order created by" := '';
                                                                END;

                                                                t_MineralEinrichtung.GET;
                                                                IF t_MineralEinrichtung."Order Release" THEN
                                                                  KredLimPrÅfen()
                                                                ELSE BEGIN
                                                                //  DebKredLimitPrÅfen.VerkKopfPrÅfen(Rec);
                                                                // *** START-SB161003
                                                                  IF (CurrFieldNo = FIELDNO("Order created")) THEN BEGIN
                                                                // *** ENDE-SB161003
                                                                    t_VKZ2.RESET;
                                                                    t_VKZ2.SETRANGE(t_VKZ2."Document Type","Document Type");
                                                                    t_VKZ2.SETRANGE(t_VKZ2."Document No.","No.");
                                                                    t_VKZ2.SETRANGE(t_VKZ2.Type,t_VKZ2.Type::Item);
                                                                    IF t_VKZ2.FINDFIRST THEN
                                                                      CustCheckCreditLimit.SalesLineCheck(t_VKZ2);
                                                                // *** START-SB161003
                                                                  END;
                                                                // *** ENDE-SB161003
                                                                END;

                                                                //* EK und VK "archivieren" ...
                                                                t_VerkZ.RESET;
                                                                t_VerkZ.SETRANGE(t_VerkZ."Document Type","Document Type");
                                                                t_VerkZ.SETRANGE(t_VerkZ."Document No.","No.");
                                                                t_VerkZ.SETRANGE(t_VerkZ.Type,t_VerkZ.Type::Item);
                                                                IF t_VerkZ.FINDFIRST THEN BEGIN
                                                                  REPEAT
                                                                // START-OR-210502
                                                                // Original
                                                                {
                                                                    t_VerkZ."Urspr. EK-Preis (MW)" := t_VerkZ."EK-Preis Mineralîlhandel (MW)" * t_VerkZ."Faktor kleinste Einheit";
                                                                    t_VerkZ."Urspr. VK-Preis" := t_VerkZ."VK-Preis Mineralîlhandel" * t_VerkZ."Faktor kleinste Einheit";
                                                                }
                                                                    t_VerkZ."Original Unit Cost (LCY)" := t_VerkZ."Unit Cost Oil Trading (LCY)";
                                                                    t_VerkZ."Original Sales Price" := t_VerkZ."Sales Price Oil Trading";
                                                                // ENDE-OR-210502

                                                                //START-INDEX11------------------------------------------------------
                                                                //WZ:RS080903 Dispopool aktualisieren
                                                                   IF "Order created" THEN
                                                                     t_VerkZ."Dispopool verwalten"(3)
                                                                   ELSE
                                                                     t_VerkZ."Dispopool verwalten"(4);

                                                                //ENDE-INDEX11------------------------------------------------------
                                                                    t_VerkZ.MODIFY;
                                                                  UNTIL t_VerkZ.NEXT = 0;
                                                                END;


                                                                // START-OR-020304
                                                                {
                                                                //* Lieferdatum des VKK auf die der VKZ stellen ;(
                                                                t_VerkZ.RESET;
                                                                t_VerkZ.SETRANGE(t_VerkZ."Document Type","Document Type");
                                                                t_VerkZ.SETRANGE(t_VerkZ."Document No.","No.");
                                                                t_VerkZ.SETRANGE(t_VerkZ.Type,t_VerkZ.Type::Item);
                                                                IF t_VerkZ.FINDFIRST THEN
                                                                  //"Shipment Date" := t_VerkZ."Shipment Date";
                                                                  "Shipment Date" := 0D;    // AVIA-FSP,060204
                                                                }
                                                                // ENDE-OR-020304

                                                                //* Prob: Auftrag Nacherfassung: Preis wird doch noch mal neu gerechnet ...
                                                                //* auch, wenn VK manuell gepflegt wurde ...

                                                                // START-OR-201102
                                                                // Frachtermittlung deaktiviert
                                                                {
                                                                //* Frachtsatz ermitteln ...
                                                                IF "Order Type" IN["Order Type"::Kraftstoff,"Order Type"::Heizîl] THEN BEGIN
                                                                  IF Vermittler = '' THEN BEGIN  //Nur fÅr AuftrÑge, die nicht Åber Sammelbestellungen kommen ...
                                                                    IF "Order created" THEN
                                                                      "Freight Rate (LCY)" := c_FrachtPreis.FrachtAktualisieren(Rec,0)
                                                                    ELSE
                                                                      "Freight Rate (LCY)" := 0;
                                                                    MODIFY;

                                                                    IF SalesLinesExist THEN BEGIN
                                                                      //SalesLine.LOCKTABLE;

                                                                      SalesLine.RESET;
                                                                      SalesLine.SETRANGE("Document Type","Document Type");
                                                                      SalesLine.SETRANGE("Document No.","No.");
                                                                      IF SalesLine.FINDFIRST THEN
                                                                        REPEAT
                                                                          IF (SalesLine.Type = SalesLine.Type::Item) AND (SalesLine.Artikelart = SalesLine.Artikelart::FlÅssig) THEN BEGIN
                                                                            IF (SalesLine."Freight Rate (LCY)" = 0) OR ("Freight Rate (LCY)" <> xRec."Freight Rate (LCY)") THEN BEGIN
                                                                              SalesLine."Freight Rate (LCY)" := "Freight Rate (LCY)";
                                                                              IF "Order created" THEN
                                                                                BEGIN
                                                                                SalesLine.VALIDATE(SalesLine."Margin (LCY)",SalesLine."Margin (LCY)" - "Freight Rate (LCY)");
                                                                                SalesLine.VALIDATE(SalesLine."Freight Rate (LCY)");
                                                                                END
                                                                              ELSE
                                                                                SalesLine.MineralîlBetragAktualisieren;
                                                                              SalesLine.MODIFY;
                                                                            END;
                                                                          END;
                                                                          SalesLine.MODIFY(TRUE);
                                                                      UNTIL SalesLine.NEXT = 0;
                                                                    END;
                                                                  END;  //Vermittler <> ''
                                                                END;
                                                                }
                                                                // ENDE-OR-201102



                                                                // AbprÅfen Amortisationszuschlag
                                                                IF "Amortisationszuschlag berechn." THEN BEGIN
                                                                  RE_KuEinr.GET;
                                                                  SalesLine.RESET;
                                                                  SalesLine.SETRANGE(SalesLine."Document Type","Document Type");
                                                                  SalesLine.SETRANGE(SalesLine."Document No.","No.");
                                                                  SalesLine.SETRANGE(SalesLine."No.",RE_KuEinr."Art.-Nr.-Amort.-Zuschlag");
                                                                  IF NOT SalesLine.FINDFIRST THEN
                                                                    ERROR(Text60001);
                                                                END;


                                                                //START - WG - 02.04.2010 - MP - rem code
                                                                //COMMIT;
                                                                //STOP - WG - 02.04.2010 - MP - rem code
                                                              END;

                                                   CaptionML=[ENU=Order created;
                                                              DEA=Auftrag erfasst] }
    { 5010022;;Order created at (Date);Date       ;CaptionML=[ENU=Order created at (Date);
                                                              DEA=Auftrag erfasst am] }
    { 5010023;;Order created at (Time);Time       ;CaptionML=[ENU=Order created at (Time);
                                                              DEA=Auftrag erfasst um] }
    { 5010024;;Order created by    ;Code20        ;TableRelation="User Setup"."User ID";
                                                   CaptionML=[ENU=Order created by;
                                                              DEA=Auftrag erfasst von];
                                                   SQL Data Type=Variant }
    { 5010025;;Sales Price is OK   ;Boolean       ;InitValue=Yes;
                                                   CaptionML=[ENU=Sales Price is OK;
                                                              DEA=VK-Preis OK] }
    { 5010026;;Document Entered    ;Boolean       ;CaptionML=[ENU=Document Entered;
                                                              DEA=Beleg nacherfasst] }
    { 5010027;;Gebietscode         ;Code10        ;CaptionML=CSY=K¢d oblasti }
    { 5010028;;Name 3              ;Text1         ;CaptionML=[ENU=Name 3;
                                                              DEA=Name 3];
                                                   Description=WG length 50->1 }
    { 5010029;;Self-Collector      ;Boolean       ;CaptionML=[ENU=Self-Collector;
                                                              DEA=Selbstabholer];
                                                   Description=WZ-Min2.01 }
    { 5010030;;Current Order Amount (LCY);Decimal ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Sales Line"."Outstanding Amount (LCY)" WHERE (Document Type=FIELD(Document Type),
                                                                                                                  Document No.=FIELD(No.)));
                                                   OnValidate=BEGIN
                                                                KredLimPrÅfen;
                                                              END;

                                                   CaptionML=[ENU=Current Order Amount (LCY);
                                                              DEA=Akt. Auftragswert (MW)];
                                                   Description=calc.;
                                                   Editable=No }
    { 5010031;;Centralized Order No.;Code20       ;TableRelation=Sammelbestellkopf;
                                                   CaptionML=[ENU=Centralized Order No.;
                                                              DEA=Sammelbestellnr.];
                                                   SQL Data Type=Variant;
                                                   Editable=No }
    { 5010032;;OptiTool Serial No. ;Integer       ;FieldClass=FlowField;
                                                   CalcFormula=Lookup("OptiTool Auftragsdispoproto"."Entry No." WHERE (Order No.=FIELD(No.)));
                                                   CaptionML=[ENU=OptiTool Serial No.;
                                                              DEA=optiTool LfdNr.] }
    { 5010033;;Number of Lines     ;Integer       ;FieldClass=FlowField;
                                                   CalcFormula=Count("Sales Line" WHERE (Document Type=FIELD(Document Type),
                                                                                         Document No.=FIELD(No.),
                                                                                         Type=CONST(Item)));
                                                   CaptionML=[ENU=Number of Lines;
                                                              DEA=Anz. Positionen];
                                                   Editable=No }
    { 5010034;;Latest Shipping Date;Date          ;CaptionML=[CSY=Dodat nejpozdÿji do;
                                                              ENU=Latest Shipping Date;
                                                              DEA=SpÑtestes Lieferdatum] }
    { 5010035;;Agent               ;Code20        ;TableRelation=Customer;
                                                   CaptionML=[ENU=Agent;
                                                              DEA=Vermittler];
                                                   SQL Data Type=Variant }
    { 5010036;;Transfered to OptiTool;Boolean     ;OnValidate=BEGIN
                                                                IF "Transfered to OptiTool" THEN BEGIN
                                                                  FNK_VKZ_LfdNrOptitool_Aktual();
                                                                  öbergabeOptiTool();
                                                                  END
                                                                ELSE
                                                                  OptiToolStorno();
                                                              END;

                                                   CaptionML=[ENU=Transfered to OptiTool;
                                                              DEA=An OptiTool Åbergeben] }
    { 5010037;;Tour no.            ;Code20        ;TableRelation="Tour Header";
                                                   OnValidate=BEGIN
                                                                // Start MH-220803: Option: Pflege Tournummer auch aus VkKopf:
                                                                // t_Tourenzeilen."ZuordnungVkAuftrag>Tour" ('VAL', Rec, xRec);
                                                                // Ende MH-220803
                                                              END;

                                                   CaptionML=ENU=Tour no.;
                                                   Description=nonEditable;
                                                   Editable=No }
    { 5010038;;Contact Customer by Booker;Boolean ;OnValidate=BEGIN
                                                                t_Dispopool.RESET;
                                                                t_Dispopool.SETRANGE(t_Dispopool.Typ, t_Dispopool.Typ::Verkaufsauftrag);
                                                                t_Dispopool.SETRANGE(t_Dispopool."No.", "No.");
                                                                IF t_Dispopool.FINDFIRST THEN
                                                                BEGIN
                                                                  REPEAT                       //AVIA-RK-180504
                                                                    t_Dispopool."Tel. Dispatch Boat" := "Contact Customer by Booker";
                                                                    t_Dispopool.MODIFY;
                                                                  UNTIL t_Dispopool.NEXT = 0;  //AVIA-RK-180504
                                                                END;

                                                                // START-OR-261103
                                                                t_TZ.RESET;
                                                                t_TZ.SETCURRENTKEY(t_TZ."No.", t_TZ.Type, t_TZ."Delivery Note Type");
                                                                t_TZ.SETRANGE(t_TZ."No.", "No.");
                                                                t_TZ.SETRANGE(t_TZ.Type, t_TZ.Type::Lieferschein);
                                                                t_TZ.SETRANGE(t_TZ."Delivery Note Type", t_TZ."Delivery Note Type"::Verkaufsauftrag);
                                                                IF t_TZ.FINDFIRST THEN
                                                                BEGIN
                                                                t_TZ."telef. Aviso" := "Contact Customer by Booker";
                                                                t_TZ.MODIFY;
                                                                END;
                                                                // ENDE-OR-261103
                                                              END;

                                                   CaptionML=ENU=Contact Customer by Booker }
    { 5010039;;Contact Customer by Driver;Boolean ;CaptionML=ENU=Contact Customer by Driver }
    { 5010040;;Customer Asked for Price;Boolean   ;CaptionML=ENU=Customer Asked for Price }
    { 5010041;;Print Data on Acc. Statement;Boolean;
                                                   CaptionML=ENU=Print Data on Account Statement;
                                                   Description=AVIAmat }
    { 5010042;;Invoice Supplement  ;Option        ;CaptionML=ENU=Invoice Supplement;
                                                   OptionCaptionML=[CSY=" ,Faktura,Faktura+Div,Div";
                                                                    DEA=" ,LS,LS+Div,Div"];
                                                   OptionString=[ ,LS,LS+Div,Div];
                                                   Description=AVIAmat }
    { 5010043;;Home Station        ;Code20        ;CaptionML=ENU=Home Station }
    { 5010044;;Do Not Delete Request;Boolean      ;CaptionML=ENU=Do Not Delete Request;
                                                   Description=Hilfsfeld }
    { 5010045;;Exported at (Date)  ;Date          ;CaptionML=ENU=Exported at (Date);
                                                   Editable=No }
    { 5010046;;Exported at (Time)  ;Time          ;CaptionML=ENU=Exported at (Time);
                                                   Editable=No }
    { 5010047;No;Exported from     ;Code20        ;CaptionML=ENU=Exported from;
                                                   Editable=No }
    { 5010048;;Created at (date)   ;Date          ;CaptionML=ENU=Created at (date);
                                                   Editable=No }
    { 5010049;;Created at (time)   ;Time          ;CaptionML=ENU=Created at (time);
                                                   Editable=No }
    { 5010050;;Truck Fleet No.     ;Code10        ;CaptionML=ENU=Truck Fleet No. }
    { 5010051;;Created from        ;Code20        ;CaptionML=ENU=Created from;
                                                   Editable=No }
    { 5010052;;Original Vendor     ;Code20        ;TableRelation=Vendor;
                                                   CaptionML=ENU=Original Vendor }
    { 5010053;;Remark (order)      ;Boolean       ;FieldClass=FlowField;
                                                   CalcFormula=Exist("Sales Comment Line" WHERE (Document Type=FIELD(Document Type),
                                                                                                 No.=FIELD(No.)));
                                                   CaptionML=ENU=Remark (order);
                                                   Editable=No }
    { 5010054;;Printing Remarks (delivery);Boolean;FieldClass=FlowField;
                                                   CalcFormula=Exist(Auftragsbemerkungen WHERE (Document Type=FIELD(Document Type),
                                                                                                No.=FIELD(No.),
                                                                                                Print to=FILTER(Lieferschein|Lieferschein + Rechnung)));
                                                   CaptionML=ENU=Printing Remarks (delivery);
                                                   Editable=No }
    { 5010055;;Printing Remarks (invoice);Boolean ;FieldClass=FlowField;
                                                   CalcFormula=Exist(Auftragsbemerkungen WHERE (Document Type=FIELD(Document Type),
                                                                                                No.=FIELD(No.),
                                                                                                Print to=FILTER(Rechnung|Lieferschein + Rechnung)));
                                                   CaptionML=ENU=Printing Remarks (invoice);
                                                   Editable=No }
    { 5010056;;Special Delivery Time;Boolean      ;OnValidate=BEGIN
                                                                t_Dispopool.RESET;
                                                                t_Dispopool.SETRANGE(t_Dispopool.Typ, t_Dispopool.Typ::Verkaufsauftrag);
                                                                t_Dispopool.SETRANGE(t_Dispopool."No.", "No.");
                                                                IF t_Dispopool.FINDFIRST THEN
                                                                BEGIN
                                                                  REPEAT                      //AVIA-RK-180504
                                                                    t_Dispopool."Special Delivery Time" := "Special Delivery Time";
                                                                    t_Dispopool.MODIFY;
                                                                  UNTIL t_Dispopool.NEXT = 0; //AVIA-RK-180504
                                                                END;
                                                              END;

                                                   CaptionML=ENU=Special Delivery Time }
    { 5010057;;Lines Refreshed     ;Boolean       ;CaptionML=ENU=Lines Refreshed;
                                                   Editable=No }
    { 5010058;;No. of Delivery Notes Printed1;Integer;
                                                   CaptionML=ENU=Number of Delivery Notes Printed }
    { 5010059;;Tour Filter         ;Code10        ;FieldClass=FlowFilter;
                                                   TableRelation="Tour Header".No.;
                                                   CaptionML=ENU=Tour Filter }
    { 5010060;;Manualy freight Rate;Boolean       ;CaptionML=CSY=Manu†ln° spl†tka dopravnÇho }
    { 5010061;;Not in Disposition  ;Boolean       ;OnValidate=BEGIN
                                                                t_VerkZ.RESET;
                                                                t_VerkZ.SETRANGE(t_VerkZ."Document Type","Document Type");
                                                                t_VerkZ.SETRANGE(t_VerkZ."Document No.","No.");
                                                                t_VerkZ.SETRANGE(t_VerkZ.Type,t_VerkZ.Type::Item);
                                                                IF t_VerkZ.FINDFIRST THEN BEGIN
                                                                REPEAT
                                                                 IF "Not in Disposition" THEN
                                                                   t_VerkZ."Dispopool verwalten"(6)
                                                                 ELSE
                                                                   t_VerkZ."Dispopool verwalten"(5);
                                                                 t_VerkZ.MODIFY;
                                                                UNTIL t_VerkZ.NEXT = 0;
                                                                END;
                                                              END;

                                                   CaptionML=ENU=Not in Disposition }
    { 5010101;;Print SalesPr. on DeliveryNote;Boolean;
                                                   CaptionML=[ENU=Print SalesPrice on DeliveryNote;
                                                              DEA=Preis auf LS drucken] }
    { 5010200;;Freistellungsnummer ;Code10        ;CaptionML=CSY=UvolnÿnÇ ü°slo }
    { 5010201;;Frachtsatz (Manuell);Decimal       ;OnValidate=BEGIN
                                                                IF "Frachtsatz (Manuell)" <> xRec."Frachtsatz (Manuell)" THEN BEGIN
                                                                  "Lines Refreshed" := FALSE;
                                                                  MODIFY;
                                                                END;
                                                              END;

                                                   CaptionML=CSY=Sazba dopravnÇho (Manu†ln°);
                                                   Description=NF }
    { 5010202;;Verteilungsschlussel;Option        ;CaptionML=CSY=Kl°ü pro rozdÿlen°;
                                                   OptionCaptionML=CSY=Mnoßstv°,¨†stka,Rovnomÿrnÿ;
                                                   OptionString=nach Menge,nach Betrag,Zu gleichen Teilen }
    { 5010203;;Abnahmevertrag auf OMR-Basis;Boolean;
                                                   CaptionML=CSY=P˝ej°mac° £mluva na OMR-z†klad }
    { 5010204;;Zollpos. Nr. andrucken;Boolean     ;CaptionML=CSY=¨°slo celn° poloßky stiskn. }
    { 5010205;;Andruck der Gewichte;Boolean       ;CaptionML=CSY=P˝°znak dÖleßitosti }
    { 5010206;;Anzahl gedruckter Proforma;Integer ;CaptionML=CSY=Mnoßstv° form†ln°ho p˝°tlaku }
    { 5010210;;IC Company          ;Text30        ;TableRelation=Company;
                                                   CaptionML=ENU=IC Company;
                                                   Description=IC¯;
                                                   Editable=No }
    { 5010211;;IC Document Type    ;Option        ;CaptionML=ENU=IC Document Type;
                                                   OptionCaptionML=ENU=Quote,Order,Invoice,Credit Memo,Blanket Order,Return Order;
                                                   OptionString=Quote,Order,Invoice,Credit Memo,Blanket Order,Return Order;
                                                   Description=IC¯;
                                                   Editable=No }
    { 5010212;;IC Document No.     ;Code20        ;CaptionML=ENU=IC Document No.;
                                                   Description=IC¯;
                                                   Editable=No }
    { 5010213;;Rabattinfo          ;Text1         ;CaptionML=CSY=Informace o rabatu;
                                                   Description=RSM¯ verkleinert auf 50 Zeichen von 250,DPH11 shortened to 1 char }
    { 5010214;;Neuer Rabattsatz    ;Decimal       ;CaptionML=CSY=Nov† sazba rabatu;
                                                   Description=RSM¯ }
    { 5010215;;Selbstabholerrabatt ;Decimal       ;CaptionML=CSY=Samo vyvozenÏ rabat;
                                                   Description=RSM¯ }
    { 5010216;;Kundenrabattgruppe  ;Code10        ;TableRelation=Table5096778.Field1;
                                                   CaptionML=CSY=Skupina rabatu z†kazn°ka;
                                                   Description=WB1¯ }
    { 99008500;;Date Received      ;Date          ;CaptionML=[CSY=Datum p˝ijet°;
                                                              ENU=Date Received] }
    { 99008501;;Time Received      ;Time          ;CaptionML=[CSY=¨as p˝ijet°;
                                                              ENU=Time Received] }
    { 99008502;;BizTalk Request for Sales Qte.;Boolean;
                                                   CaptionML=[CSY=BizTalk poß.na nab°dku;
                                                              ENU=BizTalk Request for Sales Qte.] }
    { 99008503;;BizTalk Sales Order;Boolean       ;CaptionML=[CSY=BizTalk prod.objedn†vka;
                                                              ENU=BizTalk Sales Order] }
    { 99008509;;Date Sent          ;Date          ;CaptionML=[CSY=Odesl†no dne;
                                                              ENU=Date Sent] }
    { 99008510;;Time Sent          ;Time          ;CaptionML=[CSY=¨as odesl†n°;
                                                              ENU=Time Sent] }
    { 99008513;;BizTalk Sales Quote;Boolean       ;CaptionML=[CSY=BizTalk nab°dka;
                                                              ENU=BizTalk Sales Quote] }
    { 99008514;;BizTalk Sales Order Cnfmn.;Boolean;CaptionML=[CSY=BizTalk potvrzen° prod.obj.;
                                                              ENU=BizTalk Sales Order Cnfmn.] }
    { 99008518;;Customer Quote No. ;Code20        ;CaptionML=[CSY=¨.popt†vky z†kazn°ka;
                                                              ENU=Customer Quote No.] }
    { 99008519;;Customer Order No. ;Code20        ;CaptionML=[CSY=¨.objedn†vky z†kazn°ka;
                                                              ENU=Customer Order No.] }
    { 99008521;;BizTalk Document Sent;Boolean     ;CaptionML=[CSY=Odesl†n BizTalk doklad;
                                                              ENU=BizTalk Document Sent] }
  }
  KEYS
  {
    {    ;Document Type,No.                       ;Clustered=Yes }
    {    ;Document Type,Sell-to Customer No.,No.   }
    {    ;Document Type,Combine Shipments,Bill-to Customer No.,Currency Code }
    {    ;Document Type,Service Mgt. Document      }
    {    ;Sell-to Customer No.,External Document No. }
    {    ;Document Type,Sell-to Contact No.        }
    {    ;Bill-to Contact No.                      }
    {    ;Order Type                              ;MaintainSQLIndex=No;
                                                   MaintainSIFTIndex=No }
    {    ;Centralized Order No.                   ;MaintainSIFTIndex=No }
    {    ;Document Type,Ship-to Post Code,Shipment Date;
                                                   MaintainSQLIndex=No;
                                                   MaintainSIFTIndex=No }
    {    ;Document Type,Combine Shipments,Bill-to Customer No.,Sell-to Customer No.,Shipment Date,Ship-to Code,Currency Code;
                                                   MaintainSQLIndex=No;
                                                   MaintainSIFTIndex=No }
    { No ;Document Type,Sell-to Customer No.,Land Ruckvergutung,Posting Date;
                                                   MaintainSQLIndex=No;
                                                   MaintainSIFTIndex=No }
    {    ;No.                                     ;MaintainSIFTIndex=No }
    {    ;Sell-to Customer No.,No.                ;MaintainSIFTIndex=No }
    {    ;Document Type,Payment Terms Code,Payment Method Code,No. }
    {    ;SklPohTypPlatby,Sell-to Customer No.,Currency Code,Inv. Period Start Date,Inv. Period End Date }
    {    ;Currency Code,Bill-to Name,Sell-to Customer No.,Inv. Period End Date }
    {    ;Document Type,Sell-to Customer No.,Currency Code,Order Type,Inv. Period Start Date,Inv. Period End Date }
  }
  FIELDGROUPS
  {
  }
  CODE
  {
    VAR
      Text000@1000 : TextConst 'CSY=Chcete vytisknout dod†vku %1?;ENU=Do you want to print shipment %1?';
      Text001@1001 : TextConst 'CSY=Chcete vytisknout fakturu %1?;ENU=Do you want to print invoice %1?';
      Text002@1002 : TextConst 'CSY=Chcete vytisknout dobropis %1?;ENU=Do you want to print credit memo %1?';
      Text003@1003 : TextConst 'CSY=%1 nelze p˝ejmenovat.;ENU=You cannot rename a %1.';
      Text004@1004 : TextConst 'CSY=Chcete zmÿnit %1?;ENU=Do you want to change %1?';
      Text005@1005 : TextConst 'CSY=%1 nemÖßete vymazat, protoße doklad st†le obsahuje aspoÂ jeden ˝†dek.;ENU=You cannot reset %1 because the document still has one or more lines.';
      Text006@1006 : TextConst 'CSY=%1 nemÖßete zmÿnit, protoße je spojena s jednou nebo v°ce n†kupn°mi objedn†vkami.;ENU=You cannot change %1 because the order is associated with one or more purchase orders.';
      Text007@1007 : TextConst 'CSY=%1 nesm° bÏt vÿtÁ° neß %2 v tabulce %3.;ENU=%1 cannot be greater than %2 in the %3 table.';
      Text008@1008 : TextConst 'CSY="Odstranÿn° tohoto dokladu zpÖsob° mezeru v ü°selnÇ ˝adÿ dod†vek. ";ENU="Deleting this document will cause a gap in the number series for shipments. "';
      Text009@1009 : TextConst 'CSY=Bude vytvo˝ena pr†zdn† dod†vka %1, kter† zapln° mezeru v ü°selnÇ ˝adÿ.\\;ENU=An empty shipment %1 will be created to fill this gap in the number series.\\';
      Text010@1010 : TextConst 'CSY=Chcete pokraüovat?;ENU=Do you want to continue?';
      Text011@1011 : TextConst 'CSY="Odstranÿn° tohoto dokladu zpÖsob° mezeru v ü°selnÇ ˝adÿ za£ütovanÏch faktur. ";ENU="Deleting this document will cause a gap in the number series for posted invoices. "';
      Text012@1012 : TextConst 'CSY=Bude vytvo˝ena pr†zdn† za£ütovan† faktura %1, kter† zapln° mezeru v ü°selnÇ ˝adÿ.\\;ENU=An empty posted invoice %1 will be created to fill this gap in the number series.\\';
      Text013@1013 : TextConst 'CSY="Odstranÿn° tohoto dokladu zpÖsob° mezeru v ü°selnÇ ˝adÿ za£ütovanÏch dobropisÖ. ";ENU="Deleting this document will cause a gap in the number series for posted credit memos. "';
      Text014@1014 : TextConst 'CSY=Bude vytvo˝en pr†zdnÏ dobropis %1, kterÏ vypln° mezeru v ü°selnÇ ˝adÿ.\\;ENU=An empty posted credit memo %1 will be created to fill this gap in the number series.\\';
      Text015@1015 : TextConst 'CSY=Pokud zmÿn°te %1, existuj°c° prodejn° ˝†dky budou odstranÿny.\\;ENU=If you change %1, the existing sales lines will be deleted and new sales lines based on the new information on the header will be created.\\';
      Text017@1017 : TextConst 'CSY=D˝°ve neß mÖßete %1 zmÿnit, je nutnÇ odstranit existuj°c° prodejn° ˝†dky.;ENU=You must delete the existing sales lines before you can change %1.';
      Text018@1018 : TextConst 'CSY=V prodejn° hlaviüce jste zmÿnili %1, coß se neprojevilo v existuj°c°ch prodejn°ch ˝†dc°ch.\;ENU=You have changed %1 on the sales header, but it has not been changed on the existing sales lines.\';
      Text019@1019 : TextConst 'CSY=Existuj°c° prodejn° ˝†dky je nutnÇ zmÿnit ruünÿ.;ENU=You must update the existing sales lines manually.';
      Text020@1020 : TextConst 'CSY=Zmÿna mÖße ovlivnit smÿnnÏ kurz poußitÏ p˝i vÏpoütu ceny na prodejn°ch ˝†dc°ch.;ENU=The change may affect the exchange rate used in the price calculation of the sales lines.';
      Text021@1021 : TextConst 'CSY=Chcete aktualizovat smÿnnÏ kurz?;ENU=Do you want to update the exchange rate?';
      Text022@1022 : TextConst 'CSY=Tento doklad nemÖßete odstranit. VaÁe identifikace povoluje pracovat pouze od %1 %2.;ENU=You cannot delete this document. Your identification is set up to process from %1 %2 only.';
      Text023@1023 : TextConst 'CSY=Chcete vytisknout p˝°jemku vratky %1?;ENU=Do you want to print return receipt %1?';
      Text024@1024 : TextConst 'CSY="Zmÿnili jste pole %1. VÁimnÿte si, ße p˝epoüet DPH mÖße zpÖsobit rozd°ly, proto pozdÿji budete muset zkontrolovat ü†stky. ";ENU="You have modified the %1 field. Note that the recalculation of VAT may cause penny differences, so you must check the amounts afterwards. "';
      Text026@1026 : TextConst 'CSY=Chcete aktualizovat pole %2 v ˝†dc°ch tak, aby obsahovalo novou hodnotu %1?;ENU=Do you want to update the %2 field on the lines to reflect the new value of %1?';
      Text027@1027 : TextConst 'CSY=VaÁe identifikace je nastavena pouze na zpracov†n° od %1 do %2.;ENU=Your identification is set up to process from %1 %2 only.';
      Text028@1028 : TextConst 'CSY=%1 nemÖßete zmÿnit, pokud bylo pole %2 vyplnÿno;ENU=You cannot change the %1 when the %2 has been filled in.';
      Text029@1029 : TextConst 'CSY="Odstranÿn° tohoto dokladu zpÖsob° mezeru v ü°selnÇ ˝adÿ p˝°jemek vratek. ";ENU="Deleting this document will cause a gap in the number series for return receipts. "';
      Text030@1030 : TextConst 'CSY=Bude vytvo˝ena pr†zdn† p˝°jemka vratky %1, kter† vypln° mezeru v ü°selnÇ ˝adÿ.\\;ENU=An empty return receipt %1 will be created to fill this gap in the number series.\\';
      Text031@1031 : TextConst 'CSY=Zmÿnili jste %1.\\;ENU=You have modified %1.\\';
      Text032@1032 : TextConst 'CSY=Chcete aktualizovat ˝†dky?;ENU=Do you want to update the lines?';
      SalesSetup@1033 : Record 311;
      GLSetup@1034 : Record 98;
      GLAcc@1035 : Record 15;
      SalesHeader@1036 : Record 36;
      SalesLine@1037 : Record 37;
      CustLedgEntry@1038 : Record 21;
      Cust@1039 : Record 18;
      PaymentTerms@1040 : Record 3;
      PaymentMethod@1041 : Record 289;
      CurrExchRate@1042 : Record 330;
      SalesCommentLine@1043 : Record 44;
      ShipToAddr@1044 : Record 222;
      PostCode@1045 : Record 225;
      BankAcc@1046 : Record 270;
      SalesShptHeader@1047 : Record 110;
      SalesInvHeader@1048 : Record 112;
      SalesCrMemoHeader@1049 : Record 114;
      ReturnRcptHeader@1050 : Record 6660;
      GenBusPostingGrp@1051 : Record 250;
      GenJnILine@1052 : Record 81;
      RespCenter@1053 : Record 5714;
      InvtSetup@1054 : Record 313;
      Location@1055 : Record 14;
      WhseRequest@1056 : Record 5765;
      ShippingAgentService@1057 : Record 5790;
      ServDocRegister@1071 : Record 5936;
      WebSite@1072 : Record 6217;
      TempReqLine@1089 : TEMPORARY Record 246;
      AdvanceSalesHeader@1470000 : Record 36;
      UserMgt@1058 : Codeunit 5700;
      NoSeriesMgt@1059 : Codeunit 396;
      CustCheckCreditLimit@1060 : Codeunit 312;
      TransferExtendedText@1061 : Codeunit 378;
      GenJnlApply@1062 : Codeunit 225;
      SalesPost@1063 : Codeunit 80;
      CustEntrySetApplID@1064 : Codeunit 101;
      DimMgt@1065 : Codeunit 408;
      WhseSourceHeader@1073 : Codeunit 5781;
      SynchMgt@1077 : Codeunit 6205;
      ArchiveManagement@1075 : Codeunit 5063;
      SalesLineReserve@1066 : Codeunit 99000832;
      ApplyCustEntries@1067 : Form 232;
      CurrencyDate@1068 : Date;
      HideValidationDialog@1069 : Boolean;
      Confirmed@1070 : Boolean;
      Text035@1076 : TextConst 'CSY=Dokud nezad†te z†kazn°ka do nab°dky, nemÖßete ji vydat ani z n° vytvo˝it objedn†vku.\\Chcete z†kazn°ky vytvo˝it nyn°?;ENU=You cannot Release Quote or Make Order unless you specify a customer on the quote.\\Do you want to create customer(s) now?';
      Text037@1078 : TextConst 'CSY=Kontakt %1 %2 se nevztahuje k z†kazn°kovi %3.;ENU=Contact %1 %2 is not related to customer %3.';
      Text038@1074 : TextConst 'CSY=Kontakt %1 %2 se vztahuje k jinÇ spoleünosti neß z†kazn°k %3.;ENU=Contact %1 %2 is related to a different company than customer %3.';
      Text039@1086 : TextConst 'CSY=Kontakt %1 %2 se nevztahuje k z†kazn°kovi.;ENU=Contact %1 %2 is not related to a customer.';
      ReservEntry@1079 : Record 337;
      TempReservEntry@1080 : TEMPORARY Record 337;
      DocDim@1082 : Record 357;
      Text040@1083 : TextConst 'CSY=S touto objedn†vkou je spojena vyhran† p˝°leßitost.\;ENU=A won opportunity is linked to this order.\';
      Text041@1084 : TextConst 'CSY=Stav mus° bÏt zmÿnÿn na Prohra d˝°ve, neß mÖßete objedn†vku odstranit.\;ENU=It has to be changed to status Lost before the Order can be deleted.\';
      Text042@1085 : TextConst 'CSY=Chcete nyn° zmÿnit stav tÇto p˝°leßitosti?;ENU=Do you want to change the status for this opportunity now?';
      Text043@1087 : TextConst 'CSY=PrÖvodce byl p˝eruÁen;ENU=Wizard Aborted';
      Text044@1088 : TextConst 'CSY=Stav p˝°leßitosti nebyl zmÿnÿn. Program p˝eruÁil odstranÿn° objedn†vky.;ENU=The status of the opportunity has not been changed. The program has aborted deleting the order.';
      SkipSellToContact@1016 : Boolean;
      SkipBillToContact@1025 : Boolean;
      Text045@1081 : TextConst 'CSY="NemÖßete zmÿnit pole %1, protoße %2 %3 m† %4 = %5 a %6 jiß m† p˝i˝azeno %7 %8.";ENU="You can not change the %1 field because %2 %3 has %4 = %5 and the %6 has already been assigned %7 %8."';
      Text046@1090 : TextConst 'CSY=Fakturu %1 nemÖßete odstranit, protoße pro ni existuje jedna nebo v°ce poloßek servisu.;ENU=You cannot delete invoice %1 because one or more service ledger entries exist for this invoice.';
      Text047@1095 : TextConst 'CSY=%1 nelze zmÿnit, protoße u prodejn° objedn†vky existuje rezervace, sledov†n° zboß° nebo sledov†n° zak†zky.;ENU=You cannot change %1 because reservation, item tracking, or order tracking exists on the sales order.';
      Text048@1091 : TextConst 'CSY=Prodejn° nab°dka %1 jiß byla p˝i˝azena p˝°leßitosti %2. Chcete tuto nab°dku znovu p˝i˝adit?;ENU=Sales quote %1 has already been assigned to opportunity %2. Would you like to reassign this quote?';
      Text049@1092 : TextConst 'CSY=Pole %1 nemÖße bÏt pr†zdnÇ, protoße tato nab°dka je p˝ipojena k p˝°leßitosti.;ENU=The %1 field cannot be blank because this quote is linked to an opportunity.';
      InsertMode@1093 : Boolean;
      CompanyInfo@1094 : Record 79;
      Text050@1096 : TextConst 'CSY=Pokud %1 je %2 na prodejn° objedn†vce ü°slo %3, potom mus° vÁechny ˝†dky prodeje, kde typ je %4, pouß°vat stejnou lokaci.;ENU=If %1 is %2 in sales order no. %3, then all sales lines where type is %4 must use the same location.';
      HideCreditCheckDialogue@1097 : Boolean;
      Text051@1098 : TextConst 'CSY=%1 %2 prodeje jiß existuje.;ENU=The sales %1 %2 already exists.';
      "---CDL----"@1220002 : Integer;
      DiffGL@1220001 : Record 88660;
      CustPostGroup@1220000 : Record 92;
      Text053@1220035 : TextConst 'CSY=Chybnÿ nastavenÏ zpÖsob platby.;ENU=Payment Method is wrong setup.';
      Err000@1220006 : TextConst 'CSY=Nen° moßno pouß°vat standardn° NA z†lohy.;ENU=It is not possible to use standard NA Advances.';
      Err001@1220005 : TextConst 'CSY=Nen° moßno pouß°vat standardn° NA z†lohy. \Je vyplnÿno pole %1.;ENU=It is not possible to use standard NA Advances.\Field %1 is not empty.';
      Mess000@1220004 : TextConst 'CSY=Upozornÿn°: K z†kazn°kovi %1 existuj° zaplacenÇ a nevyrovnanÇ z†lohy.;ENU=Notice: There are paid and uncleared advances for customer no. %1.';
      tAdvanceExists@1220003 : TextConst 'CSY=K tomuto dokladu je p˝ipojena z†loha, nemÖßete zmÿnit ü°slo dodavatele ani ü°slo vÿ˝itele;ENU="There is an advance linked to this document. You can''t change neither Buy-from vendor No. nor Pay-to vendor No. "';
      AdvanceCU@1220007 : Codeunit 88910;
      cuGenJnlCheckLine@1220008 : Codeunit 11;
      Err005@1220009 : TextConst 'CSY=Pole %1 je moßno vyplnit pouze pro typ dokladu %2.;ENU=Field %1 can be filled only for document type %2.';
      "--EISWZR--"@1106700000 : Integer;
      "-----Mineral-----"@1106700016 : Integer;
      t_Entfernung@1106700015 : Record 5010052;
      t_DebBem@1106700014 : Record 5010049;
      t_DebAufBem@1106700013 : Record 5010054;
      c_FrachtPreis@1106700012 : Codeunit 5010050;
      t_MineralEinrichtung@1106700011 : Record 5010011;
      t_VerkZ@1106700010 : Record 37;
      t_VKZ2@1106700009 : Record 37;
      t_Anfragen@1106700008 : Record 5010145;
      t_Tourenzeilen@1106700007 : Record 5010015;
      t_Dispopool@1106700006 : Record 5010164;
      t_TZ@1106700005 : Record 5010015;
      "--WZ----"@1106700004 : Integer;
      DA_Liefda@1106700003 : Date;
      Text052@1106700032 : TextConst;
      "--EISWZR-"@1106700001 : TextConst;
      Text0451@1106700031 : TextConst 'DEA=Dieser Auftrag kann nicht gelîscht werden, da er bereits in der Tourenplanung (Tourennr.: %1) berÅcksichtigt wurde.';
      Text1106700008@1106700030 : TextConst 'ENU=Wenn %1 nicht angegeben ist, kann keine \Frachtberechnung erfolgen ! - Bitte kalkulieren Sie manuell.;DEA=Wenn %1 nicht angegeben ist, kann keine \Frachtberechnung erfolgen ! - Bitte kalkulieren Sie manuell.';
      Text1106700009@1106700029 : TextConst 'ENU="""%1"" darf nicht manuell ausgewÑhlt werden !";DEA="""%1"" darf nicht manuell ausgewÑhlt werden !"';
      Text1106700010@1106700028 : TextConst 'ENU=Bitte Funktion "Fracht berechnen" aufrufen !;DEA=Bitte Funktion "Fracht berechnen" aufrufen !';
      Text1106700011@1106700027 : TextConst 'ENU=Soll der %1 auf allen Positionen aktualisiert werden ?\;DEA=Soll der %1 auf allen Positionen aktualisiert werden ?\';
      Text1106700012@1106700026 : TextConst 'ENU=Es wird keine PrÅfung der Artikelkategorie (Kraftstoffe) vorgenommen !;DEA=Es wird keine PrÅfung der Artikelkategorie (Kraftstoffe) vorgenommen !';
      Text1106700013@1106700025 : TextConst 'ENU=Sie kînnen die Marge nicht mehr verÑndern, da %1 auf %2 steht !;DEA=Sie kînnen die Marge nicht mehr verÑndern, da %1 auf %2 steht !';
      Text1106700014@1106700024 : TextConst 'ENU=Soll die %1 auf allen Positionen aktualisiert werden ?\;DEA=Soll die %1 auf allen Positionen aktualisiert werden ?\';
      Text1106700033@1106700023 : TextConst 'ENU=KreditlimitprÅfung nicht mîglich, da Feld "%1" nicht angegeben ist !;DEA=KreditlimitprÅfung nicht mîglich, da Feld "%1" nicht angegeben ist !';
      Text1106700034@1106700022 : TextConst 'ENU=Sie haben keine Auftragspositionen eingegebenn !;DEA=Sie haben keine Auftragspositionen eingegebenn !';
      Text1106700035@1106700021 : TextConst 'ENU=Auftrag ist bereits in Disposition.\Wollen Sie weitermachen ?;DEA=Auftrag ist bereits in Disposition.\Wollen Sie weitermachen ?';
      Text1106700036@1106700020 : TextConst 'ENU=Dieser Auftrag ist nicht in der Tourenplanung !;DEA=Dieser Auftrag ist nicht in der Tourenplanung !';
      Text1106700037@1106700019 : TextConst 'ENU=Auftrag konnte nicht storniert werden !;DEA=Auftrag konnte nicht storniert werden !';
      Text50000@1106700018 : TextConst 'DEA=Anfrage %1 bei Debitor %2 nachbearbeiten.';
      Text50010@1106700017 : TextConst 'ENU=Intercompany Documents must always be shipped completely.';
      RE_KuEinr@1112400001 : Record 5010012;
      t_EinrKutten@1112400000 : Record 5010012;
      t_GeschÑftsbereich@1000000000 : Record 60200;
      RE_SalesHeader@1000000001 : Record 36;
      Text60000@1108800000 : TextConst 'DEA=Kunde erhÑlt Amortisationszuschlag von %1.';
      Re_MinEinrII@1108800001 : Record 5010012;
      Text60001@1108800002 : TextConst 'DEA=Die Position fÅr den Amortisationszuschlag ist nicht angelegt!';
      "---WG033---"@1220010 : Boolean;
      TbCustBusinessArea@1220011 : Record 60201;
      "---WG034---"@1220012 : Boolean;
      TbVendor@1220013 : Record 23;
      TbPurchaseHeader@1220014 : Record 38;
      TbPurchaseLine@1220015 : Record 39;
      LineCounter@1220016 : Integer;
      Text60002@1220018 : TextConst 'CSY=Chcete odeslat e-mailem/faxem n†kupn° objedn†vku %1 dodavateli %2?';
      Text60003@1220019 : TextConst 'CSY=Objedn†vka nebyla odesl†na.';
      Text60004@1220022 : TextConst 'CSY=Chcete odeslat emailem/faxem n†kupn° objedn†vku %1 p˝epravci %2?';
      Text60005@1220017 : TextConst 'CSY="Pro K¢d zemÿ pl†tce %1 = %1 nen° nastaveno DI¨.";ENU=There is no setup for Bill-to Country code %2 of customer %1';
      Err003@1220020 : TextConst 'CSY=Z†kazn°k %1 je blokov†n.\\DÖvod blokov†n°: %2.;ENU=Customer %1 is blocked.\\Reason of blocking is: %2.';
      Text50021@1220023 : TextConst 'CSY=Chcete aktualizovat smÿnnÏ kurz DPH?;ENU=Do you want to update the VAT exchange rate?;SKY=Chcete aktualizovaú vÏmennÏ kurz DPH?';
      "---J10015---"@1220021 : Integer;
      SalesHeaderEXT@1220024 : Record 84940;
      SalesHeaderEXTLoaded@1220025 : Boolean;
      VATCurrMgt@1220026 : Codeunit 84811;
      Text50022@1220027 : TextConst 'CSY=RozÁ°˝enÇ ˝†dky pro DPH byly vynulov†ny.;ENU=VAT extended lines have been cleared.';
      Text50023@1220028 : TextConst 'CSY=RozÁ°˝enÇ ˝†dky pro DPH byly aktualizov†ny.;ENU=VAT extended lines have been updated.';
      "-CDLKH7-"@1220029 : Integer;
      VATControlStatMgtCU@1220030 : Codeunit 4042400;
      "-CDLOUD-"@1220031 : Integer;
      VATBusPostGroup@1220032 : Record 323;
      NoSeries@1220033 : Record 308;
      gRecursiveCount@1220034 : Integer;
      recCustomer@1220037 : Record 18;
      recSalesLine@1220038 : Record 37;
      sumLines@1220039 : Integer;
      recExtTextHeader@1220040 : Record 279;
      recExtTextLine@1220041 : Record 280;
      sumLines10000@1220042 : Integer;
      recStandardText@1220044 : Record 7;
      ErrCrMemoDueDate@1220036 : TextConst 'CSY=Pro dobropis mus° bÏt vyplnÿnÇ pole %1 and %2.;ENU="You have to fill in fields %1 and %2. "';
      NAV2016AssignmentManagement@1220043 : Codeunit 76014;

    PROCEDURE InitRecord@10();
    VAR
      NoSeriesLoc@1220000 : Record 308;
    BEGIN
      CASE "Document Type" OF
        "Document Type"::Quote,"Document Type"::Order:
          BEGIN
            NoSeriesMgt.SetDefaultSeries("Posting No. Series",SalesSetup."Posted Invoice Nos.");
            NoSeriesMgt.SetDefaultSeries("Shipping No. Series",SalesSetup."Posted Shipment Nos.");
          END;
        "Document Type"::Invoice:
          BEGIN
            IF ("No. Series" <> '') AND
               (SalesSetup."Invoice Nos." = SalesSetup."Posted Invoice Nos.")
            THEN
              "Posting No. Series" := "No. Series"
            ELSE
              NoSeriesMgt.SetDefaultSeries("Posting No. Series",SalesSetup."Posted Invoice Nos.");
            IF SalesSetup."Shipment on Invoice" THEN
              NoSeriesMgt.SetDefaultSeries("Shipping No. Series",SalesSetup."Posted Shipment Nos.");
          END;
        "Document Type"::"Return Order":
          BEGIN
            NoSeriesMgt.SetDefaultSeries("Posting No. Series",SalesSetup."Posted Credit Memo Nos.");
            NoSeriesMgt.SetDefaultSeries("Return Receipt No. Series",SalesSetup."Posted Return Receipt Nos.");
          END;
        "Document Type"::"Credit Memo":
          BEGIN
            IF ("No. Series" <> '') AND
               (SalesSetup."Credit Memo Nos." = SalesSetup."Posted Credit Memo Nos.")
            THEN
              "Posting No. Series" := "No. Series"
            ELSE
              NoSeriesMgt.SetDefaultSeries("Posting No. Series",SalesSetup."Posted Credit Memo Nos.");
            IF SalesSetup."Return Receipt on Credit Memo" THEN
              NoSeriesMgt.SetDefaultSeries("Return Receipt No. Series",SalesSetup."Posted Return Receipt Nos.");
          END;
      END;

      IF "Document Type" IN ["Document Type"::Order,"Document Type"::Invoice,"Document Type"::Quote] THEN
        BEGIN
          //EISWZR Start
          //"Shipment Date" := WORKDATE;
          IF "Order Type" = "Order Type"::Heizîl THEN
              BEGIN
                VALIDATE("Shipment Date", 0D);
              END
           //WZ¯1 - BEGIN
            ELSE
              BEGIN

              //"Shipment Date" := WORKDATE;

              IF ("Order Type" = "Order Type"::Kraftstoff) OR ("Order Type" = "Order Type"::"Schmierstoff/Folgemarkt") OR
                 ("Order Type" = "Order Type"::Werbematerial) THEN
                BEGIN
                 RE_KuEinr.GET;
                 DA_Liefda := TODAY + RE_KuEinr."Lieferzeitvorbel. Kraftstoffe";
                 VALIDATE("Shipment Date",DA_Liefda);

      //START WG034 - PV - 28.11.2007 - fill Requested deliv. date
                 "Requested Delivery Date" := CALCDATE('<1D>', TODAY);
                 "Latest Shipping Date"    := "Requested Delivery Date";
                 VALIDATE("Posting Date", "Requested Delivery Date");
                 VALIDATE("Document Date", "Requested Delivery Date");
      //STOP WG034 - PV - 28.11.2007 - fill Requested deliv. date

      //START WG026 - 27.11.2007 - PV - new field 84562 "Kind of Order"
                 VALIDATE("Kind of Order","Kind of Order"::"Vendor->Customer");
                 VALIDATE("Shipment Date", "Requested Delivery Date");
      //STOP WG026 - 27.11.2007 - PV - new field 84562 "Kind of Order"

                END
               ELSE
             //WZ¯1 - ENDE
                VALIDATE("Shipment Date", 0D); //AVIA-RK-070104
              END;
          //EISWZr End
          "Order Date" := WORKDATE;
        END;
      IF "Document Type" = "Document Type"::"Return Order" THEN
        "Order Date":= WORKDATE;

      IF NOT ("Document Type" IN ["Document Type"::"Blanket Order","Document Type"::Quote]) AND
         ("Posting Date" = 0D)
      THEN
        "Posting Date" := WORKDATE;

      IF "Document Date" = 0D THEN
         "Document Date" := WORKDATE;

      VALIDATE("Location Code",UserMgt.GetLocation(0,Cust."Location Code","Responsibility Center"));

      IF "Document Type" IN ["Document Type"::"Return Order","Document Type"::"Credit Memo"] THEN BEGIN
        GLSetup.GET;
        Correction := GLSetup."Mark Cr. Memos as Corrections";
      END;

      "Posting Description" := FORMAT("Document Type") + ' ' + "No.";

      Reserve := Reserve::Optional;

      IF InvtSetup.GET THEN
        VALIDATE("Outbound Whse. Handling Time",InvtSetup."Outbound Whse. Handling Time");

      "Responsibility Center" := UserMgt.GetRespCenter(0,"Responsibility Center");

      // START CDLEU - 3.4.2005 - ZJ: modification for European Union
      //START - WG - 13.06.2012 - RCH - M3599 - Fixed VAT Taxation Date
      IF NOT "Fixed VAT Taxation Date" THEN
      //STOP - WG - 13.06.2012 - RCH - M3599 - Fixed VAT Taxation Date
         "VAT Taxation Date" := "Posting Date";
      // STOP CDLEU - 3.4.2005 - ZJ: modification for European Union

      //START CDLKH7 - 01.10.2015 - PU - VAT Control Statement
      "VAT Control Statement Date" := "VAT Taxation Date";
      //STOP CDLKH7 - 01.10.2015 - PU - VAT Control Statement

      //NAV-18944+
      IF NoSeriesLoc.GET("Posting No. Series") THEN
        VALIDATE("Internal document", NoSeriesLoc."Internal Docs Nos.");
      //NAV-18944-
    END;

    PROCEDURE AssistEdit@1(OldSalesHeader@1000 : Record 36) : Boolean;
    VAR
      SalesHeader2@1001 : Record 36;
    BEGIN
      WITH SalesHeader DO BEGIN
        SalesHeader.COPY(Rec);
        SalesSetup.GET;
        TestNoSeries;
        IF NoSeriesMgt.SelectSeries(GetNoSeriesCode,OldSalesHeader."No. Series","No. Series") THEN BEGIN
          IF ("Sell-to Customer No." = '') AND ("Sell-to Contact No." = '') THEN BEGIN
            HideCreditCheckDialogue := FALSE;
            CheckCreditMaxBeforeInsert;
            HideCreditCheckDialogue := TRUE;
          END;
          NoSeriesMgt.SetSeries("No.");
          IF SalesHeader2.GET("Document Type","No.") THEN
            ERROR(Text051,LOWERCASE(FORMAT("Document Type")),"No.");
          Rec := SalesHeader;
          EXIT(TRUE);
        END;
      END;
    END;

    LOCAL PROCEDURE TestNoSeries@6() : Boolean;
    BEGIN
      CASE "Document Type" OF
        "Document Type"::Quote:
          SalesSetup.TESTFIELD("Quote Nos.");
        "Document Type"::Order:
          SalesSetup.TESTFIELD("Order Nos.");
        "Document Type"::Invoice:
          BEGIN
            SalesSetup.TESTFIELD("Invoice Nos.");
            SalesSetup.TESTFIELD("Posted Invoice Nos.");
          END;
        "Document Type"::"Return Order":
          SalesSetup.TESTFIELD("Return Order Nos.");
        "Document Type"::"Credit Memo":
          BEGIN
            SalesSetup.TESTFIELD("Credit Memo Nos.");
            SalesSetup.TESTFIELD("Posted Credit Memo Nos.");
          END;
        "Document Type"::"Blanket Order":
          SalesSetup.TESTFIELD("Blanket Order Nos.");
        "Document Type"::Advance:
           SalesSetup.TESTFIELD("Advance Nos.");
      END;
    END;

    LOCAL PROCEDURE GetNoSeriesCode@9() : Code[10];
    BEGIN
      CASE "Document Type" OF
        "Document Type"::Quote:
          EXIT(SalesSetup."Quote Nos.");
        "Document Type"::Order:
          EXIT(SalesSetup."Order Nos.");
        "Document Type"::Invoice:
          EXIT(SalesSetup."Invoice Nos.");
        "Document Type"::"Return Order":
          EXIT(SalesSetup."Return Order Nos.");
        "Document Type"::"Credit Memo":
          EXIT(SalesSetup."Credit Memo Nos.");
        "Document Type"::"Blanket Order":
          EXIT(SalesSetup."Blanket Order Nos.");
        "Document Type"::Advance:
          EXIT(SalesSetup."Advance Nos.");
      END;
    END;

    LOCAL PROCEDURE GetPostingNoSeriesCode@8() : Code[10];
    BEGIN
      IF "Document Type" IN ["Document Type"::"Return Order","Document Type"::"Credit Memo"] THEN
        EXIT(SalesSetup."Posted Credit Memo Nos.");
      EXIT(SalesSetup."Posted Invoice Nos.");
    END;

    PROCEDURE ConfirmDeletion@11() : Boolean;
    BEGIN
      SalesPost.TestDeleteHeader(Rec,SalesShptHeader,SalesInvHeader,SalesCrMemoHeader,ReturnRcptHeader);
      IF SalesShptHeader."No." <> '' THEN
        IF NOT CONFIRM(
             Text008 +
             Text009 +
             Text010,TRUE,
             SalesShptHeader."No.")
        THEN
          EXIT;
      IF SalesInvHeader."No." <> '' THEN
        IF NOT CONFIRM(
             Text011 +
             Text012 +
             Text010,TRUE,
             SalesInvHeader."No.")
        THEN
          EXIT;
      IF SalesCrMemoHeader."No." <> '' THEN
        IF NOT CONFIRM(
             Text013 +
             Text014 +
             Text010,TRUE,
             SalesCrMemoHeader."No.")
        THEN
          EXIT;
      IF ReturnRcptHeader."No." <> '' THEN
        IF NOT CONFIRM(
             Text029 +
             Text030 +
             Text010,TRUE,
             ReturnRcptHeader."No.")
        THEN
          EXIT;
      EXIT(TRUE);
    END;

    LOCAL PROCEDURE GetCust@2(CustNo@1000 : Code[20]);
    BEGIN
      IF NOT (("Document Type" = "Document Type"::Quote) AND (CustNo = '')) THEN BEGIN
        IF CustNo <> Cust."No." THEN
          Cust.GET(CustNo);
      END ELSE
        CLEAR(Cust);
    END;

    PROCEDURE SalesLinesExist@3() : Boolean;
    BEGIN
      SalesLine.RESET;
      SalesLine.SETRANGE("Document Type","Document Type");
      SalesLine.SETRANGE("Document No.","No.");
      EXIT(SalesLine.FINDFIRST);
    END;

    PROCEDURE RecreateSalesLines@4(ChangedFieldName@1000 : Text[100]);
    VAR
      SalesLineTmp@1001 : TEMPORARY Record 37;
      ItemChargeAssgntSales@1004 : Record 5809;
      TempItemChargeAssgntSales@1003 : TEMPORARY Record 5809;
      TempInteger@1006 : TEMPORARY Record 2000000026;
      ServDocReg@1005 : Record 5936;
      TempServDocReg@1007 : TEMPORARY Record 5936;
      ExtendedTextAdded@1002 : Boolean;
    BEGIN
      IF SalesLinesExist THEN BEGIN
        IF HideValidationDialog OR NOT GUIALLOWED THEN
          Confirmed := TRUE
        ELSE
          Confirmed :=
            CONFIRM(
              Text015 +
              Text004,FALSE,ChangedFieldName);
        IF Confirmed THEN BEGIN
          //DocDim.LOCKTABLE;
          //SalesLine.LOCKTABLE;
          //ItemChargeAssgntSales.LOCKTABLE;
          //ReservEntry.LOCKTABLE;
          MODIFY;

          SalesLine.RESET;
          SalesLine.SETRANGE("Document Type","Document Type");
          SalesLine.SETRANGE("Document No.","No.");
          IF SalesLine.FINDFIRST THEN BEGIN
            REPEAT
              SalesLine.TESTFIELD("Quantity Shipped",0);
              SalesLine.TESTFIELD("Quantity Invoiced",0);
              SalesLine.TESTFIELD("Return Qty. Received",0);
              SalesLine.TESTFIELD("Shipment No.",'');
              SalesLine.TESTFIELD("Return Receipt No.",'');
              SalesLine.TESTFIELD("Blanket Order No.",'');
              SalesLineTmp := SalesLine;
              IF SalesLine.Nonstock THEN BEGIN
                SalesLine.Nonstock := FALSE;
                SalesLine.MODIFY;
              END;
              SalesLineTmp.INSERT;
              RecreateReservEntry(SalesLine,0,TRUE);
              RecreateReqLine(SalesLine,0,TRUE);
            UNTIL SalesLine.NEXT = 0;

            IF "Location Code" <> xRec."Location Code" THEN
              IF NOT TempReservEntry.ISEMPTY THEN
                ERROR(Text047,FIELDCAPTION("Location Code"));

            ItemChargeAssgntSales.SETRANGE("Document Type","Document Type");
            ItemChargeAssgntSales.SETRANGE("Document No.","No.");
            IF ItemChargeAssgntSales.FINDFIRST THEN BEGIN
              REPEAT
                TempItemChargeAssgntSales.INIT;
                TempItemChargeAssgntSales := ItemChargeAssgntSales;
                TempItemChargeAssgntSales.INSERT;
              UNTIL ItemChargeAssgntSales.NEXT = 0;
              IF NOT ItemChargeAssgntSales.ISEMPTY THEN
                ItemChargeAssgntSales.DELETEALL;
            END;
            IF ("Service Mgt. Document") AND ("Document Type" = "Document Type"::Invoice) THEN BEGIN
              ServDocReg.SETCURRENTKEY("Sales Document Type","Sales Document No.");
              ServDocReg.SETRANGE("Sales Document Type",ServDocReg."Sales Document Type"::"Sales Invoice");
              ServDocReg.SETRANGE("Sales Document No.",SalesLineTmp."Document No.");
              IF ServDocReg.FINDFIRST THEN
                REPEAT
                  TempServDocReg := ServDocReg;
                UNTIL ServDocReg.NEXT = 0;
            END;
            IF NOT SalesLine.ISEMPTY THEN
              SalesLine.DELETEALL(TRUE);
            IF ("Service Mgt. Document") AND ("Document Type" = "Document Type"::Invoice) THEN BEGIN
              IF TempServDocReg.FINDFIRST THEN
                REPEAT
                  ServDocReg := TempServDocReg;
                UNTIL TempServDocReg.NEXT = 0;
              ServDocReg.INSERT;
            END;

            SalesLine.INIT;
            SalesLine."Line No." := 0;
            SalesLineTmp.FINDFIRST;
            ExtendedTextAdded := FALSE;
            SalesLine.BlockDynamicTracking(TRUE);
            REPEAT
              IF SalesLineTmp."Attached to Line No." = 0 THEN BEGIN
                SalesLine.INIT;
                SalesLine."Line No." := SalesLine."Line No." + 10000;
                SalesLine.VALIDATE(Type,SalesLineTmp.Type);
                SalesLine."Serv. Price Adjmt. Gr. Code" := SalesLineTmp."Serv. Price Adjmt. Gr. Code";
                SalesLine."Service Contract No." := SalesLineTmp."Service Contract No.";
                SalesLine."Service Order No." := SalesLineTmp."Service Order No.";
                SalesLine."Service Item No." := SalesLineTmp."Service Item No.";
                SalesLine."Appl.-to Service Entry" := SalesLineTmp."Appl.-to Service Entry";
                IF SalesLineTmp."No." = '' THEN BEGIN
                  SalesLine.VALIDATE(Description,SalesLineTmp.Description);
                  SalesLine.VALIDATE("Description 2",SalesLineTmp."Description 2");
                END ELSE BEGIN
                  SalesLine.VALIDATE("No.",SalesLineTmp."No.");
                  IF SalesLine.Type <> SalesLine.Type::" " THEN BEGIN
                    SalesLine.VALIDATE("Unit of Measure Code",SalesLineTmp."Unit of Measure Code");
                    SalesLine.VALIDATE("Variant Code",SalesLineTmp."Variant Code");
                    IF SalesLineTmp.Quantity <> 0 THEN
                      SalesLine.VALIDATE(Quantity,SalesLineTmp.Quantity);
                    SalesLine."Purchase Order No." := SalesLineTmp."Purchase Order No.";
                    SalesLine."Purch. Order Line No." := SalesLineTmp."Purch. Order Line No.";
                    SalesLine."Drop Shipment" := SalesLine."Purch. Order Line No." <> 0;
                  END;
                END;
                IF ("Service Mgt. Document") THEN BEGIN
                  IF (SalesLine.Type <> 0) AND
                     (SalesLine."No." <> '')  THEN
                    SalesLine.VALIDATE("Unit Price",SalesLineTmp."Unit Price");
                  SalesLine."Serv. Price Adjmt. Gr. Code" := SalesLineTmp."Serv. Price Adjmt. Gr. Code";
                  SalesLine."Service Contract No." := SalesLineTmp."Service Contract No.";
                  SalesLine."Service Order No." := SalesLineTmp."Service Order No.";
                  SalesLine."Service Item No." := SalesLineTmp."Service Item No.";
                  SalesLine."Appl.-to Service Entry" := SalesLineTmp."Appl.-to Service Entry";
                  SalesLine.VALIDATE(Description,SalesLineTmp.Description);
                  SalesLine.VALIDATE("Description 2",SalesLineTmp."Description 2");
                END;
                // WZ-START
                SalesLine.VALIDATE(SalesLine."Unit Price", SalesLineTmp."Unit Price");
                SalesLine."Sales Price Calculation" := SalesLineTmp."Sales Price Calculation";
                SalesLine."Sales Price Oil Trading" := SalesLineTmp."Sales Price Oil Trading";
                SalesLine."Abschlu·arbeiten"();
      //START WG019 - 24.10.2007 - JV - Sales Source Prices
                // AC 13.10.2008 Start
                //SalesLine."Transaction Time" := SalesLineTmp."Transaction Time";
                  SalesLine."TT Date" := SalesLineTmp."TT Date";
                  SalesLine."TT Time" := SalesLineTmp."TT Time";
                // AC 13.10.2008 Stop
                SalesLine."Sales Charge 1" := SalesLineTmp."Sales Charge 1";
                SalesLine."Sales Charge 2" := SalesLineTmp."Sales Charge 2";
                SalesLine."Sales Charge 3" := SalesLineTmp."Sales Charge 3";
                SalesLine."Sales Charge 1 Amount" := SalesLineTmp."Sales Charge 1 Amount";
                SalesLine."Sales Charge 2 Amount" := SalesLineTmp."Sales Charge 2 Amount";
                SalesLine."Sales Charge 3 Amount" := SalesLineTmp."Sales Charge 3 Amount";
                SalesLine.VALIDATE("Sales Source Code",SalesLineTmp."Sales Source Code");
      //STOP WG019 - 24.10.2007 - JV - Sales Source Prices
                // SalesLine.INSERT;
                SalesLine.INSERT(TRUE);
                // WZ-ENDE

                ExtendedTextAdded := FALSE;

                IF SalesLine.Type = SalesLine.Type::Item THEN BEGIN
                  ClearItemAssgntSalesFilter(TempItemChargeAssgntSales);
                  TempItemChargeAssgntSales.SETRANGE("Applies-to Doc. Type",SalesLineTmp."Document Type");
                  TempItemChargeAssgntSales.SETRANGE("Applies-to Doc. No.",SalesLineTmp."Document No.");
                  TempItemChargeAssgntSales.SETRANGE("Applies-to Doc. Line No.",SalesLineTmp."Line No.");
                  IF TempItemChargeAssgntSales.FINDFIRST THEN BEGIN
                    REPEAT
                      IF NOT TempItemChargeAssgntSales.MARK THEN BEGIN
                        TempItemChargeAssgntSales."Applies-to Doc. Line No." := SalesLine."Line No.";
                        TempItemChargeAssgntSales.Description := SalesLine.Description;
                        TempItemChargeAssgntSales.MODIFY;
                        TempItemChargeAssgntSales.MARK(TRUE);
                      END;
                    UNTIL TempItemChargeAssgntSales.NEXT = 0;
                  END;
                END;
                IF SalesLine.Type = SalesLine.Type::"Charge (Item)" THEN BEGIN
                  TempInteger.INIT;
                  TempInteger.Number := SalesLine."Line No.";
                  TempInteger.INSERT;
                END;
              END ELSE
                IF NOT ExtendedTextAdded THEN BEGIN
                  TransferExtendedText.SalesCheckIfAnyExtText(SalesLine,TRUE);
                  TransferExtendedText.InsertSalesExtText(SalesLine);
                  SalesLine.FINDLAST;
                  ExtendedTextAdded := TRUE;
                END;
              RecreateReservEntry(SalesLineTmp,SalesLine."Line No.",FALSE);
              RecreateReqLine(SalesLineTmp,SalesLine."Line No.",FALSE);
            UNTIL SalesLineTmp.NEXT = 0;

            ClearItemAssgntSalesFilter(TempItemChargeAssgntSales);
            SalesLineTmp.SETRANGE(Type,SalesLine.Type::"Charge (Item)");
            IF SalesLineTmp.FINDFIRST THEN
              REPEAT
                TempItemChargeAssgntSales.SETRANGE("Document Line No.",SalesLineTmp."Line No.");
                IF TempItemChargeAssgntSales.FINDFIRST THEN BEGIN
                  REPEAT
                    TempInteger.FINDFIRST;
                    ItemChargeAssgntSales.INIT;
                    ItemChargeAssgntSales := TempItemChargeAssgntSales;
                    ItemChargeAssgntSales."Document Line No." := TempInteger.Number;
                    ItemChargeAssgntSales.VALIDATE("Unit Cost",0);
                    ItemChargeAssgntSales.INSERT;
                  UNTIL TempItemChargeAssgntSales.NEXT = 0;
                  TempInteger.DELETE;
                END;
              UNTIL SalesLineTmp.NEXT = 0;

            SalesLineTmp.SETRANGE(Type);
            IF NOT SalesLineTmp.ISEMPTY THEN
              SalesLineTmp.DELETEALL;
            ClearItemAssgntSalesFilter(TempItemChargeAssgntSales);
            IF NOT TempItemChargeAssgntSales.ISEMPTY THEN
              TempItemChargeAssgntSales.DELETEALL;
          END;
        END ELSE
          ERROR(
            Text017,ChangedFieldName);
      END;
      SalesLine.BlockDynamicTracking(FALSE);
    END;

    PROCEDURE MessageIfSalesLinesExist@5(ChangedFieldName@1000 : Text[100]);
    BEGIN
      IF SalesLinesExist AND NOT HideValidationDialog THEN
        MESSAGE(
          Text018 +
          Text019,
          ChangedFieldName);
    END;

    PROCEDURE PriceMessageIfSalesLinesExist@7(ChangedFieldName@1000 : Text[100]);
    BEGIN
      IF SalesLinesExist AND NOT HideValidationDialog THEN
        MESSAGE(
          Text018 +
          Text020,ChangedFieldName);
    END;

    LOCAL PROCEDURE UpdateCurrencyFactor@12();
    BEGIN
      IF "Currency Code" <> '' THEN BEGIN
        IF ("Document Type" IN ["Document Type"::Quote,"Document Type"::"Blanket Order"]) AND
           ("Posting Date" = 0D)
        THEN
          CurrencyDate := WORKDATE
        ELSE
          CurrencyDate := "Posting Date";

        "Currency Factor" := CurrExchRate.ExchangeRate(CurrencyDate,"Currency Code");
      END ELSE
        "Currency Factor" := 0;
    END;

    LOCAL PROCEDURE ConfirmUpdateCurrencyFactor@13();
    BEGIN
      IF HideValidationDialog THEN
        Confirmed := TRUE
      ELSE
        Confirmed := CONFIRM(Text021,FALSE);
      IF Confirmed THEN
        VALIDATE("Currency Factor")
      ELSE
        "Currency Factor" := xRec."Currency Factor";
    END;

    PROCEDURE SetHideValidationDialog@14(NewHideValidationDialog@1000 : Boolean);
    BEGIN
      HideValidationDialog := NewHideValidationDialog;
    END;

    PROCEDURE UpdateSalesLines@15(ChangedFieldName@1000 : Text[100];AskQuestion@1001 : Boolean);
    VAR
      Question@1002 : Text[250];
      UpdateLines@1003 : Boolean;
    BEGIN
      IF SalesLinesExist AND AskQuestion THEN BEGIN
        Question := STRSUBSTNO(
          Text031 +
          Text032,ChangedFieldName);
        IF GUIALLOWED AND NOT DIALOG.CONFIRM(Question,TRUE) THEN
          EXIT
        ELSE
          UpdateLines := TRUE;
      END;
      IF SalesLinesExist THEN BEGIN
        //DocDim.LOCKTABLE;
        //SalesLine.LOCKTABLE;
        MODIFY;

        SalesLine.RESET;
        SalesLine.SETRANGE("Document Type","Document Type");
        SalesLine.SETRANGE("Document No.","No.");
        IF SalesLine.FINDFIRST THEN
          REPEAT
            CASE ChangedFieldName OF
              FIELDCAPTION("Shipment Date") :
              IF SalesLine."No." <> '' THEN
                SalesLine.VALIDATE("Shipment Date","Shipment Date");
              FIELDCAPTION("Currency Factor") :
                IF SalesLine.Type <> SalesLine.Type::" " THEN BEGIN
                  SalesLine.VALIDATE("Unit Price");
                  SalesLine.VALIDATE("Unit Cost (LCY)");
                END;
              FIELDCAPTION("Transaction Type") :
                SalesLine.VALIDATE("Transaction Type","Transaction Type");
              FIELDCAPTION("Transport Method") :
                SalesLine.VALIDATE("Transport Method","Transport Method");
              FIELDCAPTION("Exit Point") :
                SalesLine.VALIDATE("Exit Point","Exit Point");
              FIELDCAPTION(Area) :
                SalesLine.VALIDATE(Area,Area);
              FIELDCAPTION("Transaction Specification") :
                SalesLine.VALIDATE("Transaction Specification","Transaction Specification");
              FIELDCAPTION("Shipping Agent Code") :
                SalesLine.VALIDATE("Shipping Agent Code","Shipping Agent Code");
              FIELDCAPTION("Shipping Agent Service Code") :
                IF SalesLine."No." <> '' THEN
                  SalesLine.VALIDATE("Shipping Agent Service Code","Shipping Agent Service Code");
              FIELDCAPTION("Shipping Time") :
                IF SalesLine."No." <> '' THEN
                  SalesLine.VALIDATE("Shipping Time","Shipping Time");
              FIELDCAPTION("Requested Delivery Date") :
                IF SalesLine."No." <> '' THEN
                  SalesLine.VALIDATE("Requested Delivery Date","Requested Delivery Date");
              FIELDCAPTION("Promised Delivery Date") :
                IF SalesLine."No." <> '' THEN
                  SalesLine.VALIDATE("Promised Delivery Date","Promised Delivery Date");
              FIELDCAPTION("Outbound Whse. Handling Time") :
                IF SalesLine."No." <> '' THEN
                  SalesLine.VALIDATE("Outbound Whse. Handling Time","Outbound Whse. Handling Time");

      //START WG037 - PV - 16.12.2007 - Freight Calculation
              FIELDCAPTION("Freight Table") :
                IF SalesLine."No." <> '' THEN
                  SalesLine.VALIDATE("Freight Table","Freight Table");
      //STOP WG037 - PV - 16.12.2007 - Freight Calculation

              //EISWZR Start
              //* Verkaufszeilen aktualisieren (Marge)
              //* *******************************************************************************
              FIELDCAPTION("Margin (LCY)") :
                IF (SalesLine.Type = SalesLine.Type::Item) AND
                 (SalesLine."Kind of Item" = SalesLine."Kind of Item"::FlÅssig) THEN BEGIN
                  SalesLine.VALIDATE(SalesLine."Margin (LCY)","Margin (LCY)");
                  SalesLine.MODIFY;
                END;
              FIELDCAPTION("Freight Rate (LCY)") :
                //* *** Fracht durch ggf. geÑnderte Liefermenge / Beladestelle nochmals auf Zeilen zuweisen ...
                IF (SalesLine.Type = SalesLine.Type::Item) AND
                (SalesLine."Kind of Item" = SalesLine."Kind of Item"::FlÅssig) THEN BEGIN
                  SalesLine.VALIDATE(SalesLine."Freight Rate (LCY)","Freight Rate (LCY)");
                  SalesLine.MODIFY;
                END;
              FIELDCAPTION("Frachtsatz (Manuell)") :
                //* *** Fracht durch ggf. geÑnderte Liefermenge / Beladestelle nochmals auf Zeilen zuweisen ...
                IF (SalesLine.Type = SalesLine.Type::Item) AND
                (SalesLine."Kind of Item" = SalesLine."Kind of Item"::FlÅssig) THEN BEGIN
                  SalesLine.VALIDATE(SalesLine."Freight Rate (LCY)","Frachtsatz (Manuell)");
                  SalesLine.MODIFY;
                END;

              //* <<<<< WZ-MINERAL **************************************************************
              //EISWZR End
      // - TESSOL1.00:GB¯1 --- start
              FIELDCAPTION(Geschaftsbereich) :
                IF SalesLine."No." <> '' THEN
                  SalesLine.VALIDATE(Geschaftsbereich,Geschaftsbereich);
      // - TESSOL1.00:GB¯1 --- Ende

            END;
            SalesLineReserve.AssignForPlanning(SalesLine);
            SalesLine.MODIFY(TRUE);
          UNTIL SalesLine.NEXT = 0;
      END;
    END;

    PROCEDURE CreateDim@16(Type1@1000 : Integer;No1@1001 : Code[20];Type2@1002 : Integer;No2@1003 : Code[20];Type3@1004 : Integer;No3@1005 : Code[20];Type4@1006 : Integer;No4@1007 : Code[20];Type5@1008 : Integer;No5@1009 : Code[20];Type6@1014 : Integer;No6@1013 : Code[20]);
    VAR
      SourceCodeSetup@1010 : Record 242;
      TableID@1011 : ARRAY [10] OF Integer;
      No@1012 : ARRAY [10] OF Code[20];
    BEGIN
      //WG003 VP 9.8.2007 - new parameters: Type7, No7
      //      Mantis 3688 - VP 15.1.2013 - parameters removed

      SourceCodeSetup.GET;
      TableID[1] := Type1;
      No[1] := No1;
      TableID[2] := Type2;
      No[2] := No2;
      TableID[3] := Type3;
      No[3] := No3;
      TableID[4] := Type4;
      No[4] := No4;
      TableID[5] := Type5;
      No[5] := No5;
      TableID[6] := Type6;
      No[6] := No6;
      //START Mantis 3688 VP 15.1.2013 function removed
      ////START WG003 VP 9.8.2007
      //TableID[7] := Type7;
      //No[7] := No7;
      ////STOP WG003 VP 9.8.2007
      //STOP Mantis 3688 VP 15.1.2013 function removed

      //EISWZR Start
      // KS-START
      IF (("Order Type" <> "Order Type"::"Schmierstoff/Folgemarkt")) THEN
      //   ("Order Type" <> "Order Type"::Heizîl) or
      //   ("Order Type" <> "Order Type"::kraftstoff)) then
        BEGIN
      // KS-ENDE
      //EISWZR End

      "Shortcut Dimension 1 Code" := '';
      "Shortcut Dimension 2 Code" := '';
      DimMgt.GetDefaultDim(
        TableID,No,SourceCodeSetup.Sales,
        "Shortcut Dimension 1 Code","Shortcut Dimension 2 Code");
      IF "No." <> '' THEN
        DimMgt.UpdateDocDefaultDim(
          DATABASE::"Sales Header","Document Type","No.",0,
          "Shortcut Dimension 1 Code","Shortcut Dimension 2 Code");
      //EISWZR Start
      // KS-START
        END;
      // KS-ENDE
      //EISWZR End

      //START WG002 - 19.09.2007 - PV - Generate Dimension Value ORDER while creating Sales Order
      //+WAG - 30.12.2013 - AS - M0006995
      //CreateORDERdim;
      //-WAG - 30.12.2013 - AS - M0006995
      //STOP WG002 - 19.09.2007 - PV - Generate Dimension Value ORDER while creating Sales Order
    END;

    PROCEDURE ValidateShortcutDimCode@19(FieldNumber@1000 : Integer;VAR ShortcutDimCode@1001 : Code[20]);
    BEGIN
      DimMgt.ValidateDimValueCode(FieldNumber,ShortcutDimCode);
      IF "No." <> '' THEN BEGIN
        DimMgt.SaveDocDim(
          DATABASE::"Sales Header","Document Type","No.",0,FieldNumber,ShortcutDimCode);
        // *** START MIN¯ wz.ak 16.11.2006
        RE_SalesHeader := Rec;
        GET("Document Type","No.");
        TRANSFERFIELDS(RE_SalesHeader,FALSE);
        // *** START MIN¯ wz.ak 16.11.2006
        MODIFY;
      END ELSE
        DimMgt.SaveTempDim(FieldNumber,ShortcutDimCode);
    END;

    PROCEDURE ShippedSalesLinesExist@22() : Boolean;
    BEGIN
      SalesLine.RESET;
      SalesLine.SETRANGE("Document Type","Document Type");
      SalesLine.SETRANGE("Document No.","No.");
      SalesLine.SETFILTER("Quantity Shipped",'<>0');
      EXIT(SalesLine.FINDFIRST);
    END;

    PROCEDURE ReturnReceiptExist@5800() : Boolean;
    BEGIN
      SalesLine.RESET;
      SalesLine.SETRANGE("Document Type","Document Type");
      SalesLine.SETRANGE("Document No.","No.");
      SalesLine.SETFILTER("Return Qty. Received",'<>0');
      EXIT(SalesLine.FINDFIRST);
    END;

    LOCAL PROCEDURE DeleteSalesLines@20();
    BEGIN
      IF SalesLine.FINDFIRST THEN
        REPEAT
          SalesLine.SuspendStatusCheck(TRUE);
          SalesLine.DELETE(TRUE);
        UNTIL SalesLine.NEXT = 0;
    END;

    LOCAL PROCEDURE ClearItemAssgntSalesFilter@17(VAR TempItemChargeAssgntSales@1000 : Record 5809);
    BEGIN
      TempItemChargeAssgntSales.SETRANGE("Document Line No.");
      TempItemChargeAssgntSales.SETRANGE("Applies-to Doc. Type");
      TempItemChargeAssgntSales.SETRANGE("Applies-to Doc. No.");
      TempItemChargeAssgntSales.SETRANGE("Applies-to Doc. Line No.");
    END;

    PROCEDURE CheckCustomerCreated@18(Prompt@1000 : Boolean) : Boolean;
    VAR
      Cont@1001 : Record 5050;
    BEGIN
      IF ("Bill-to Customer No." <> '') AND ("Sell-to Customer No." <> '') THEN
        EXIT(TRUE);

      IF Prompt THEN
        IF NOT CONFIRM(Text035,TRUE) THEN
          EXIT(FALSE);

      IF "Sell-to Customer No." = '' THEN BEGIN
        TESTFIELD("Sell-to Contact No.");
        TESTFIELD("Sell-to Customer Template Code");
        Cont.GET("Sell-to Contact No.");
        Cont.CreateCustomer("Sell-to Customer Template Code");
        COMMIT;
        GET("Document Type"::Quote,"No.");
      END;

      IF "Bill-to Customer No." = '' THEN BEGIN
        TESTFIELD("Bill-to Contact No.");
        TESTFIELD("Bill-to Customer Template Code");
        Cont.GET("Bill-to Contact No.");
        Cont.CreateCustomer("Bill-to Customer Template Code");
        COMMIT;
        GET("Document Type"::Quote,"No.");
      END;

      EXIT(("Bill-to Customer No." <> '') AND ("Sell-to Customer No." <> ''));
    END;

    PROCEDURE RecreateReservEntry@21(OldSalesLine@1000 : Record 37;NewSourceRefNo@1001 : Integer;ToTemp@1002 : Boolean);
    BEGIN
      IF ToTemp THEN BEGIN
        CLEAR(ReservEntry);
        ReservEntry.SETCURRENTKEY("Source ID","Source Ref. No.","Source Type","Source Subtype");
        ReservEntry.SETRANGE("Source ID",OldSalesLine."Document No.");
        ReservEntry.SETRANGE("Source Ref. No.",OldSalesLine."Line No.");
        ReservEntry.SETRANGE("Source Type",DATABASE::"Sales Line");
        ReservEntry.SETRANGE("Source Subtype",OldSalesLine."Document Type");
        IF ReservEntry.FINDFIRST THEN
          REPEAT
            TempReservEntry := ReservEntry;
            TempReservEntry.INSERT;
          UNTIL ReservEntry.NEXT = 0;
        IF NOT ReservEntry.ISEMPTY THEN
          ReservEntry.DELETEALL;
      END ELSE BEGIN
        CLEAR(TempReservEntry);
        TempReservEntry.SETCURRENTKEY("Source ID","Source Ref. No.","Source Type","Source Subtype");
        TempReservEntry.SETRANGE("Source Type",DATABASE::"Sales Line");
        TempReservEntry.SETRANGE("Source Subtype",OldSalesLine."Document Type");
        TempReservEntry.SETRANGE("Source ID",OldSalesLine."Document No.");
        TempReservEntry.SETRANGE("Source Ref. No.",OldSalesLine."Line No.");
        IF TempReservEntry.FINDFIRST THEN
          REPEAT
            ReservEntry := TempReservEntry;
            ReservEntry."Source Ref. No." := NewSourceRefNo;
            ReservEntry.INSERT;
          UNTIL TempReservEntry.NEXT = 0;
        IF NOT TempReservEntry.ISEMPTY THEN
          TempReservEntry.DELETEALL;
      END;
    END;

    PROCEDURE RecreateReqLine@33(OldSalesLine@1000 : Record 37;NewSourceRefNo@1001 : Integer;ToTemp@1002 : Boolean);
    VAR
      ReqLine@1003 : Record 246;
    BEGIN
      IF ToTemp THEN BEGIN
        ReqLine.SETCURRENTKEY("Order Promising ID","Order Promising Line ID","Order Promising Line No.");
        ReqLine.SETRANGE("Order Promising ID",OldSalesLine."Document No.");
        ReqLine.SETRANGE("Order Promising Line ID",OldSalesLine."Line No.");
        IF ReqLine.FINDFIRST THEN
          REPEAT
            TempReqLine := ReqLine;
            TempReqLine.INSERT;
          UNTIL ReqLine.NEXT = 0;
        IF NOT ReqLine.ISEMPTY THEN
          ReqLine.DELETEALL;
      END ELSE BEGIN
        CLEAR(TempReqLine);
        TempReqLine.SETCURRENTKEY("Order Promising ID","Order Promising Line ID","Order Promising Line No.");
        TempReqLine.SETRANGE("Order Promising ID",OldSalesLine."Document No.");
        TempReqLine.SETRANGE("Order Promising Line ID",OldSalesLine."Line No.");
        IF TempReqLine.FINDFIRST THEN
          REPEAT
            ReqLine := TempReqLine;
            ReqLine."Order Promising Line ID" := NewSourceRefNo;
            ReqLine.INSERT;
          UNTIL TempReqLine.NEXT = 0;
        IF NOT TempReqLine.ISEMPTY THEN
          TempReqLine.DELETEALL;
      END;
    END;

    PROCEDURE UpdateSellToCont@24(CustomerNo@1000 : Code[20]);
    VAR
      ContBusRel@1003 : Record 5054;
      Cust@1004 : Record 18;
    BEGIN
      IF Cust.GET(CustomerNo) THEN BEGIN
        IF Cust."Primary Contact No." <> '' THEN
          "Sell-to Contact No." := Cust."Primary Contact No."
        ELSE BEGIN
          ContBusRel.RESET;
          ContBusRel.SETCURRENTKEY("Link to Table","No.");
          ContBusRel.SETRANGE("Link to Table",ContBusRel."Link to Table"::Customer);
          ContBusRel.SETRANGE("No.","Sell-to Customer No.");
          IF ContBusRel.FINDFIRST THEN
            "Sell-to Contact No." := ContBusRel."Contact No.";
        END;
        "Sell-to Contact" := Cust.Contact;
      END;
    END;

    PROCEDURE UpdateBillToCont@27(CustomerNo@1000 : Code[20]);
    VAR
      ContBusRel@1003 : Record 5054;
      Cust@1001 : Record 18;
    BEGIN
      IF Cust.GET(CustomerNo) THEN BEGIN
        IF Cust."Primary Contact No." <> '' THEN
          "Bill-to Contact No." := Cust."Primary Contact No."
        ELSE BEGIN
          ContBusRel.RESET;
          ContBusRel.SETCURRENTKEY("Link to Table","No.");
          ContBusRel.SETRANGE("Link to Table",ContBusRel."Link to Table"::Customer);
          ContBusRel.SETRANGE("No.","Bill-to Customer No.");
          IF ContBusRel.FINDFIRST THEN
            "Bill-to Contact No." := ContBusRel."Contact No.";
        END;
        "Bill-to Contact" := Cust.Contact;
      END;
    END;

    PROCEDURE UpdateSellToCust@25(ContactNo@1002 : Code[20]);
    VAR
      ContBusinessRelation@1007 : Record 5054;
      Customer@1006 : Record 18;
      Cont@1005 : Record 5050;
      CustTemplate@1004 : Record 5105;
      ContComp@1003 : Record 5050;
    BEGIN
      IF Cont.GET(ContactNo) THEN
        "Sell-to Contact No." := Cont."No."
      ELSE BEGIN
        "Sell-to Contact" := '';
        EXIT;
      END;

      ContBusinessRelation.RESET;
      ContBusinessRelation.SETCURRENTKEY("Link to Table","Contact No.");
      ContBusinessRelation.SETRANGE("Link to Table",ContBusinessRelation."Link to Table"::Customer);
      ContBusinessRelation.SETRANGE("Contact No.",Cont."Company No.");
      IF ContBusinessRelation.FINDFIRST THEN BEGIN
        IF ("Sell-to Customer No." <> '') AND
           ("Sell-to Customer No." <> ContBusinessRelation."No.")
        THEN
          ERROR(Text037,Cont."No.",Cont.Name,"Sell-to Customer No.")
        ELSE IF "Sell-to Customer No." = '' THEN BEGIN
          SkipSellToContact := TRUE;
          VALIDATE("Sell-to Customer No.",ContBusinessRelation."No.");
          SkipSellToContact := FALSE;
        END;
      END ELSE BEGIN
        IF "Document Type" = "Document Type"::Quote THEN BEGIN
          Cont.TESTFIELD("Company No.");
          ContComp.GET(Cont."Company No.");
          "Sell-to Customer Name" := ContComp."Company Name";
          "Sell-to Customer Name 2" := ContComp."Name 2";
          "Ship-to Name" := ContComp."Company Name";
          "Ship-to Name 2" := ContComp."Name 2";
          "Ship-to Address" := ContComp.Address;
          "Ship-to Address 2" := ContComp."Address 2";
          "Ship-to City" := ContComp.City;
          "Ship-to Post Code" := ContComp."Post Code";
          "Ship-to County" := ContComp.County;
          VALIDATE("Ship-to Country Code",ContComp."Country Code");
          IF ("Sell-to Customer Template Code" = '') AND (NOT CustTemplate.ISEMPTY) THEN
            VALIDATE("Sell-to Customer Template Code",Cont.FindCustomerTemplate);
        END ELSE
          ERROR(Text039,Cont."No.",Cont.Name);
      END;

      IF Cont.Type = Cont.Type::Person THEN
        "Sell-to Contact" := Cont.Name
      ELSE
        IF Customer.GET("Sell-to Customer No.") THEN
          "Sell-to Contact" := Customer.Contact
        ELSE
          "Sell-to Contact" := '';

      IF "Document Type" = "Document Type"::Quote THEN BEGIN
        IF (Customer.GET("Sell-to Customer No.") OR Customer.GET(ContBusinessRelation."No."))  THEN BEGIN
          IF (Customer."Copy Sell-to Addr. to Qte From" = Customer."Copy Sell-to Addr. to Qte From"::Company) THEN BEGIN
            Cont.TESTFIELD("Company No.");
            Cont.GET(Cont."Company No.");
          END;
        END ELSE BEGIN
          Cont.TESTFIELD("Company No.");
          Cont.GET(Cont."Company No.");
      END;
        "Sell-to Address" := Cont.Address;
        "Sell-to Address 2" := Cont."Address 2";
        "Sell-to City" := Cont.City;
        "Sell-to Post Code" := Cont."Post Code";
        "Sell-to County" := Cont.County;
        "Sell-to Country Code" := Cont."Country Code";
      END;
      IF ("Sell-to Customer No." = "Bill-to Customer No.") OR
         ("Bill-to Customer No." = '')
      THEN
        VALIDATE("Bill-to Contact No.","Sell-to Contact No.");
    END;

    PROCEDURE UpdateBillToCust@26(ContactNo@1000 : Code[20]);
    VAR
      ContBusinessRelation@1005 : Record 5054;
      Cust@1004 : Record 18;
      Cont@1003 : Record 5050;
      CustTemplate@1002 : Record 5105;
      ContComp@1001 : Record 5050;
    BEGIN
      IF Cont.GET(ContactNo) THEN BEGIN
        "Bill-to Contact No." := Cont."No.";
        IF Cont.Type = Cont.Type::Person THEN
          "Bill-to Contact" := Cont.Name
        ELSE
          IF Cust.GET("Bill-to Customer No.") THEN
            "Bill-to Contact" := Cust.Contact
          ELSE
            "Bill-to Contact" := '';
      END ELSE BEGIN
          "Bill-to Contact" := '';
          EXIT;
        END;

      ContBusinessRelation.RESET;
      ContBusinessRelation.SETCURRENTKEY("Link to Table","Contact No.");
      ContBusinessRelation.SETRANGE("Link to Table",ContBusinessRelation."Link to Table"::Customer);
      ContBusinessRelation.SETRANGE("Contact No.",Cont."Company No.");
      IF ContBusinessRelation.FINDFIRST THEN BEGIN
        IF "Bill-to Customer No." = '' THEN BEGIN
          SkipBillToContact := TRUE;
          VALIDATE("Bill-to Customer No.",ContBusinessRelation."No.");
          SkipBillToContact := FALSE;
          "Bill-to Customer Template Code" := '';
        END ELSE
          IF "Bill-to Customer No." <> ContBusinessRelation."No." THEN
            ERROR(Text037,Cont."No.",Cont.Name,"Bill-to Customer No.");
      END ELSE BEGIN
        IF "Document Type" = "Document Type"::Quote THEN BEGIN
          Cont.TESTFIELD("Company No.");
          ContComp.GET(Cont."Company No.");
          "Bill-to Name" := ContComp."Company Name";
          "Bill-to Name 2" := ContComp."Name 2";
          "Bill-to Address" := ContComp.Address;
          "Bill-to Address 2" := ContComp."Address 2";
          "Bill-to City" := ContComp.City;
          "Bill-to Post Code" := ContComp."Post Code";
          "Bill-to County" := ContComp.County;
          "Bill-to Country Code" := ContComp."Country Code";
          "VAT Registration No." := ContComp."VAT Registration No.";

      // START CDLS1 - 24.10.2005 - MV - added code in triggers
          "VAT Reg. No. SK" := ContComp."VAT Reg. No. SK";
      // STOP CDLS1 - 24.10.2005 - MV - added code in triggers

          "Registration No." := ContComp."Registration No.";
          VALIDATE("Currency Code",ContComp."Currency Code");
          "Language Code" := ContComp."Language Code";
          IF ("Bill-to Customer Template Code" = '') AND (NOT CustTemplate.ISEMPTY) THEN
            VALIDATE("Bill-to Customer Template Code",Cont.FindCustomerTemplate);
        END ELSE
          ERROR(Text039,Cont."No.",Cont.Name);
      END;
    END;

    PROCEDURE GetShippingTime@23(CalledByFieldNo@1000 : Integer);
    BEGIN
      IF (CalledByFieldNo <> CurrFieldNo) AND (CurrFieldNo <> 0) THEN
        EXIT;

      IF ShippingAgentService.GET("Shipping Agent Code","Shipping Agent Service Code") THEN
        "Shipping Time" := ShippingAgentService."Shipping Time"
      ELSE BEGIN
        GetCust("Sell-to Customer No.");
        "Shipping Time" := Cust."Shipping Time"
      END;
      IF NOT (CalledByFieldNo IN [FIELDNO("Shipping Agent Code"),FIELDNO("Shipping Agent Service Code")]) THEN
        VALIDATE("Shipping Time");
    END;

    PROCEDURE CheckCreditMaxBeforeInsert@28();
    VAR
      SalesHeader@1001 : Record 36;
      ContBusinessRelation@1002 : Record 5054;
      Cont@1003 : Record 5050;
      CustCheckCreditLimit@1000 : Codeunit 312;
    BEGIN
      IF HideCreditCheckDialogue THEN
        EXIT;
      IF GETFILTER("Sell-to Customer No.") <> '' THEN BEGIN
        IF GETRANGEMIN("Sell-to Customer No.") = GETRANGEMAX("Sell-to Customer No.") THEN BEGIN
          SalesHeader."Bill-to Customer No." := GETRANGEMIN("Sell-to Customer No.");
          CustCheckCreditLimit.SalesHeaderCheck(SalesHeader);
        END
      END ELSE
        IF GETFILTER("Sell-to Contact No.") <> '' THEN
          IF GETRANGEMIN("Sell-to Contact No.") = GETRANGEMAX("Sell-to Contact No.") THEN BEGIN
            Cont.GET(GETRANGEMIN("Sell-to Contact No."));
            ContBusinessRelation.RESET;
            ContBusinessRelation.SETCURRENTKEY("Link to Table","No.");
            ContBusinessRelation.SETRANGE("Link to Table",ContBusinessRelation."Link to Table"::Customer);
            ContBusinessRelation.SETRANGE("Contact No.",Cont."Company No.");
            IF ContBusinessRelation.FINDFIRST THEN BEGIN
              SalesHeader."Bill-to Customer No." := ContBusinessRelation."No.";
              CustCheckCreditLimit.SalesHeaderCheck(SalesHeader);
            END;
          END;
    END;

    PROCEDURE CreateInvtPutAwayPick@29();
    VAR
      WhseRequest@1000 : Record 5765;
    BEGIN
      TESTFIELD(Status,Status::Released);

      WhseRequest.RESET;
      WhseRequest.SETCURRENTKEY("Source Document","Source No.");
      CASE "Document Type" OF
        "Document Type"::Order:
          WhseRequest.SETRANGE("Source Document",WhseRequest."Source Document"::"Sales Order");
        "Document Type"::"Return Order":
          WhseRequest.SETRANGE("Source Document",WhseRequest."Source Document"::"Sales Return Order");
      END;
      WhseRequest.SETRANGE("Source No.","No.");
      REPORT.RUNMODAL(REPORT::"Create Invt. Put-away / Pick",TRUE,FALSE,WhseRequest);
    END;

    PROCEDURE CreateTodo@30();
    VAR
      Todo@1000 : TEMPORARY Record 5080;
    BEGIN
      TESTFIELD("Sell-to Contact No.");

      IF NOT Todo.ISEMPTY THEN
        Todo.DELETEALL;
      Todo.INIT;
      Todo.VALIDATE("Contact No.", "Sell-to Contact No.");
      Todo.SETRANGE("Contact No.","Sell-to Contact No.");
      IF "Salesperson Code" <> '' THEN BEGIN
        Todo."Salesperson Code" := "Salesperson Code";
        Todo.SETRANGE("Salesperson Code","Salesperson Code");
      END;
      IF "Campaign No." <> '' THEN BEGIN
        Todo."Campaign No." := "Campaign No.";
        Todo.SETRANGE("Campaign No.","Campaign No.");
      END;
      Todo.Duration := 1440 * 1000 * 60;
      Todo.Date := TODAY;
      Todo.INSERT;
      FORM.RUNMODAL(FORM::"Create To-do",Todo);
    END;

    LOCAL PROCEDURE UpdateShipToAddress@31();
    BEGIN
      IF "Document Type" IN ["Document Type"::"Return Order", "Document Type"::"Credit Memo"] THEN BEGIN
        IF ("Location Code" <> '') THEN BEGIN
          Location.GET("Location Code");
          "Ship-to Name" := Location.Name;
          "Ship-to Name 2" := Location."Name 2";
          "Ship-to Address" := Location.Address;
          "Ship-to Address 2" := Location."Address 2";
          "Ship-to City" := Location.City;
          "Ship-to Post Code" := Location."Post Code";
          "Ship-to County" := Location.County;
          "Ship-to Country Code" := Location."Country Code";
          "Ship-to Contact" := Location.Contact;
        END ELSE BEGIN
          CompanyInfo.GET;
          "Ship-to Code" := '';
          "Ship-to Name" := CompanyInfo."Ship-to Name";
          "Ship-to Name 2" := CompanyInfo."Ship-to Name 2";
          "Ship-to Address" := CompanyInfo."Ship-to Address";
          "Ship-to Address 2" := CompanyInfo."Ship-to Address 2";
          "Ship-to City" := CompanyInfo."Ship-to City";
          "Ship-to Post Code" := CompanyInfo."Ship-to Post Code";
          "Ship-to County" := CompanyInfo."Ship-to County";
          "Ship-to Country Code" := CompanyInfo."Ship-to Country Code";
          "Ship-to Contact" := CompanyInfo."Ship-to Contact";
        END;
        "VAT Country Code" := "Sell-to Country Code";
      END;
    END;

    PROCEDURE ShowDocDim@32();
    VAR
      DocDim@1000 : Record 357;
      DocDims@1001 : Form 546;
    BEGIN
      DocDim.SETRANGE("Table ID",DATABASE::"Sales Header");
      DocDim.SETRANGE("Document Type","Document Type");
      DocDim.SETRANGE("Document No.","No.");
      DocDim.SETRANGE("Line No.",0);
      DocDims.SETTABLEVIEW(DocDim);
      DocDims.RUNMODAL;
      GET("Document Type","No.");
    END;

    PROCEDURE CheckLocation@34(ShowError@1002 : Boolean) : Boolean;
    VAR
      SalesLine@1000 : Record 37;
      SalesLine2@1001 : Record 37;
    BEGIN
      IF NOT("Shipping Advice" = "Shipping Advice"::Complete) THEN
        EXIT(FALSE);

      SalesLine.SETRANGE("Document Type","Document Type");
      SalesLine.SETRANGE("Document No.","No.");
      SalesLine.SETRANGE(Type,SalesLine.Type::Item);
      IF SalesLine.FINDFIRST THEN BEGIN
        SalesLine2.COPYFILTERS(SalesLine);
        SalesLine2.SETCURRENTKEY("Document Type","Document No.","Location Code");
        SalesLine2.SETFILTER("Location Code",'<> %1',SalesLine."Location Code");
        IF SalesLine2.FINDFIRST THEN BEGIN
          IF ShowError THEN
            ERROR(Text050,FIELDCAPTION("Shipping Advice"),"Shipping Advice","No.",SalesLine.Type);
          EXIT(TRUE);
        END;
      END;
    END;

    PROCEDURE SetAmountToApply@35(AppliesToDocNo@1000 : Code[20];CustomerNo@1001 : Code[20]);
    VAR
      CustLedgEntry@1002 : Record 21;
    BEGIN
      CustLedgEntry.SETCURRENTKEY("Document No.","Document Type","Customer No.");
      CustLedgEntry.SETRANGE("Document No.",AppliesToDocNo);
      CustLedgEntry.SETRANGE("Customer No.",CustomerNo);
      CustLedgEntry.SETRANGE(Open,TRUE);
      IF CustLedgEntry.FINDFIRST THEN BEGIN
        IF CustLedgEntry."Amount to Apply" = 0 THEN  BEGIN
          CustLedgEntry.CALCFIELDS("Remaining Amount");
          CustLedgEntry."Amount to Apply" := CustLedgEntry."Remaining Amount";
        END ELSE
          CustLedgEntry."Amount to Apply" := 0;
        CODEUNIT.RUN(CODEUNIT::"Cust. Entry-Edit",CustLedgEntry);
      END;
    END;

    PROCEDURE "--CDL-----"@1000000001();
    BEGIN
    END;

    PROCEDURE CheckAdvCurrency@1000000000(Header@1000000001 : Record 36);
    VAR
      lAdvLink@1000000000 : Record 88911;
    BEGIN
      // START CDLZA - 5.2.2007 - ZJ: new function
      WITH Header DO
      BEGIN
        lAdvLink.SETRANGE("Link Type",lAdvLink."Link Type"::Sale);
        lAdvLink.SETRANGE(Posted,FALSE);
        lAdvLink.SETRANGE("Document Type",Header."Document Type");
        lAdvLink.SETRANGE("Document No.",Header."No.");
        IF lAdvLink.FINDFIRST THEN
        REPEAT
          lAdvLink.CheckDocumentCurrency(lAdvLink);
        UNTIL lAdvLink.NEXT = 0;
      END;
      // STOP CDLZA - 5.2.2007 - ZJ:
    END;

    PROCEDURE SellToAdressH@1220015(pCustomer@1220000 : Record 18;pVATTaxDate@1220001 : Date);
    VAR
      lrecHistoryAdress@1220002 : Record 84749;
    BEGIN

      //START - WG - 07.06.2012 - RCH - M3959 - Customer Adress History
      IF pVATTaxDate <> 0D THEN BEGIN
         lrecHistoryAdress.RESET;
         lrecHistoryAdress.SETRANGE("No.",pCustomer."No.");
         lrecHistoryAdress.SETFILTER("Valid To",'>%1',pVATTaxDate);
         IF lrecHistoryAdress.FINDFIRST THEN BEGIN
            "Sell-to Customer Name" := lrecHistoryAdress.Name;
            "Sell-to Customer Name 2" := lrecHistoryAdress."Name 2";
            "Sell-to Address" := lrecHistoryAdress.Address;
            "Sell-to Address 2" := lrecHistoryAdress."Address 2";
            "Sell-to City" := lrecHistoryAdress.City;
            "Sell-to Country Code" := lrecHistoryAdress."Country Code";
            "Sell-to Post Code" := lrecHistoryAdress."Post Code";
      //START - WG - 27.07.2012 - RCH - M3959 - Customer Adress History
            END
         ELSE BEGIN
            "Sell-to Customer Name" := pCustomer.Name;
            "Sell-to Customer Name 2" := pCustomer."Name 2";
            "Sell-to Address" := pCustomer.Address;
            "Sell-to Address 2" := pCustomer."Address 2";
            "Sell-to City" := pCustomer.City;
            "Sell-to Country Code" := pCustomer."Country Code";
            "Sell-to Post Code" := pCustomer."Post Code";
            END;
         END
      ELSE BEGIN
         "Sell-to Customer Name" := pCustomer.Name;
         "Sell-to Customer Name 2" := pCustomer."Name 2";
         "Sell-to Address" := pCustomer.Address;
         "Sell-to Address 2" := pCustomer."Address 2";
         "Sell-to City" := pCustomer.City;
         "Sell-to Country Code" := pCustomer."Country Code";
         "Sell-to Post Code" := pCustomer."Post Code";
         END;
      //STOP - WG - 27.07.2012 - RCH - M3959 - Customer Adress History
      //STOP - WG - 07.06.2012 - RCH - M3959 - Customer Adress History
    END;

    PROCEDURE BillToAdressH@1220016(pCustomer@1220001 : Record 18;pVATTaxDate@1220000 : Date);
    VAR
      lrecHistoryAdress@1220002 : Record 84749;
    BEGIN

      //START - WG - 07.06.2012 - RCH - M3959 - Customer Adress History
      IF pVATTaxDate <> 0D THEN BEGIN
         lrecHistoryAdress.RESET;
         lrecHistoryAdress.SETRANGE("No.",pCustomer."No.");
         lrecHistoryAdress.SETFILTER("Valid To",'>%1',pVATTaxDate);
         IF lrecHistoryAdress.FINDFIRST THEN BEGIN
            "Bill-to Name" := lrecHistoryAdress.Name;
            "Bill-to Name 2" := lrecHistoryAdress."Name 2";
            "Bill-to Address" := lrecHistoryAdress.Address;
            "Bill-to Address 2" := lrecHistoryAdress."Address 2";
            "Bill-to City" := lrecHistoryAdress.City;
            "Bill-to Country Code" := lrecHistoryAdress."Country Code";
            "Bill-to Post Code" := lrecHistoryAdress."Post Code";
            "VAT Registration No." := lrecHistoryAdress."VAT Registration No.";
            "Registration No." := lrecHistoryAdress."Registration No.";
            "VAT Reg. No. SK" := lrecHistoryAdress."VAT Reg. No. SK";
      //START - WG - 29.01.2013 - MP - repair functionality Customer Adress History
      ////START - WG - 27.07.2012 - RCH - M3959 - Customer Adress History
      //      END
      //   ELSE BEGIN
      //      "Sell-to Customer Name" := pCustomer.Name;
      //      "Sell-to Customer Name 2" := pCustomer."Name 2";
      //      "Sell-to Address" := pCustomer.Address;
      //      "Sell-to Address 2" := pCustomer."Address 2";
      //      "Sell-to City" := pCustomer.City;
      //      "Sell-to Country Code" := pCustomer."Country Code";
      //      "Sell-to Post Code" := pCustomer."Post Code";
      //      END;
      //   END
      //ELSE BEGIN
      //   "Sell-to Customer Name" := pCustomer.Name;
      //   "Sell-to Customer Name 2" := pCustomer."Name 2";
      //   "Sell-to Address" := pCustomer.Address;
      //   "Sell-to Address 2" := pCustomer."Address 2";
      //   "Sell-to City" := pCustomer.City;
      //   "Sell-to Country Code" := pCustomer."Country Code";
      //   "Sell-to Post Code" := pCustomer."Post Code";
      //   END;
      ////STOP - WG - 27.07.2012 - RCH - M3959 - Customer Adress History
        END ELSE BEGIN
          "Bill-to Name" := pCustomer.Name;
          "Bill-to Name 2" := pCustomer."Name 2";
          "Bill-to Address" := pCustomer.Address;
          "Bill-to Address 2" := pCustomer."Address 2";
          "Bill-to City" := pCustomer.City;
          "Bill-to Country Code" := pCustomer."Country Code";
          "Bill-to Post Code" := pCustomer."Post Code";
        END;
      END ELSE BEGIN
        "Bill-to Name" := pCustomer.Name;
        "Bill-to Name 2" := pCustomer."Name 2";
        "Bill-to Address" := pCustomer.Address;
        "Bill-to Address 2" := pCustomer."Address 2";
        "Bill-to City" := pCustomer.City;
        "Bill-to Country Code" := pCustomer."Country Code";
        "Bill-to Post Code" := pCustomer."Post Code";
      END;
      //STOP - WG - 29.01.2013 - MP - repair functionality Customer Adress History
      //STOP - WG - 07.06.2012 - RCH - M3959 - Customer Adress History
    END;

    PROCEDURE UpdateLineTranslations@1220012();
    VAR
      lrecSalesLine@1220000 : Record 37;
      lrecSalesLineTransl@1220001 : Record 84824;
      lrecCountry@1220002 : Record 9;
    BEGIN
      IF "VAT Settlement Country Code" <> '' THEN BEGIN
        lrecCountry.GET("VAT Settlement Country Code");
        IF lrecCountry.Sprachcode = '' THEN BEGIN
          lrecSalesLineTransl.RESET;
          lrecSalesLineTransl.SETRANGE("Document Type", "Document Type");
          lrecSalesLineTransl.SETRANGE("Document No.", "No.");
          IF NOT lrecSalesLineTransl.ISEMPTY THEN
            lrecSalesLineTransl.DELETEALL;
          EXIT;
        END;

        lrecSalesLine.RESET;
        lrecSalesLine.SETRANGE("Document Type", "Document Type");
        lrecSalesLine.SETRANGE("Document No.", "No.");
        lrecSalesLine.SETRANGE(Type, lrecSalesLine.Type::"G/L Account", lrecSalesLine.Type::"Charge (Item)");
        IF lrecSalesLine.FINDSET THEN REPEAT
          lrecSalesLineTransl.SetSalesLine(Rec, lrecSalesLine);
        UNTIL lrecSalesLine.NEXT = 0;
      END ELSE BEGIN
        lrecSalesLineTransl.RESET;
        lrecSalesLineTransl.SETRANGE("Document Type", "Document Type");
        lrecSalesLineTransl.SETRANGE("Document No.", "No.");
        IF NOT lrecSalesLineTransl.ISEMPTY THEN
          lrecSalesLineTransl.DELETEALL;
      END;
    END;

    PROCEDURE CheckAndSetLocalReverseCharge@1220034(inCreateStdTextLine@1220005 : Boolean) : Boolean;
    VAR
      lrecCust@1220000 : Record 18;
      lrecSalesLine@1220002 : Record 37;
      lrecCountry@1220004 : Record 9;
      locLineNo@1220003 : Integer;
      lcuPostCentros@1220001 : Codeunit 84402;
      lrecCustVATRegNo@1220006 : Record 84437;
      InsertVATCauseText@1220008 : Boolean;
      VATCauseSetupL@1220007 : Record 61064;
    BEGIN
      lrecCust.GET("Sell-to Customer No.");

      // NAV-17514+
      IF inCreateStdTextLine AND Invoice THEN BEGIN
        IF VATCauseSetupL.GetStandardText(Rec, VATCauseSetupL) THEN BEGIN
          VATCauseSetupL.CreateSalesLine(Rec, VATCauseSetupL);
          InsertVATCauseText := TRUE;
        END;
      END;
      // NAV-17514-


      //START - WG - 02.11.2015 - RCH - NAV-13779
      //IF "VAT Settlement Country Code" <> lrecCust."Country Code" THEN
      //  EXIT;
      IF "VAT Settlement Country Code" <> lrecCust."Country Code" THEN BEGIN
        IF lrecCustVATRegNo.FindCustomerVATRegNo(lrecCust."No.","VAT Settlement Country Code","Posting Date") = '' THEN BEGIN
          EXIT;
        END ELSE BEGIN
          //START - WG - 23.11.2015 - RCH - NAV-15428
          //Invoice := TRUE;
          //STOP - WG - 23.11.2015 - RCH - NAV-15428
        END;
      END;
      //STOP - WG - 02.11.2015 - RCH - NAV-13779

      lrecCountry.GET("VAT Settlement Country Code");
      //START - WG - 20.01.2016 - MP - NAV-16123
      //IF lrecCountry."VAT Reg. No. Loc. Rev.Chrg." <> '' THEN BEGIN
      IF (lrecCountry."VAT Reg. No. Loc. Rev.Chrg." <> '') AND
         ("VAT Bus. Posting Group"  = lrecCountry."VAT Bus. Post. Group Rev.Chrg.") THEN BEGIN
      //STOP - WG - 20.01.2016 - MP - NAV-16123
        lrecCountry.TESTFIELD("Std Text Loc. Rev. Chrg.");

        //START - WG - 27.01.2016 - MP - NAV-16210
        IF Invoice THEN
        //STOP - WG - 27.01.2016 - MP - NAV-16210
          "Company VAT Registration No." := lrecCountry."VAT Reg. No. Loc. Rev.Chrg.";

        // NAV-17514+
        //IF inCreateStdTextLine AND Invoice THEN BEGIN
        IF inCreateStdTextLine AND Invoice AND (NOT InsertVATCauseText) THEN BEGIN
        // NAV-17514-
          // === insert text for local reverse charge to lines ===
          lrecSalesLine.RESET;
          lrecSalesLine.SETRANGE("Document Type", "Document Type");
          lrecSalesLine.SETRANGE("Document No.", "No.");
          IF NOT lrecSalesLine.FINDLAST THEN
            CLEAR(lrecSalesLine);
          lcuPostCentros.FillSalesLineTexts(Rec, lrecSalesLine."Line No." + 10000, lrecCountry."Std Text Loc. Rev. Chrg.");
        END;

        EXIT(TRUE);
      END;

      EXIT(FALSE);
    END;

    PROCEDURE IsOrderToInvForCustProdType@1220032(inCustProductTypeFilter@1220000 : Text[30]) : Boolean;
    VAR
      lcuContractMgt@1220001 : Codeunit 61034;
    BEGIN
      IF inCustProductTypeFilter = '' THEN
        EXIT(TRUE);

      EXIT(inCustProductTypeFilter = lcuContractMgt.GetContactSegment("Sell-to Customer No."));
    END;

    PROCEDURE FilterOrderToInvForCustProdTyp@1220036(VAR parSalesHead@1220000 : Record 36;inCustProductType@1220001 : Text[30]);
    BEGIN
      parSalesHead.CLEARMARKS;

      IF inCustProductType <> '' THEN BEGIN
        IF parSalesHead.FINDSET THEN REPEAT
          IF parSalesHead.IsOrderToInvForCustProdType(inCustProductType) THEN
            parSalesHead.MARK(TRUE);
        UNTIL parSalesHead.NEXT = 0;
        parSalesHead.MARKEDONLY(TRUE);
      END;
    END;

    PROCEDURE ShowOrderToInvForCustProdType@1220035(VAR parSalesHead@1220001 : Record 36;inCustProductType@1220000 : Text[30]);
    VAR
      lfrmSalesOrders@1220002 : Form 50003;
    BEGIN
      FilterOrderToInvForCustProdTyp(parSalesHead, inCustProductType);

      CLEAR(lfrmSalesOrders);
      lfrmSalesOrders.EDITABLE(FALSE);
      lfrmSalesOrders.LOOKUPMODE(FALSE);
      lfrmSalesOrders.SETTABLEVIEW(parSalesHead);
      lfrmSalesOrders.RUNMODAL;
    END;

    PROCEDURE "---EISWZR---"@1106700001();
    BEGIN
    END;

    PROCEDURE OptiToolStorno@1106700005();
    VAR
      t_ProtokollTable@1112400000 : Record 5010081;
    BEGIN
      IF "OptiTool Serial No." = 0 THEN
        ERROR(Text1106700036);

      t_ProtokollTable.GET("OptiTool Serial No.");
      IF NOT t_ProtokollTable.DELETE THEN
        ERROR(Text1106700037)
      ELSE
      "OptiTool Serial No." := 0;
    END;

    PROCEDURE KredLimPrÅfen@1106700003();
    VAR
      t_Einricht@1106700025 : Record 5010011;
      c_KredLimPrÅfen@1106700024 : Codeunit 312;
      Fenster@1106700023 : Dialog;
      t_Debitor@1106700022 : Record 18;
    BEGIN
      t_Einricht.GET;
      IF NOT t_Einricht."Order Release" THEN
        EXIT;

      IF "Bill-to Customer No." = '' THEN
        ERROR(Text1106700033,FIELDCAPTION("Bill-to Customer No."));

      t_Debitor.GET("Bill-to Customer No.");
      //* Ist Kreditlimit Åberhaupt festgelegt ..
      // *** START 09 wz.ak 101106
      t_Debitor.CALCFIELDS("Credit Limit (LCY)");
      // *** ENDE 09 wz.ak 101106
      IF t_Debitor."Credit Limit (LCY)" = 0 THEN
        EXIT;

      t_Debitor.CALCFIELDS(t_Debitor."Balance (LCY)",t_Debitor."Balance Due (LCY)",
                           t_Debitor."Shipped Not Invoiced",t_Debitor."Outstanding Orders");
      CALCFIELDS("Amount Including VAT");

      IF t_Debitor."Balance Due (LCY)" + t_Debitor."Outstanding Orders" +
         t_Debitor."Shipped Not Invoiced" >
         t_Debitor."Credit Limit (LCY)" THEN BEGIN
        IF "Order Released at (Date)" = 0D THEN BEGIN
        //* nur wenn noch nicht gesperrt war, ansonsten keine PrÅfung mehr !!
          "Credit Limit Exceeded" := TRUE;
          "Cr. Limit Exceeded at (Date)" := WORKDATE;
          "Cr. Limit Exceeded at (Time)" := TIME;
          "Credit Limit Exceeded (by)" := USERID;
          MODIFY;
          COMMIT;
        END;
      END;
    END;

    PROCEDURE öbergabeOptiTool@1106700002();
    BEGIN
      TESTFIELD("Order created");
      CALCFIELDS("Number of Lines");
      IF "Number of Lines" = 0 THEN
        ERROR(Text1106700034);

      IF "OptiTool Serial No." <> 0 THEN BEGIN
        IF CONFIRM(Text1106700035,TRUE) THEN BEGIN
          f_VKKöbergabe();
          END;
        END
      ELSE
        f_VKKöbergabe();
    END;

    PROCEDURE FNK_VKZ_LfdNrOptitool_Aktual@1112400000();
    VAR
      LCL_RE_VKZ@1112400001 : Record 37;
      LCL_INT_ZÑhler@1112400000 : Integer;
      Text5010000@1112400002 : TextConst 'DEA=Fehler beim Aktualisieren von %1 in %2 vor der Datenaufbereitung fÅr Optitool!';
    BEGIN
      LCL_RE_VKZ.RESET;
      LCL_RE_VKZ.SETRANGE(LCL_RE_VKZ."Document Type", "Document Type");
      LCL_RE_VKZ.SETRANGE(LCL_RE_VKZ."Document No.", "No.");
      IF LCL_RE_VKZ.FINDFIRST THEN
      BEGIN
       LCL_INT_ZÑhler := 1;
       REPEAT
        LCL_RE_VKZ."Line No. (OptiTool)" := 10000 * LCL_INT_ZÑhler;
        IF LCL_RE_VKZ.MODIFY = FALSE THEN
         ERROR(Text5010000, LCL_RE_VKZ.FIELDNAME(LCL_RE_VKZ."Line No. (OptiTool)"), LCL_RE_VKZ.TABLENAME);
        LCL_INT_ZÑhler := LCL_INT_ZÑhler + 1;
       UNTIL LCL_RE_VKZ.NEXT = 0;
      END;
    END;

    PROCEDURE f_VKKöbergabe@1112400001();
    VAR
      t_ProtokollTable@1112400001 : Record 5010081;
      LfdNr@1112400000 : Integer;
    BEGIN
      CALCFIELDS("Number of Lines");

      t_ProtokollTable.RESET;

      IF NOT t_ProtokollTable.FINDLAST THEN
        LfdNr := 1
      ELSE
        LfdNr := t_ProtokollTable."Entry No." + 1;

      IF "OptiTool Serial No." = 0 THEN BEGIN
        t_ProtokollTable.INIT;
        t_ProtokollTable."Entry No." := LfdNr;
        t_ProtokollTable.INSERT;

        "OptiTool Serial No." := t_ProtokollTable."Entry No.";
        END
      ELSE
        t_ProtokollTable.GET("OptiTool Serial No.");

      t_ProtokollTable."Order No." := "No.";
      t_ProtokollTable."Delivery Date from" := "Shipment Date";
      t_ProtokollTable."Delivery Date until" := "Latest Shipping Date";
      t_ProtokollTable."Delivery Time from" := "Delivery Time from";
      t_ProtokollTable."Delivery Time until" := "Delivery Time Until";
      t_ProtokollTable."Delivery (Date)" := TODAY;
      t_ProtokollTable."Delivery (Time)" := TIME;
      t_ProtokollTable."Delivery by" := USERID;
      t_ProtokollTable."Number of Lines" := "Number of Lines";
      t_ProtokollTable.VALIDATE(t_ProtokollTable."Number of Transfers");
      t_ProtokollTable.MODIFY;
    END;

    PROCEDURE FNK_AufgabeErstellen@1106700000() BO_Return : Boolean;
    VAR
      LCL_RE_UserSetup@1106700000 : Record 91;
      LCL_RE_ToDo@1106700001 : Record 5080;
      LCL_RE_ContBusRel@1106700003 : Record 5054;
      LCL_RE_CommentLine@1106700002 : Record 5061;
      LCL_CO_SalesPerson@1106700004 : Code[10];
      LCL_DI_Dialog@1106700005 : Dialog;
      LCL_TE_Bemerkung@1106700006 : Text[80];
      LCL_DA_Startdatum@1106700007 : Date;
      LCL_TI_Startzeit@1106700008 : Time;
    BEGIN
      IF LCL_RE_UserSetup.GET(USERID) THEN
        IF LCL_RE_UserSetup."Salesperson Code" <> '' THEN
          LCL_CO_SalesPerson := LCL_RE_UserSetup."Salesperson Code";

      IF LCL_CO_SalesPerson <> '' THEN BEGIN
        LCL_DA_Startdatum := TODAY;
        LCL_TI_Startzeit  := TIME;
        LCL_DI_Dialog.OPEN('Bemerkungstext #############1#\'+
                           'Startdatum     #############2#\'+
                           'Startzeit      #############3# ');
        LCL_DI_Dialog.UPDATE(2,LCL_DA_Startdatum);
        LCL_DI_Dialog.UPDATE(3,LCL_TI_Startzeit);
        LCL_DI_Dialog.INPUT(1,LCL_TE_Bemerkung);
        LCL_DI_Dialog.INPUT(2,LCL_DA_Startdatum);
        LCL_DI_Dialog.INPUT(3,LCL_TI_Startzeit);
        LCL_DI_Dialog.CLOSE;
        LCL_RE_ToDo.INIT;
        LCL_RE_ToDo.VALIDATE("Salesperson Code",LCL_CO_SalesPerson);
        LCL_RE_ContBusRel.SETCURRENTKEY("Link to Table","No.");
        LCL_RE_ContBusRel.SETRANGE("Link to Table",LCL_RE_ContBusRel."Link to Table"::Customer);
        LCL_RE_ContBusRel.SETRANGE("No.","Sell-to Customer No.");
        IF LCL_RE_ContBusRel.FINDFIRST THEN
          LCL_RE_ToDo.VALIDATE("Contact No.",LCL_RE_ContBusRel."Contact No.");
        LCL_RE_ToDo.Date := LCL_DA_Startdatum;
        LCL_RE_ToDo."Start Time" := LCL_TI_Startzeit;
        LCL_RE_ToDo.Duration := 180000000;
        LCL_RE_ToDo.Description := STRSUBSTNO(Text50000,"No.","Sell-to Customer No.");
        BO_Return := LCL_RE_ToDo.INSERT(TRUE);
        IF BO_Return AND (LCL_TE_Bemerkung <> '') THEN BEGIN
          LCL_RE_CommentLine.RESET;
          LCL_RE_CommentLine.INIT;
          LCL_RE_CommentLine.VALIDATE("Table Name",LCL_RE_CommentLine."Table Name"::"To-do");
          LCL_RE_CommentLine.VALIDATE("No.",LCL_RE_ToDo."No.");
          LCL_RE_CommentLine."Line No." := 10000;
          LCL_RE_CommentLine.VALIDATE(Date,TODAY);
          LCL_RE_CommentLine.VALIDATE(Comment,LCL_TE_Bemerkung);
          LCL_RE_CommentLine.INSERT;
        END;
      END ELSE
        BO_Return := FALSE;
    END;

    PROCEDURE VkKopföbersichtToKarte@1106700012(VAR P_VkKopf@1000 : Record 36);
    BEGIN

      // Anzeige einer Verkaufskopf-Karte aus der Verkaufskopf-öbersicht ...

      CASE P_VkKopf."Document Type" OF
        P_VkKopf."Document Type"::Quote:
          FORM.RUN (FORM::"Sales Quote", P_VkKopf);

        P_VkKopf."Document Type"::Order:
          CASE P_VkKopf."Order Type" OF
            P_VkKopf."Order Type"::Kraftstoff :
              FORM.RUN (FORM::"VK Mineral Kraftstoffe", P_VkKopf);
            P_VkKopf."Order Type"::"Schmierstoff/Folgemarkt" :
              FORM.RUN (FORM::"VK Mineral Schmierstoffe", P_VkKopf);
            P_VkKopf."Order Type"::Heizîl :
              FORM.RUN (FORM::"VK Mineral Heizîl", P_VkKopf);
            P_VkKopf."Order Type"::" " :
              FORM.RUN (FORM::"Sales Order Standard", P_VkKopf);
            //WM -BEGIN
            P_VkKopf."Order Type"::Werbematerial :
              FORM.RUN (FORM::Form5096767, P_VkKopf);
            //WM - ENDE
            ELSE
              FORM.RUN (FORM::"Sales Order", P_VkKopf);
          END;

        P_VkKopf."Document Type"::Invoice:
          FORM.RUN (FORM::"Sales Invoice", P_VkKopf);
        P_VkKopf."Document Type"::"Return Order":
          FORM.RUN (FORM::"Sales Return Order", P_VkKopf);
        P_VkKopf."Document Type"::"Credit Memo":
          FORM.RUN (FORM::"Sales Credit Memo", P_VkKopf);
        P_VkKopf."Document Type"::"Blanket Order":
          FORM.RUN (FORM::"Blanket Sales Order", P_VkKopf);
      END;
    END;

    PROCEDURE "AuftragAusTourInDispoZurÅck()"@1106700011();
    VAR
      LCL_RE_Tourkopf@1000 : Record 5010014;
      LCL_RE_Tourzeilen@1001 : Record 5010015;
      LCL_RE_Dispositionspool@1002 : Record 5010164;
    BEGIN
      LCL_RE_Tourzeilen.RESET;
      LCL_RE_Tourzeilen.SETCURRENTKEY("Tour No.","No.");
      LCL_RE_Tourzeilen.SETRANGE("No.","No.");
      IF LCL_RE_Tourzeilen.FINDFIRST THEN BEGIN
        REPEAT                               //AVIA-RK-270504:   REPEAT/UNTIL hat gefehlt
          LCL_RE_Tourzeilen.DELETE(); //Kein True da sonst DispoListe gelîscht wird.
        UNTIL LCL_RE_Tourzeilen.NEXT = 0;    //AVIA-RK-270504
      END;

      //Sales Header von Tour befreien:
      "Tour no." := '';
      MODIFY;

      SalesLine.SETRANGE("Document Type","Document Type");
      SalesLine.SETRANGE("Document No.","No.");
      IF SalesLine.FINDFIRST THEN BEGIN
        REPEAT
          SalesLine."Tour No." := '';
          //MESSAGE('%1 %2',SalesLine."Document No.",SalesLine."Line No.");
          SalesLine.MODIFY;
        UNTIL SalesLine.NEXT = 0;
      END;
      //Dispopool Planung gebucht = False setzen, Tournr. rausnehmen
      LCL_RE_Dispositionspool.RESET;
      LCL_RE_Dispositionspool.SETCURRENTKEY(Typ,"No.","Currency No.");
      LCL_RE_Dispositionspool.SETRANGE(Typ,0);
      LCL_RE_Dispositionspool.SETRANGE("No.","No.");
      IF LCL_RE_Dispositionspool.FINDFIRST THEN BEGIN
        REPEAT                                    //AVIA-RK-270504:   REPEAT/UNTIL hat gefehlt
          //MESSAGE('DispoArtikle %1  %2',LCL_RE_Dispositionspool."Nr.",LCL_RE_Dispositionspool."lfd. Nr.");
          LCL_RE_Dispositionspool."Tour No." := '';
          LCL_RE_Dispositionspool."Planning Posted" := FALSE;
          LCL_RE_Dispositionspool.MODIFY;
        UNTIL LCL_RE_Dispositionspool.NEXT = 0;   //AVIA-RK-270504
      END;
    END;

    PROCEDURE "++++ TESSOL ++++"@60200();
    BEGIN
    END;

    PROCEDURE GetGeschÑftsbereich@1112400005();
    VAR
      LC_Debitor@1112400000 : Record 18;
      LC_GeschÑftsbereich@1112400001 : Record 60200;
      LC_EinrGeschÑftsbereich@1112400002 : Record 60201;
      LC_CodeGeschÑftsbereich@1000000000 : Code[10];
    BEGIN
      // *** START Index GB¯1 ---------
      IF "Sell-to Customer No." = '' THEN
        EXIT;
      IF NOT LC_Debitor.GET("Sell-to Customer No.") THEN
        EXIT;

      IF Geschaftsbereich <> '' THEN
        EXIT;

      LC_GeschÑftsbereich.RESET;
      LC_GeschÑftsbereich.SETCURRENTKEY(Auftragstyp);
      LC_GeschÑftsbereich.SETRANGE(Auftragstyp,"Order Type");

      IF LC_GeschÑftsbereich.FINDFIRST THEN
        LC_CodeGeschÑftsbereich := LC_GeschÑftsbereich.Code
      ELSE
        LC_CodeGeschÑftsbereich := '';

      IF LC_EinrGeschÑftsbereich.GET("Sell-to Customer No.",LC_CodeGeschÑftsbereich) THEN
        VALIDATE(Geschaftsbereich,LC_CodeGeschÑftsbereich)
      ELSE
        Geschaftsbereich := '';
      // *** ENDE Index GB¯1 ---------
    END;

    PROCEDURE GeschÑftsbereichsdaten@1000000002();
    VAR
      LocDebitor@1112400000 : Record 18;
      LocGeschÑftsbeZahlungsform@1112400001 : Record 60033;
      KeinGB@1112400002 : Boolean;
      LOC_REC_Geschbereich@1108800000 : Record 60200;
      LOC_REC_GeschbereichDeb@1108800001 : Record 60201;
    BEGIN
      // *** START Index GB¯1 ---------

      //  02  241007  wz.ah -
      {KeinGB := FALSE;

      IF "Sell-to Customer No." = '' THEN
        EXIT;
      IF NOT LocDebitor.GET("Sell-to Customer No.") THEN
        EXIT;

      // 07  091106    wz.ub
      LocGeschÑftsbeZahlungsform.SETRANGE(LocGeschÑftsbeZahlungsform.Debitor,"Sell-to Customer No.");
      LocGeschÑftsbeZahlungsform.SETRANGE(LocGeschÑftsbeZahlungsform.GeschÑftsbereich,GeschÑftsbereich);
      LocGeschÑftsbeZahlungsform.SETRANGE(LocGeschÑftsbeZahlungsform.LÑndercode,'');
      IF NOT LocGeschÑftsbeZahlungsform.FINDFIRST THEN BEGIN
      //IF NOT LocGeschÑftsbereich.GET("Sell-to Customer No.",GeschÑftsbereich) THEN ////war
        KeinGB := TRUE;
      END;
      // 07  091106    wz.ub

      IF GeschÑftsbereich = '' THEN
        KeinGB := TRUE;

      IF KeinGB THEN
        "Salesperson Code" := LocDebitor."Salesperson Code"
      ELSE
        "Salesperson Code" := LocGeschÑftsbeZahlungsform.VerkÑufercode;

      // 2. Zahlungsbedingung / Zahlungsarten
      KeinGB := FALSE;
      IF NOT LocDebitor.GET("Bill-to Customer No.") THEN
        LocDebitor.GET("Sell-to Customer No.");
      // 07  091106    wz.ub
      LocGeschÑftsbeZahlungsform.SETRANGE(LocGeschÑftsbeZahlungsform.Debitor,"Bill-to Customer No.");
      LocGeschÑftsbeZahlungsform.SETRANGE(LocGeschÑftsbeZahlungsform.GeschÑftsbereich,GeschÑftsbereich);
      LocGeschÑftsbeZahlungsform.SETRANGE(LocGeschÑftsbeZahlungsform.LÑndercode,'');
      IF NOT LocGeschÑftsbeZahlungsform.FINDFIRST THEN BEGIN
           KeinGB := TRUE;
      END;
      // 07  091106    wz.ub


      IF GeschÑftsbereich = '' THEN
        KeinGB := TRUE;

      IF KeinGB THEN BEGIN
        "Payment Terms Code" := LocDebitor."Payment Terms Code";
        "Payment Method Code" := LocDebitor."Payment Method Code";
      END ELSE BEGIN
      // 07  091106    wz.ub
        "Payment Terms Code" := LocGeschÑftsbeZahlungsform.Zahlungsbedingung;
        "Payment Method Code" := LocGeschÑftsbeZahlungsform.Zahlungsform;
      // 07  091106    wz.ub
      END;

      IF "Document Type" = "Document Type"::"Credit Memo" THEN
        IF PaymentTerms.GET("Payment Terms Code") THEN
          IF NOT PaymentTerms."Calc. Pmt. Disc. on Cr. Memos" THEN
            "Payment Method Code" := '';

      VALIDATE("Salesperson Code");
      VALIDATE("Payment Terms Code");
      VALIDATE("Payment Method Code");
      // *** ENDE Index GB¯1 ---------

      // ------------ 07.12.2006 wz.jd Start ---------------------------------
      IF "Document Type" = "Document Type"::Order THEN
      BEGIN
        IF (("Order Type" = "Order Type"::Kraftstoff) OR ("Order Type" = "Order Type"::Heizîl)) THEN
        BEGIN
          LOC_REC_Geschbereich.RESET;
          LOC_REC_GeschbereichDeb.RESET;
          LOC_REC_Geschbereich.SETCURRENTKEY(Auftragstyp);
          LOC_REC_Geschbereich.SETRANGE(Auftragstyp,"Order Type");
          IF LOC_REC_Geschbereich.FINDFIRST THEN
          BEGIN
            IF LOC_REC_Geschbereich."Global Dimension 1 Code" = '' THEN
              BEGIN
                ERROR('FEHLER!  FÅr den GeschÑftsbereich %1 ist keine Kostenstelle angelegt \' +
                'BetÑtigen Sie nach dem Schlie·en dieses Fensters die ESC-Taste und \' +
                'geben Sie fÅr den GeschÑftsbereich eine Kostenstelle ein',"Order Type");
                EXIT;
              END;
            LOC_REC_GeschbereichDeb.SETCURRENTKEY(Debitor,GeschÑftsbereich);
            LOC_REC_GeschbereichDeb.SETRANGE(Debitor,"Sell-to Customer No.");
            LOC_REC_GeschbereichDeb.SETRANGE(GeschÑftsbereich,LOC_REC_Geschbereich.Code);
            IF LOC_REC_GeschbereichDeb.FINDFIRST THEN
              VALIDATE("Shortcut Dimension 1 Code",LOC_REC_Geschbereich."Global Dimension 1 Code")
            ELSE BEGIN
              ERROR('FEHLER!  Es ist kein GeschÑftsbereich %1 fÅr diesen Debitor angelegt! \' +
              'BetÑtigen Sie nach dem Schlie·en dieses Fensters die ESC-Taste und legen Sie den GeschÑftsbereich an',"Order Type");
              EXIT;
            END;
          END;
        END;
      END;
      // ------------ 07.12.2006 wz.jd Ende ---------------------------------
      }
      // 02  241007  wz.ah +
    END;

    PROCEDURE GetShippingNo@1000000003();
    BEGIN
      // *** START Index VB¯1 ---------
      IF ("Shipping No." = '') THEN
        IF ("Document Type" = "Document Type"::Order) OR
           (("Document Type" = "Document Type"::Invoice) AND SalesSetup."Shipment on Invoice")
        THEN BEGIN
          TESTFIELD("Shipping No. Series");
          //"Shipping No." := NoSeriesMgt.GetNextNo("Shipping No. Series","Posting Date",TRUE);
          VALIDATE("Shipping No.",NoSeriesMgt.GetNextNo("Shipping No. Series","Posting Date",TRUE));
        END;
      // *** START Index VB¯1 ---------
    END;

    PROCEDURE "---WG002---"@1000000006();
    BEGIN
    END;

    PROCEDURE CreateORDERdim@1000000007();
    VAR
      lGLSetup@1000000002 : Record 98;
      lDimensionValue@1000000001 : Record 349;
      lDocDim@1000000000 : Record 357;
    BEGIN
      //START WG002 - 19.09.2007 - PV - Generate Dimension Value ORDER while creating Sales Order
      //new function
      IF "Document Type"="Document Type"::Order THEN
      BEGIN
        lGLSetup.GET;
        lGLSetup.TESTFIELD("Dimension Code ZAKAZKA");
        CLEAR(lDimensionValue);
        lDimensionValue.INIT;
        lDimensionValue.VALIDATE("Dimension Code",lGLSetup."Dimension Code ZAKAZKA");
        lDimensionValue.VALIDATE(Code,"No.");
        lDimensionValue.VALIDATE(Name,"No.");
        IF lDimensionValue.INSERT(TRUE) THEN;

        CLEAR(lDocDim);
        lDocDim.INIT;
        lDocDim.VALIDATE("Table ID",DATABASE::"Sales Header");
        lDocDim.VALIDATE("Document Type",lDocDim."Document Type"::Order);
        lDocDim.VALIDATE("Document No.","No.");
        lDocDim.VALIDATE("Dimension Code",lDimensionValue."Dimension Code");
        lDocDim.VALIDATE("Dimension Value Code",lDimensionValue.Code);
        IF lDocDim.INSERT(TRUE) THEN;
      END;
      //STOP WG002 - 19.09.2007 - PV - Generate Dimension Value ORDER while creating Sales Order
    END;

    PROCEDURE DeleteORDERdim@1220000();
    VAR
      lGLSetup@1000000002 : Record 98;
      lDimensionValue@1000000001 : Record 349;
      lDocDim@1000000000 : Record 357;
    BEGIN
      //START WG002 - 19.09.2007 - PV - Generate Dimension Value ORDER while creating Sales Order
      //new function
      IF "Document Type"="Document Type"::Order THEN
      BEGIN
        lGLSetup.GET;
        lGLSetup.TESTFIELD("Dimension Code ZAKAZKA");
        lDimensionValue.SETRANGE("Dimension Code",lGLSetup."Dimension Code ZAKAZKA");
        lDimensionValue.SETRANGE(Code,"No.");
        IF lDimensionValue.FINDFIRST THEN
          IF lDimensionValue.DELETE(TRUE) THEN;
      END;
      //STOP WG002 - 19.09.2007 - PV - Generate Dimension Value ORDER while creating Sales Order
    END;

    PROCEDURE "--WG021--"@1220002();
    BEGIN
    END;

    PROCEDURE SetVATNoAndVATPg@1220003();
    VAR
      recCust@1220000 : Record 18;
      recCustVATRegs@1220001 : Record 84437;
      recCountry@1220002 : Record 9;
      lCustVatReg@1220003 : Record 84437;
      lCust@1220004 : Record 18;
      lrecCompInfo@1220005 : Record 79;
    BEGIN
      //START CDLJV - 25.10.2007

      //WG065 - 13.08.2009 - MP - modified function SetVATNoAndVATPg()
      //modified this function

      lrecCompInfo.GET;
      IF NOT lCust.GET("Bill-to Customer No.") THEN
        lCust.GET("Sell-to Customer No.");

      //**** "VAT Registration No." from table Customer VAT Regi.. or from Customer card
      //START - WG - 07.06.2012 - RCH - M3959 - Customer Adress History
      //
      // oldcode
      //
      //IF lCustVatReg.GET("Bill-to Customer No.","VAT Settlement Country Code") THEN BEGIN
      //  IF lCustVatReg."VAT Registration No." <> '' THEN
      //    "VAT Registration No." := lCustVatReg."VAT Registration No."
      //  ELSE
      //    "VAT Registration No." := lCust."VAT Registration No.";
      //END ELSE
      //  "VAT Registration No." := lCust."VAT Registration No.";

      "VAT Registration No." := lCustVatReg.FindCustomerVATRegNo("Bill-to Customer No.",
                                                                 "VAT Settlement Country Code",
                                                                 "VAT Taxation Date");
      IF "VAT Registration No." = '' THEN BEGIN
         "VAT Registration No." := lCust."VAT Registration No.";
         END;

      //STOP - WG - 07.06.2012 - RCH - M3959 - Customer Adress History

      //**** reload original information to header while deleting "VAT Settlement Country Code"
      //**** or record didn't find in table recCountry by "VAT Settlement Country Code"
      IF (NOT recCountry.GET("VAT Settlement Country Code")) OR
         ((recCountry.Code <> lrecCompInfo."Country Code") AND (recCountry."VAT Registration No." = '')) THEN BEGIN
        "Company VAT Registration No." := '';
        VALIDATE("Gen. Bus. Posting Group",lCust."Gen. Bus. Posting Group");
        VALIDATE("VAT Bus. Posting Group",lCust."VAT Bus. Posting Group");
        EXIT;
      END;


      //**** record found in table recCountry by "VAT Settlement Country Code"
      //**** but recCountry."VAT Registration No." is empty
      IF (recCountry.Code = lrecCompInfo."Country Code") AND (recCountry."VAT Registration No." = '') THEN BEGIN
        "Company VAT Registration No." := lrecCompInfo."VAT Registration No.";
        VALIDATE("Gen. Bus. Posting Group",lCust."Gen. Bus. Posting Group");
        VALIDATE("VAT Bus. Posting Group",lCust."VAT Bus. Posting Group");
        //START - WG - 22.05.2015 - MP - NAV-12828
        CheckAndSetLocalReverseCharge(FALSE);
        //STOP - WG - 22.05.2015 - MP - NAV-12828
        EXIT;
      END;

      //**** record found in table recCountry by "VAT Settlement Country Code"
      //**** and recCountry."VAT Registration No." isn't empty
      IF recCountry."VAT Registration No." <> '' THEN BEGIN
        "Company VAT Registration No." := recCountry."VAT Registration No.";
        VALIDATE("Different G/L Account Code", recCountry."Different G/L Account Code");
        VALIDATE("Gen. Bus. Posting Group",recCountry."Gen. Bus. Posting Group");

        IF ("Bill-to Country Code" = "VAT Settlement Country Code") THEN BEGIN
          IF (lCust."VAT Registration No." <> '') THEN BEGIN
            VALIDATE("VAT Bus. Posting Group", recCountry."VAT DOMESTIC REG");
          END ELSE BEGIN
            VALIDATE("VAT Bus. Posting Group", recCountry."VAT DOMESTIC NEREG");
          END;
        END ELSE BEGIN
          IF (recCustVATRegs.GET("Bill-to Customer No.", "VAT Settlement Country Code")) THEN BEGIN
            recCustVATRegs.TESTFIELD("VAT Registration No.");
            VALIDATE("VAT Bus. Posting Group", recCountry."VAT DOMESTIC REG");
          END ELSE BEGIN
             VALIDATE("VAT Bus. Posting Group", recCountry."VAT DOMESTIC NEREG");
          END;
        END;
        //START - WG - 22.05.2015 - MP - NAV-12828
        CheckAndSetLocalReverseCharge(FALSE);
        //STOP - WG - 22.05.2015 - MP - NAV-12828
      END;
    END;

    PROCEDURE "Create Purch. Order Product"@1220001();
    VAR
      locTbVendorTemp@1220000 : TEMPORARY Record 23;
      locTbCarPool@1220001 : Record 5010022;
      lrecPurchOrderComment@1220003 : Record 84495;
      "-WG128-"@1220004 : Integer;
      locSalesLine@1220002 : Record 37;
      locCorrection@1220005 : Boolean;
      locVendor@1220006 : Code[20];
      locPurchOrderProductNo@1220007 : Code[20];
      locERR01@1220008 : TextConst 'CSY=Oprava n†kupn° objedn†vky PHM nen° moßn† ˝†dky obsahuj° v°ce neß jednoho dodavatele nebo ü°sela n†kupn°ch objedn†vek PHM.';
      locPurchaseHeader@1220009 : Record 38;
      locPurchLineExt@1220010 : Record 84948;
      locSalesLineEXT@1220011 : Record 84941;
    BEGIN
      //WG034 - 27.11.2007 - PV - Create purch. orders for product
      //new function
      IF ("Kind of Order" <> "Kind of Order"::"Vendor->Customer") AND
         ("Kind of Order" <> "Kind of Order"::"Vendor->Stock") THEN
        EXIT;

      TESTFIELD("Shortcut Dimension 1 Code");
      TESTFIELD("Shortcut Dimension 2 Code");

      //START - WG128 - MM - 30.11.11 - M2445 - POV
      locCorrection := FALSE;
      locPurchOrderProductNo := '';
      locCorrection := CorrectionPurchaseOrder(0, locPurchOrderProductNo, TRUE); //Product

      {-- oldcode
      locCorrection := FALSE;
      locSalesLine.RESET;
      locSalesLine.SETRANGE("Document Type", "Document Type");
      locSalesLine.SETRANGE("Document No.", "No.");
      locSalesLine.SETRANGE(Type, SalesLine.Type::Item);
      locSalesLine.SETFILTER(Quantity, '<>0');
      locSalesLine.SETFILTER("Purchase Order No. Product", '%1', '');
      IF NOT locSalesLine.FINDFIRST THEN BEGIN

        locCorrection := TRUE;

        locSalesLine.RESET;
        locSalesLine.SETRANGE("Document Type", "Document Type");
        locSalesLine.SETRANGE("Document No.", "No.");
        locSalesLine.SETRANGE(Type, SalesLine.Type::Item);
        locSalesLine.SETFILTER(Quantity, '<>0');
        IF locSalesLine.FINDFIRST THEN BEGIN
          locVendor := locSalesLine."Vendor No.";
          locPurchOrderProductNo := locSalesLine."Purchase Order No. Product";
          REPEAT
            IF locVendor<>locSalesLine."Vendor No."
              THEN locCorrection := FALSE;
            IF locPurchOrderProductNo<>locSalesLine."Purchase Order No. Product"
              THEN locCorrection := FALSE;
          UNTIL locSalesLine.NEXT = 0;
         END;

        IF locCorrection
         THEN BEGIN
            IF locPurchaseHeader.GET("Document Type"::Order, locPurchOrderProductNo)
              THEN locPurchaseHeader.DELETE(TRUE)
              ELSE locCorrection := FALSE;
          END
         ELSE ERROR(locERR01)

      END;
      }
      //STOP - WG128 - MM - 30.11.11 - M2445 - POV

      SalesLine.RESET;
      SalesLine.SETRANGE("Document Type", "Document Type");
      SalesLine.SETRANGE("Document No.", "No.");
      SalesLine.SETRANGE(Type, SalesLine.Type::Item);
      SalesLine.SETFILTER(Quantity, '<>0');
      SalesLine.SETFILTER("Purchase Order No. Product", '%1', '');
      IF NOT locTbVendorTemp.ISEMPTY THEN
        locTbVendorTemp.DELETEALL;
      //check lines and take vendors
      IF SalesLine.FINDFIRST THEN
        REPEAT
         SalesLine.TESTFIELD("Vendor No.");
         //START WG164 15.5.2015 CDLKH
         locSalesLineEXT.GET(SalesLine."Document Type", SalesLine."Document No.", SalesLine."Line No.");
         IF (locSalesLineEXT."Fixed Pricing Type - Purch." = '') AND (locSalesLineEXT."Fixed Pricing Source - Purch." = '') THEN
         //STOP WG164 15.5.2015 CDLKH
           SalesLine.TESTFIELD("Contingent No.");
         IF NOT locTbVendorTemp.GET(SalesLine."Vendor No.") THEN BEGIN
           TbVendor.GET(SalesLine."Vendor No.");
           locTbVendorTemp := TbVendor;
           locTbVendorTemp.INSERT;
         END;
        UNTIL SalesLine.NEXT = 0;

      IF locTbVendorTemp.FINDFIRST THEN
        REPEAT
         //create purch. header
         TbPurchaseHeader.INIT;
         TbPurchaseHeader."Document Type" := TbPurchaseHeader."Document Type"::Order;
         //START - WG128 - MM - 30.11.11 - M2445 - POV
         IF locCorrection THEN
            TbPurchaseHeader."No." := locPurchOrderProductNo
         ELSE
            TbPurchaseHeader."No." := '';
         //STOP - WG128 - MM - 30.11.11 - M2445 - POV
         TbPurchaseHeader.INSERT(TRUE);
         TbPurchaseHeader.VALIDATE("Buy-from Vendor No.", locTbVendorTemp."No.");
         TbPurchaseHeader.VALIDATE("Sales Order No. Wholesale", "No.");
         TbPurchaseHeader.VALIDATE("Customer No. Wholesale", "Sell-to Customer No.");
         TbPurchaseHeader."Order Type" := TbPurchaseHeader."Order Type"::Product;
         //START - WG - 15.07.2009 - MP - modified function "Create Purch. Order Product" and "Create Purch. Order Transport"
         TbPurchaseHeader.VALIDATE("VAT Settlement Country Code","VAT Settlement Country Code");
         //STOP - WG - 15.07.2009 - MP - modified function "Create Purch. Order Product" and "Create Purch. Order Transport"
         TbPurchaseHeader.VALIDATE("Shortcut Dimension 1 Code", "Shortcut Dimension 1 Code");
         TbPurchaseHeader.VALIDATE("Shortcut Dimension 2 Code", "Shortcut Dimension 2 Code");
         TbPurchaseHeader.MODIFY(TRUE);

         //create purch. lines
         SalesLine.SETRANGE("Vendor No.", locTbVendorTemp."No."); //other filters for sales lines are still set
         LineCounter := 0;
         IF SalesLine.FINDFIRST THEN
           REPEAT
            //START WG164 15.5.2015 - CDLKH
            SalesLine.CALCFIELDS("Fixed Pricing Type - Purch.", "Fixed Pricing Source - Purch.");
            //STOP WG164 15.5.2015 - CDLKH
            LineCounter += 10000;
            TbPurchaseLine.INIT;
            TbPurchaseLine."Document Type" := TbPurchaseHeader."Document Type";
            TbPurchaseLine."Document No."  := TbPurchaseHeader."No.";
            TbPurchaseLine."Line No."      := LineCounter;
            TbPurchaseLine.VALIDATE("Buy-from Vendor No.", TbPurchaseHeader."Buy-from Vendor No.");
            TbPurchaseLine.Type := SalesLine.Type;
            TbPurchaseLine.VALIDATE("No.", SalesLine."No.");
            TbPurchaseLine."Select Location Of Contingent" := SalesLine."Location Code";
            TbPurchaseLine.VALIDATE("Purchase Source Code", SalesLine."Purchase Source Code");
            //START WG164 15.5.2015 - CDLKH
            IF (SalesLine."Fixed Pricing Type - Purch." <> '') AND (SalesLine."Fixed Pricing Source - Purch." <> '') THEN BEGIN
              TbPurchaseLine.VALIDATE("Fixed Pricing Type", SalesLine."Fixed Pricing Type - Purch.");
              TbPurchaseLine.VALIDATE("Fixed Pricing Source", SalesLine."Fixed Pricing Source - Purch.");
            END ELSE
            //STOP WG164 15.5.2015 - CDLKH
              TbPurchaseLine.VALIDATE("Contingent No.", SalesLine."Contingent No.");

      //      TbPurchaseLine.VALIDATE("Location Code", SalesLine."Location Code");
            IF locTbCarPool.GET(SalesLine."Car No.") THEN BEGIN
              locTbCarPool.TESTFIELD("Location Code");
              TbPurchaseLine.VALIDATE("Location Code", locTbCarPool."Location Code");
            END;

            //START WG164 17.05.2015 p˝esunuto od insertu nahoru
            TbPurchaseLine."Sales Order No. Wholesale"     := SalesLine."Document No.";
            TbPurchaseLine."Sales Order Line No.Wholesale" := SalesLine."Line No.";
            //STOP WG164 17.05.2015 p˝esunuto od insertu nahoru

            TbPurchaseLine.VALIDATE(Quantity, SalesLine.Quantity);
            TbPurchaseLine."Ordered Quantity (Wholesales)" := TbPurchaseLine.Quantity;

            TbPurchaseLine.INSERT(TRUE);

            SalesLine."Purchase Order No. Product"     := TbPurchaseLine."Document No.";
            SalesLine."Purchase Order Line No.Product" := TbPurchaseLine."Line No.";
            SalesLine.MODIFY;
           UNTIL SalesLine.NEXT = 0;

           //START: WG034 - JD - 15.07.2008
           lrecPurchOrderComment.RESET;
           lrecPurchOrderComment.SETRANGE(Type, lrecPurchOrderComment.Type::Product);
           lrecPurchOrderComment.SETRANGE("Sales Header Doc. Type", "Document Type");
           lrecPurchOrderComment.SETRANGE("Sales Header No.", "No.");
           IF lrecPurchOrderComment.FINDFIRST THEN BEGIN
             REPEAT
               LineCounter += 10000;
               TbPurchaseLine.INIT;
               TbPurchaseLine."Document Type" := TbPurchaseHeader."Document Type";
               TbPurchaseLine."Document No." := TbPurchaseHeader."No.";
               TbPurchaseLine."Line No." := LineCounter;
               //+WG - 20.07.2015 - SS - SS:NAV-11668
               IF STRLEN(lrecPurchOrderComment.Description) > 50 THEN BEGIN
                TbPurchaseLine.Description := COPYSTR(lrecPurchOrderComment.Description,1,50);
                TbPurchaseLine."Description 2" := COPYSTR(lrecPurchOrderComment.Description,51);
               END ELSE BEGIN
                TbPurchaseLine.Description := lrecPurchOrderComment.Description;
               END;
               //-WG - 20.07.2015 - SS - SS:NAV-11668
               TbPurchaseLine.INSERT(TRUE);
             UNTIL lrecPurchOrderComment.NEXT = 0;
           END;
           //STOP: WG034 - JD - 15.07.2008

           //START: WG - JD - 23.07.2008
           //old code:
           //IF SendByEmailFax THEN BEGIN         // WG034 - JD - 22.05.2008
           //  IF NOT cuEmailling.SendDocByEmailFax(DocTypeOption::"Purch. Order", TbPurchaseHeader."No.", '', TRUE) THEN
           //    ERROR(Text60003);
           //END;
           //COMMIT;
           //STOP: WG - JD - 23.07.2008

        UNTIL locTbVendorTemp.NEXT = 0;

      SalesLine.RESET;
    END;

    PROCEDURE "Create Purch. Order Transport"@1220004();
    VAR
      locTbVendorTemp@1220000 : TEMPORARY Record 23;
      locTbShippingAgent@1220001 : Record 291;
      locPurchSetup@1220002 : Record 312;
      locTbCarPool@1220003 : Record 5010022;
      locText001@1220004 : TextConst 'CSY=U p˝epravce %1 nen° vyplnÿno ü°slo dodavatele. Objedn†vka p˝epravy nebyla vytvo˝ena pro ˝†dek %2 (%3 mnoßstv°: %4).';
      lrecPurchOrderComment@1220006 : Record 84495;
      "-WG128-"@1220011 : Integer;
      locSalesLine@1220010 : Record 37;
      locCorrection@1220009 : Boolean;
      locVendor@1220008 : Code[20];
      locPurchOrderTransNo@1220007 : Code[20];
      locPurchaseHeader@1220005 : Record 38;
      locERR01@1220012 : TextConst 'CSY=Oprava n†kupn° objedn†vky dopravy nen° moßn† ˝†dky obsahuj° v°ce neß jednoho dodavatele nebo ü°sela n†kupn°ch objedn†vek dopravy.';
      locPurchLineExt@1220013 : Record 84948;
    BEGIN
               //+WG - 20.07.2015 - SS - SS:NAV-11668
      //WG034 - 27.11.2007 - PV - Create purch. orders for transport
      //new function

      locPurchSetup.GET;
      locPurchSetup.TESTFIELD("Charge (Item) Code for Trans");

      TESTFIELD("Shortcut Dimension 1 Code");
      TESTFIELD("Shortcut Dimension 2 Code");

      //START - WG128 - MM - 30.11.11 - M2445 - POV
      locCorrection := FALSE;
      locPurchOrderTransNo := '';
      locCorrection := CorrectionPurchaseOrder(1, locPurchOrderTransNo, TRUE); //Transport

      {-- oldcode
      locCorrection := FALSE;
      locSalesLine.RESET;
      locSalesLine.SETRANGE("Document Type", "Document Type");
      locSalesLine.SETRANGE("Document No.", "No.");
      locSalesLine.SETRANGE(Type, SalesLine.Type::Item);
      locSalesLine.SETFILTER(Quantity, '<>0');
      locSalesLine.SETFILTER("Purchase Order No. Trans", '%1', '');
      IF NOT locSalesLine.FINDFIRST THEN BEGIN

        locCorrection := TRUE;

        locSalesLine.RESET;
        locSalesLine.SETRANGE("Document Type", "Document Type");
        locSalesLine.SETRANGE("Document No.", "No.");
        locSalesLine.SETRANGE(Type, SalesLine.Type::Item);
        locSalesLine.SETFILTER(Quantity, '<>0');
        IF locSalesLine.FINDFIRST THEN BEGIN
          locVendor := locSalesLine."Vendor No.";
          locPurchOrderTransNo := locSalesLine."Purchase Order No. Trans";
          REPEAT
            IF locVendor<>locSalesLine."Vendor No."
              THEN locCorrection := FALSE;
            IF locPurchOrderTransNo<>locSalesLine."Purchase Order No. Trans"
              THEN locCorrection := FALSE;
          UNTIL locSalesLine.NEXT = 0;
         END;

        IF locCorrection
         THEN BEGIN
            IF locPurchaseHeader.GET("Document Type"::Order, locPurchOrderTransNo)
              THEN locPurchaseHeader.DELETE(TRUE)
              ELSE locCorrection := FALSE;
          END
         ELSE ERROR(locERR01)

      END;
      }
      //STOP - WG128 - MM - 30.11.11 - M2445 - POV

      SalesLine.RESET;
      SalesLine.SETRANGE("Document Type", "Document Type");
      SalesLine.SETRANGE("Document No.", "No.");
      SalesLine.SETRANGE(Type, SalesLine.Type::Item);
      SalesLine.SETFILTER(Quantity, '<>0');
      SalesLine.SETFILTER("Purchase Order No. Trans", '%1', '');
      IF NOT locTbVendorTemp.ISEMPTY THEN
        locTbVendorTemp.DELETEALL;
      //check lines and take vendors
      IF SalesLine.FINDFIRST THEN
        REPEAT
         SalesLine.TESTFIELD("Shipping Agent Code");
         locTbShippingAgent.GET(SalesLine."Shipping Agent Code");
      //   locTbShippingAgent.TESTFIELD("Vendor No.");
         IF locTbShippingAgent."Vendor No." <> '' THEN BEGIN
           IF NOT locTbVendorTemp.GET(locTbShippingAgent."Vendor No.") THEN BEGIN
             TbVendor.GET(locTbShippingAgent."Vendor No.");
             locTbVendorTemp := TbVendor;
             locTbVendorTemp.Name := SalesLine."Shipping Agent Code";
             locTbVendorTemp.INSERT;
           END
          ELSE MESSAGE(locText001, "Shipping Agent Code", SalesLine."Line No.", SalesLine.Description, SalesLine.Quantity);
         END;
        UNTIL SalesLine.NEXT = 0;

      IF locTbVendorTemp.FINDFIRST THEN
        REPEAT
         //create purch. header
         TbPurchaseHeader.INIT;
         TbPurchaseHeader."Document Type" := TbPurchaseHeader."Document Type"::Order;
         //START - WG128 - MM - 30.11.11 - M2445 - POV
         IF locCorrection THEN
            TbPurchaseHeader."No." := locPurchOrderTransNo
         ELSE
            TbPurchaseHeader."No." := '';
         //STOP - WG128 - MM - 30.11.11 - M2445 - POV
         TbPurchaseHeader.INSERT(TRUE);
         TbPurchaseHeader.VALIDATE("Buy-from Vendor No.", locTbVendorTemp."No.");
         TbPurchaseHeader.VALIDATE("Sales Order No. Wholesale", "No.");
         TbPurchaseHeader.VALIDATE("Customer No. Wholesale", "Sell-to Customer No.");
         TbPurchaseHeader."Order Type" := TbPurchaseHeader."Order Type"::Transport;
         //START - WG - 15.07.2009 - MP - modified function "Create Purch. Order Product" and "Create Purch. Order Transport"
         TbPurchaseHeader.VALIDATE("VAT Settlement Country Code","VAT Settlement Country Code");
         //STOP - WG - 15.07.2009 - MP - modified function "Create Purch. Order Product" and "Create Purch. Order Transport"
         TbPurchaseHeader.VALIDATE("Shortcut Dimension 1 Code", "Shortcut Dimension 1 Code");
         TbPurchaseHeader.VALIDATE("Shortcut Dimension 2 Code", "Shortcut Dimension 2 Code");
         TbPurchaseHeader.MODIFY(TRUE);

         //create purch. lines
         SalesLine.SETRANGE("Shipping Agent Code", locTbVendorTemp.Name); //other filters for sales lines are still set
         LineCounter := 0;
         IF SalesLine.FINDFIRST THEN
           REPEAT
            LineCounter += 10000;
            TbPurchaseLine.INIT;
            TbPurchaseLine."Document Type" := TbPurchaseHeader."Document Type";
            TbPurchaseLine."Document No."  := TbPurchaseHeader."No.";
            TbPurchaseLine."Line No."      := LineCounter;
            TbPurchaseLine.VALIDATE("Buy-from Vendor No.", TbPurchaseHeader."Buy-from Vendor No.");
            TbPurchaseLine.Type := TbPurchaseLine.Type::"Charge (Item)";
            TbPurchaseLine.VALIDATE("No.", locPurchSetup."Charge (Item) Code for Trans");
            TbPurchaseLine.Description     := SalesLine.Description;
            TbPurchaseLine."Description 2" := SalesLine."Description 2";
            TbPurchaseLine."Select Location Of Contingent" := SalesLine."Location Code";
            TbPurchaseLine.VALIDATE("Purchase Source Code", SalesLine."Purchase Source Code");

      //      TbPurchaseLine.VALIDATE("Contingent No.", SalesLine."Contingent No.");
      //      TbPurchaseLine.VALIDATE("Location Code", SalesLine."Location Code");
            IF locTbCarPool.GET(SalesLine."Car No.") THEN BEGIN
              locTbCarPool.TESTFIELD("Location Code");
              TbPurchaseLine.VALIDATE("Location Code", locTbCarPool."Location Code");
            END;

            TbPurchaseLine.VALIDATE(Quantity, SalesLine.Quantity);
            TbPurchaseLine."Ordered Quantity (Wholesales)" := TbPurchaseLine.Quantity;
            TbPurchaseLine.VALIDATE("Direct Unit Cost", SalesLine."Purchase Price Freight (LCY)");
            TbPurchaseLine.VALIDATE(Amount, TbPurchaseLine."Direct Unit Cost" * TbPurchaseLine.Quantity);

            TbPurchaseLine."Sales Order No. Wholesale"     := SalesLine."Document No.";
            TbPurchaseLine."Sales Order Line No.Wholesale" := SalesLine."Line No.";
            //START WG164 20.8.2015 - CDLKH
            SalesLine.CALCFIELDS("Fixed Pricing Type - Purch.", "Fixed Pricing Source - Purch.");
            IF (SalesLine."Fixed Pricing Type - Purch." <> '') AND (SalesLine."Fixed Pricing Source - Purch." <> '') THEN BEGIN
              TbPurchaseLine.VALIDATE("Fixed Pricing Type", SalesLine."Fixed Pricing Type - Purch.");
              TbPurchaseLine.VALIDATE("Fixed Pricing Source", SalesLine."Fixed Pricing Source - Purch.");
            END;
            //STOP WG164 20.8.2015 - CDLKH

            TbPurchaseLine.INSERT(TRUE);

            SalesLine."Purchase Order No. Trans"     := TbPurchaseLine."Document No.";
            SalesLine."Purchase Order Line No. Trans" := TbPurchaseLine."Line No.";
            SalesLine.MODIFY;
           UNTIL SalesLine.NEXT = 0;

           //START: WG034 - JD - 15.07.2008
           lrecPurchOrderComment.RESET;
           lrecPurchOrderComment.SETRANGE(Type, lrecPurchOrderComment.Type::Transport);
           lrecPurchOrderComment.SETRANGE("Sales Header Doc. Type", "Document Type");
           lrecPurchOrderComment.SETRANGE("Sales Header No.", "No.");
           IF lrecPurchOrderComment.FINDFIRST THEN BEGIN
             REPEAT
               LineCounter += 10000;
               TbPurchaseLine.INIT;
               TbPurchaseLine."Document Type" := TbPurchaseHeader."Document Type";
               TbPurchaseLine."Document No." := TbPurchaseHeader."No.";
               TbPurchaseLine."Line No." := LineCounter;
               //+WG - 20.07.2015 - SS - SS:NAV-11668
               IF STRLEN(lrecPurchOrderComment.Description) > 50 THEN BEGIN
                TbPurchaseLine.Description := COPYSTR(lrecPurchOrderComment.Description,1,50);
                TbPurchaseLine."Description 2" := COPYSTR(lrecPurchOrderComment.Description,51);
               END ELSE BEGIN
                TbPurchaseLine.Description := lrecPurchOrderComment.Description;
               END;
               //+WG - 20.07.2015 - SS - SS:NAV-11668

               TbPurchaseLine.INSERT(TRUE);
             UNTIL lrecPurchOrderComment.NEXT = 0;
           END;
           //STOP: WG034 - JD - 15.07.2008

           //START: WG - JD - 23.07.2008
           //old code:
           //IF SendByEmailFax THEN BEGIN    // WG034 - JD - 22.05.2008
           //  IF NOT cuEmailling.SendDocByEmailFax(DocTypeOption::"Purch. Order", TbPurchaseHeader."No.", '', TRUE) THEN
           //    ERROR(Text60003);
           //END;
           //COMMIT;
           //STOP: WG - JD - 23.07.2008

        UNTIL locTbVendorTemp.NEXT = 0;

      SalesLine.RESET;
    END;

    PROCEDURE CheckPurchOrdersContacts@1220008(parCheckVendorContacts@1220002 : Boolean;parCheckTransportContacts@1220003 : Boolean);
    VAR
      lcuEmailing@1220000 : Codeunit 84400;
      locTbShippingAgent@1220001 : Record 291;
      locPurchOrderNo@1220004 : Code[20];
    BEGIN

      // check vendor contacts

      IF parCheckVendorContacts THEN
      BEGIN
        SalesLine.RESET;
        SalesLine.SETRANGE("Document Type", "Document Type");
        SalesLine.SETRANGE("Document No.", "No.");
        SalesLine.SETRANGE(Type, SalesLine.Type::Item);
        SalesLine.SETFILTER(Quantity, '<>0');
        //START - WG128 - MM - 30.11.11 - M2445 - POV
        locPurchOrderNo := '';
        IF NOT CorrectionPurchaseOrder(0, locPurchOrderNo, FALSE) THEN
           SalesLine.SETFILTER("Purchase Order No. Product", '%1', '');
        //STOP - WG128 - MM - 30.11.11 - M2445 - POV
        IF SalesLine.FINDFIRST THEN
          REPEAT
            SalesLine.TESTFIELD("Vendor No.");
            lcuEmailing.CheckContacts(SalesLine."Vendor No.", '');
          UNTIL SalesLine.NEXT = 0;
      END;

      // check transporter contacts
      IF parCheckTransportContacts THEN
      BEGIN
        SalesLine.RESET;
        SalesLine.SETRANGE("Document Type", "Document Type");
        SalesLine.SETRANGE("Document No.", "No.");
        SalesLine.SETRANGE(Type, SalesLine.Type::Item);
        SalesLine.SETFILTER(Quantity, '<>0');
        //START - WG128 - MM - 30.11.11 - M2445 - POV
        locPurchOrderNo := '';
        IF NOT CorrectionPurchaseOrder(1, locPurchOrderNo, FALSE) THEN
           SalesLine.SETFILTER("Purchase Order No. Trans", '%1', '');
        //STOP - WG128 - MM - 30.11.11 - M2445 - POV
        IF SalesLine.FINDFIRST THEN
          REPEAT
            SalesLine.TESTFIELD("Shipping Agent Code");
            locTbShippingAgent.GET(SalesLine."Shipping Agent Code");
            IF locTbShippingAgent."Vendor No." <> '' THEN
              lcuEmailing.CheckContacts(locTbShippingAgent."Vendor No.", '');
          UNTIL SalesLine.NEXT = 0;
      END;
    END;

    PROCEDURE "--WG034--"@1220005();
    BEGIN
    END;

    PROCEDURE GetContactFromCust@1220006(VAR Contact@1220003 : Record 5050) : Boolean;
    VAR
      recCust@1220001 : Record 18;
      recContBusRel@1220004 : Record 5054;
    BEGIN
      IF recCust.GET("Sell-to Customer No.") THEN BEGIN
        recContBusRel.RESET;
        recContBusRel.SETRANGE("Link to Table", recContBusRel."Link to Table"::Customer);
        recContBusRel.SETRANGE("No.", recCust."No.");
        IF recContBusRel.FINDFIRST THEN BEGIN
          Contact.GET(recContBusRel."Contact No.");
          EXIT(TRUE);
        END;
      END;

      EXIT(FALSE);
    END;

    PROCEDURE CheckPaymentMetod@1220007();
    VAR
      lrecPaymentMethod@1220000 : Record 289;
      lrecPaymMethodCheck@1220001 : Record 289;
    BEGIN
      //START - WG - 16.11.2016 - MP - NAV-19104
      IF gRecursiveCount = 0 THEN BEGIN
        IF Cust."No." = '' THEN
          GetCust("Bill-to Customer No.");
        "Payment Method Code" := Cust."Payment Method Code";
      END;
      //STOP - WG - 16.11.2016 - MP - NAV-19104

      IF lrecPaymentMethod.GET("Payment Method Code") THEN BEGIN
        //START - WG - 16.11.2016 - MP - NAV-19104
        //IF ("Currency Code" <> '') AND (STRPOS(lrecPaymentMethod."Filtr meny","Currency Code") = 0) THEN BEGIN
        lrecPaymMethodCheck.RESET;
        lrecPaymMethodCheck.SETRANGE(Code, lrecPaymentMethod.Code);
        lrecPaymMethodCheck.SETRANGE("Filtr meny", "Currency Code");
        IF lrecPaymMethodCheck.ISEMPTY THEN BEGIN
        //STOP - WG - 16.11.2016 - MP - NAV-19104
          //START - WG - 20.01.2010 - MP - new check at setting field Payment Method Code
          //"Payment Method Code" := lrecPaymentMethod."JinÏ zpÖsob platby";
          IF Cust."No." = '' THEN
            GetCust("Bill-to Customer No.");
          "Payment Method Code" := lrecPaymentMethod.CheckCustPaymMethod(lrecPaymentMethod."Jiny zpusob platby", Cust);
          //STOP - WG - 20.01.2010 - MP - new check at setting field Payment Method Code
          //START - WG - 16.11.2016 - MP - NAV-19104
          gRecursiveCount += 1;
          IF gRecursiveCount > 10 THEN
            ERROR(Text053);
          CheckPaymentMetod();
          //STOP - WG - 16.11.2016 - MP - NAV-19104
        END;
      END;
    END;

    PROCEDURE GetFirstNoFromText@1000000004(pText@1000000000 : Text[1024]) : Code[20];
    VAR
      i@1000000001 : Integer;
      lNo@1000000002 : Code[20];
    BEGIN
      //WG047 VP 8.6.2009

      REPEAT
        i += 1;
      UNTIL (i = STRLEN(pText)) OR (pText[i] IN ['0'..'9']);

      WHILE (i <= STRLEN(pText)) AND (pText[i] IN ['0'..'9']) DO BEGIN
        lNo := lNo + FORMAT(pText[i]);
        i += 1;
      END;

      EXIT(lNo);
    END;

    PROCEDURE SetVATToSalesLineByDate@1220010();
    VAR
      lrecSaleLine@1220000 : Record 37;
    BEGIN

      lrecSaleLine.RESET;
      lrecSaleLine.SETRANGE("Document Type", "Document Type");
      lrecSaleLine.SETRANGE("Document No.", "No.");
      //START - WG083 - 23.06.2010 - MP - VAT by date
      lrecSaleLine.SETRANGE(Type, lrecSaleLine.Type::"G/L Account", lrecSaleLine.Type::"Charge (Item)");
      //STOP - WG083 - 23.06.2010 - MP - VAT by date
      IF lrecSaleLine.FINDSET THEN REPEAT
        lrecSaleLine.VALIDATE("VAT Prod. Posting Group");
        lrecSaleLine.MODIFY;
      UNTIL lrecSaleLine.NEXT = 0;
    END;

    PROCEDURE "--WG123--"@1220009();
    BEGIN
    END;

    PROCEDURE AddDiscountToSalesLines@1220011(parSalesHeader@1220000 : Record 36);
    VAR
      locSalesLine@1220001 : Record 37;
      locSalesLineNEW@1220003 : Record 37;
      locLCD@1220002 : Record 84687;
      locChargeAss@1220004 : Record 5809;
      lExtraDisc@1220006 : Decimal;
      lcuSalPriceCalcMgt@1220005 : Codeunit 7000;
      locSalesLineExt@1220007 : Record 84941;
    BEGIN
      locSalesLine.RESET;
      locSalesLine.SETRANGE("Document Type",parSalesHeader."Document Type");
      locSalesLine.SETRANGE("Document No.",parSalesHeader."No.");
      locSalesLine.SETRANGE(Type,locSalesLine.Type::Item);
      locSalesLine.SETRANGE("Totem Price", 0); //WG149 KH 120213 Totem Minus
      IF locSalesLine.FINDSET THEN REPEAT
        //START WG164 cdlkh 1.4.2015
        locSalesLineExt.GET(locSalesLine."Document Type", locSalesLine."Document No.", locSalesLine."Line No.");
        IF NOT locSalesLineExt."Uses Pricing Module" THEN BEGIN
        //STOP WG164 cdlkh 1.4.2015
          //check discount
          IF locSalesLine."TT Date" <> 0D THEN BEGIN
            locLCD.RESET;
            locLCD.SETRANGE("Location Code",locSalesLine."Location Code");
            locLCD.SETRANGE("Discount Currency",parSalesHeader."Currency Code");
            locLCD.SETRANGE("Item No.",locSalesLine."No.");
            locLCD.SETFILTER("Item Charge No.",'<>%1','');
            locLCD.SETFILTER("Discount Amount",'<>%1',0);
            locLCD.SETFILTER("Duration from",'<=%1',locSalesLine."TT Date");
            locLCD.SETFILTER("Duration to",'>=%1|=%2',locSalesLine."TT Date",0D);
            IF locLCD.FINDLAST THEN BEGIN
              //discount exist

              //START - WG - 17.02.2014 - MP - mant 6370
              // === check not exist EXTRA discount ===
              lExtraDisc := lcuSalPriceCalcMgt.GetExtraPrice(parSalesHeader."Sell-to Customer No.", locSalesLine."No.",
                locSalesLine."Sales Source Code", locSalesLine."TT Date", locSalesLine."Location Code");
              IF lExtraDisc = 0 THEN BEGIN
              //STOP - WG - 17.02.2014 - MP - mant 6370
                //create new sales line
                locSalesLineNEW.INIT;
                locSalesLineNEW."Document Type" := locSalesLine."Document Type";
                locSalesLineNEW."Document No."  := locSalesLine."Document No.";
                locSalesLineNEW."Line No."      := locSalesLine."Line No." + 26;
                IF locSalesLineNEW.INSERT THEN;
                locSalesLineNEW.VALIDATE(Type,locSalesLineNEW.Type::"Charge (Item)");
                locSalesLineNEW.VALIDATE("No.",locLCD."Item Charge No.");
                locSalesLineNEW."TT Date" := locSalesLine."TT Date";
                locSalesLineNEW.VALIDATE("Gen. Prod. Posting Group",locSalesLine."Gen. Prod. Posting Group");
                locSalesLineNEW.VALIDATE("VAT Prod. Posting Group",locSalesLine."VAT Prod. Posting Group");
                locSalesLineNEW.VALIDATE("Location Code",locSalesLine."Location Code");
                locSalesLineNEW.VALIDATE(Quantity,locSalesLine.Quantity);
                locSalesLineNEW.VALIDATE("Unit Price",-locLCD."Discount Amount");
                locSalesLineNEW.VALIDATE("Unit of Measure Code",locSalesLine."Unit of Measure Code");
                //START - WG - 26.09.2011 - RCH - M1656 -  AddDiscountToSalesLines modify
                locSalesLineNEW."Product Code" := locSalesLine."Product Code";
                //STOP - WG - 26.09.2011 - RCH - M1656 -  AddDiscountToSalesLines modify
                //+WG - 30.12.2015 - SS - NAV-15171
                locSalesLineNEW."TT Date" := locSalesLine."TT Date";
                locSalesLineNEW."TT Time" := locSalesLine."TT Time";
                locSalesLineNEW."Licence Plate" := locSalesLine."Licence Plate";
                locSalesLineNEW."Card No." := locSalesLine."Card No.";
                //-WG - 30.12.2015 - SS - NAV-15171

                locSalesLineNEW.MODIFY;
        //START WAG - 03.10.2014 - JV - J10015
                locSalesLineNEW.InsertSalesLineEXT;
        //STOP WAG - 03.10.2014 - JV - J10015

                // 24.10.2011 - zero lines
                //
                IF locSalesLineNEW."Line Amount" = 0 THEN BEGIN
                  locSalesLineNEW.DELETE;
        //START WAG - 03.10.2014 - JV - J10015
                  locSalesLineNEW.DeleteSalesLineEXT;
        //STOP WAG - 03.10.2014 - JV - J10015
                END ELSE BEGIN
                  //create charge linking
                  locChargeAss.INIT;
                  locChargeAss."Document Type"            := locSalesLineNEW."Document Type";
                  locChargeAss."Document No."             := locSalesLineNEW."Document No.";
                  locChargeAss."Document Line No."        := locSalesLineNEW."Line No.";
                  locChargeAss."Line No."                 := 9999;
                  locChargeAss."Item Charge No."          := locLCD."Item Charge No.";
                  locChargeAss."Item No."                 := locLCD."Item No.";
                  locChargeAss.Description                := locSalesLineNEW.Description;
                  locChargeAss."Applies-to Doc. Type"     := locSalesLine."Document Type";
                  locChargeAss."Applies-to Doc. No."      := locSalesLine."Document No.";
                  locChargeAss."Applies-to Doc. Line No." := locSalesLine."Line No.";
                  locChargeAss."Unit Cost"                := locSalesLineNEW."Unit Price";
                  locChargeAss.VALIDATE("Qty. to Assign",locSalesLineNEW.Quantity);
                  locChargeAss.VALIDATE("Amount to Assign",locSalesLineNEW."Line Amount");
                  IF NOT locChargeAss.INSERT THEN
                    locChargeAss.MODIFY;
                END;
              //START - WG - 17.02.2014 - MP - mant 6370
              END;
              //STOP - WG - 17.02.2014 - MP - mant 6370
            END;
          END;
        //START WG164 cdlkh 1.4.2015
        END;
        //STOP WG164 cdlkh 1.4.2015
      UNTIL(locSalesLine.NEXT=0);
    END;

    PROCEDURE AddPromoDiscountToSalesLines@1220014(parSalesHeader@1220000 : Record 36);
    VAR
      locSalesLine@1220001 : Record 37;
      locSalesLineXXX@1220005 : Record 37;
      locSalesLineNEW@1220003 : Record 37;
      locPromoDiscount@1220006 : Decimal;
      lrecEWPD@1220007 : Record 84748;
      lrecSalesSetup@1220004 : Record 311;
      locChargeAss@1220002 : Record 5809;
      locSalesLineEXT@1220008 : Record 84941;
    BEGIN

      //WG - 12.04.2012 - RCH - M3349 - EW Promo Discount

      locSalesLine.RESET;
      locSalesLine.SETRANGE("Document Type",parSalesHeader."Document Type");
      locSalesLine.SETRANGE("Document No.",parSalesHeader."No.");
      locSalesLine.SETRANGE(Type,locSalesLine.Type::Item);
      locSalesLine.SETRANGE("Totem Price", 0); //WG149 KH 120213 Totem Minus
      // locSalesLine.SETFILTER("Qty. to Ship",'<>%1',0);  //??? - bÏv† dod†no...
      IF locSalesLine.FINDSET THEN REPEAT
        //START WG164 cdlkh 1.4.2015
        locSalesLineEXT.GET(locSalesLine."Document Type", locSalesLine."Document No.", locSalesLine."Line No.");
        IF NOT locSalesLineEXT."Uses Pricing Module" THEN BEGIN
        //STOP WG164 cdlkh 1.4.2015
          //check discount
          locSalesLineXXX := locSalesLine;
          locSalesLineXXX.VALIDATE(Quantity,locSalesLineXXX.Quantity);
          locPromoDiscount := lrecEWPD.ONE_GetPromoDiscount(locSalesLineXXX."Sell-to Customer No.",
                                                            parSalesHeader."Currency Code",
                                                            locSalesLineXXX."TT Date",
                                                            parSalesHeader."Sell-to Country Code",
                                                            locSalesLineXXX."No.");

          //discount exist
          IF locPromoDiscount <> 0 THEN BEGIN
             lrecSalesSetup.GET;
             lrecSalesSetup.TESTFIELD("ONE Promo Disc Item Charge No.");

             //change original Line
             locSalesLine.VALIDATE("Unit Price",locSalesLineXXX."Unit Price" - locPromoDiscount);
             locSalesLine.MODIFY;

             //create new sales line
             locSalesLineNEW.INIT;
             locSalesLineNEW."Document Type" := locSalesLine."Document Type";
             locSalesLineNEW."Document No."  := locSalesLine."Document No.";
             locSalesLineNEW."Line No."      := locSalesLine."Line No." + 27;
             IF locSalesLineNEW.INSERT THEN;
             locSalesLineNEW.VALIDATE(Type,locSalesLineNEW.Type::"Charge (Item)");
             locSalesLineNEW.VALIDATE("No.",lrecSalesSetup."ONE Promo Disc Item Charge No.");
             locSalesLineNEW."TT Date" := locSalesLine."TT Date";
             locSalesLineNEW.VALIDATE("Gen. Prod. Posting Group",locSalesLine."Gen. Prod. Posting Group");
             locSalesLineNEW.VALIDATE("VAT Prod. Posting Group",locSalesLine."VAT Prod. Posting Group");
             locSalesLineNEW.VALIDATE("Location Code",locSalesLine."Location Code");
             locSalesLineNEW.VALIDATE(Quantity,locSalesLine.Quantity);
             locSalesLineNEW.VALIDATE("Unit Price",locPromoDiscount);
             locSalesLineNEW.VALIDATE("Unit of Measure Code",locSalesLine."Unit of Measure Code");
             locSalesLineNEW."Product Code" := locSalesLine."Product Code";
             //+WG - 30.12.2015 - SS - NAV-15171
             locSalesLineNEW."TT Date" := locSalesLine."TT Date";
             locSalesLineNEW."TT Time" := locSalesLine."TT Time";
             locSalesLineNEW."Licence Plate" := locSalesLine."Licence Plate";
             locSalesLineNEW."Card No." := locSalesLine."Card No.";
             //-WG - 30.12.2015 - SS - NAV-15171
             locSalesLineNEW.MODIFY;
             //START WAG - 03.10.2014 - JV - J10015
             locSalesLineNEW.InsertSalesLineEXT;
             //STOP WAG - 03.10.2014 - JV - J10015

             IF locSalesLineNEW."Line Amount" = 0 THEN BEGIN
                locSalesLineNEW.DELETE;
                //START WAG - 03.10.2014 - JV - J10015
                locSalesLineNEW.DeleteSalesLineEXT;
               //STOP WAG - 03.10.2014 - JV - J10015
                END
             ELSE BEGIN
                //create charge linking
                locChargeAss.INIT;
                locChargeAss."Document Type"            := locSalesLineNEW."Document Type";
                locChargeAss."Document No."             := locSalesLineNEW."Document No.";
                locChargeAss."Document Line No."        := locSalesLineNEW."Line No.";
                locChargeAss."Line No."                 := 9999;
                locChargeAss."Item Charge No."          := lrecSalesSetup."ONE Promo Disc Item Charge No.";
                locChargeAss."Item No."                 := locSalesLineNEW."No.";
                locChargeAss.Description                := locSalesLineNEW.Description;
                locChargeAss."Applies-to Doc. Type"     := locSalesLine."Document Type";
                locChargeAss."Applies-to Doc. No."      := locSalesLine."Document No.";
                locChargeAss."Applies-to Doc. Line No." := locSalesLine."Line No.";
                locChargeAss."Unit Cost"                := locSalesLineNEW."Unit Price";
                locChargeAss.VALIDATE("Qty. to Assign",locSalesLineNEW.Quantity);
                locChargeAss.VALIDATE("Amount to Assign",locSalesLineNEW."Line Amount");
                IF NOT locChargeAss.INSERT THEN
                   locChargeAss.MODIFY;
                END;
             END;

            //START - WG - 19.03.2013 - RCH - M5179 - EW Promo Discount
            //
            // uß v cu 7000 se modifikuje cena...
            //
            //      //check EE discount
            //      locSalesLineXXX := locSalesLine;
            //      locSalesLineXXX.VALIDATE(Quantity,locSalesLineXXX.Quantity);
            //      locPromoDiscount := lrecEWPD.EE_GetPromoDiscount(locSalesLineXXX."Sell-to Customer No.",
            //                                                       parSalesHeader."Currency Code",
            //                                                       locSalesLineXXX."TT Date",
            //                                                       parSalesHeader."Sell-to Country Code",
            //                                                       locSalesLineXXX."No.");
            //      //discount exist
            //      IF locPromoDiscount <> 0 THEN BEGIN
            //         //change original Line
            //         locSalesLine.VALIDATE("Unit Price",locSalesLineXXX."Unit Price" - ABS(locPromoDiscount));
            //         locSalesLine.MODIFY;
            //         END;
            //STOP - WG - 19.03.2013 - RCH - M5179 - EW Promo Discount
        //START WG164 cdlkh 1.4.2015
        END;
        //STOP WG164 cdlkh 1.4.2015
      UNTIL(locSalesLine.NEXT=0);
    END;

    PROCEDURE AddExtraDiscountToSalesLines@1220017(inSalesHead@1220000 : Record 36);
    VAR
      lrecSalesSetup@1220007 : Record 311;
      lrecCust@1220004 : Record 18;
      lrecSaleLine@1220001 : Record 37;
      lrecSaleLineNEW@1220003 : Record 37;
      locExtraDiscount@1220006 : Decimal;
      lrecChargeAss@1220002 : Record 5809;
      lcuPriceMng@1220005 : Codeunit 7000;
      locSalesLineExt@1220008 : Record 84941;
    BEGIN
      lrecCust.GET(inSalesHead."Sell-to Customer No.");
      IF NOT lrecCust."Extra Price - New Inv. Line" THEN
        EXIT;

      lrecSaleLine.RESET;
      lrecSaleLine.SETRANGE("Document Type", inSalesHead."Document Type");
      lrecSaleLine.SETRANGE("Document No.", inSalesHead."No.");
      lrecSaleLine.SETRANGE(Type, lrecSaleLine.Type::Item);
      lrecSaleLine.SETRANGE("Totem Price", 0);
      IF lrecSaleLine.FINDSET THEN REPEAT
        //START WG164 cdlkh 1.4.2015
        locSalesLineExt.GET(lrecSaleLine."Document Type", lrecSaleLine."Document No.", lrecSaleLine."Line No.");
        IF NOT locSalesLineExt."Uses Pricing Module" THEN BEGIN
        //STOP WG164 cdlkh 1.4.2015
          // === check discount ===
          locExtraDiscount := lcuPriceMng.GetExtraPrice(inSalesHead."Sell-to Customer No.", lrecSaleLine."No.",
            lrecSaleLine."Sales Source Code", lrecSaleLine."TT Date", lrecSaleLine."Location Code");

          // === discount exist ===
          IF locExtraDiscount <> 0 THEN BEGIN
            lrecSalesSetup.GET;
            lrecSalesSetup.TESTFIELD("Extra Price Item Charge No.");

            // === change original Line ===
            lrecSaleLine.VALIDATE("Unit Price", lrecSaleLine."Unit Price" - locExtraDiscount);
            lrecSaleLine.MODIFY;
            //START WAG - 03.10.2014 - JV - J10015
            lrecSaleLine.ModifySalesLineEXT;
            //STOP WAG - 03.10.2014 - JV - J10015

            // === create new sales line ===
            lrecSaleLineNEW.INIT;
            lrecSaleLineNEW."Document Type" := lrecSaleLine."Document Type";
            lrecSaleLineNEW."Document No." := lrecSaleLine."Document No.";
            lrecSaleLineNEW."Line No." := lrecSaleLine."Line No." + 28;
            IF lrecSaleLineNEW.INSERT THEN;
            lrecSaleLineNEW.VALIDATE(Type, lrecSaleLineNEW.Type::"Charge (Item)");
            lrecSaleLineNEW.VALIDATE("No.", lrecSalesSetup."Extra Price Item Charge No.");
            lrecSaleLineNEW."TT Date" := lrecSaleLine."TT Date";
            lrecSaleLineNEW.VALIDATE("Gen. Prod. Posting Group", lrecSaleLine."Gen. Prod. Posting Group");
            lrecSaleLineNEW.VALIDATE("VAT Prod. Posting Group", lrecSaleLine."VAT Prod. Posting Group");
            lrecSaleLineNEW.VALIDATE("Location Code", lrecSaleLine."Location Code");
            lrecSaleLineNEW.VALIDATE(Quantity, lrecSaleLine.Quantity);
            lrecSaleLineNEW.VALIDATE("Unit Price", locExtraDiscount);
            lrecSaleLineNEW.VALIDATE("Unit of Measure Code", lrecSaleLine."Unit of Measure Code");
            lrecSaleLineNEW."Product Code" := lrecSaleLine."Product Code";
            //+WG - 30.12.2015 - SS - NAV-15171
            lrecSaleLineNEW."TT Date" := lrecSaleLine."TT Date";
            lrecSaleLineNEW."TT Time" := lrecSaleLine."TT Time";
            lrecSaleLineNEW."Licence Plate" := lrecSaleLine."Licence Plate";
            lrecSaleLineNEW."Card No." := lrecSaleLine."Card No.";
            //-WG - 30.12.2015 - SS - NAV-15171
            lrecSaleLineNEW.MODIFY;
            //START WAG - 03.10.2014 - JV - J10015
            lrecSaleLineNEW.InsertSalesLineEXT;
            //STOP WAG - 03.10.2014 - JV - J10015


            IF lrecSaleLineNEW."Line Amount" = 0 THEN BEGIN
              lrecSaleLineNEW.DELETE;
              //START WAG - 03.10.2014 - JV - J10015
              lrecSaleLineNEW.DeleteSalesLineEXT;
              //STOP WAG - 03.10.2014 - JV - J10015

            END ELSE BEGIN
              // === create charge linking ===
              lrecChargeAss.INIT;
              lrecChargeAss."Document Type" := lrecSaleLineNEW."Document Type";
              lrecChargeAss."Document No." := lrecSaleLineNEW."Document No.";
              lrecChargeAss."Document Line No." := lrecSaleLineNEW."Line No.";
              lrecChargeAss."Line No." := 9999;
              lrecChargeAss."Item Charge No." := lrecSalesSetup."Extra Price Item Charge No.";
              lrecChargeAss."Item No." := lrecSaleLineNEW."No.";
              lrecChargeAss.Description := lrecSaleLineNEW.Description;
              lrecChargeAss."Applies-to Doc. Type" := lrecSaleLine."Document Type";
              lrecChargeAss."Applies-to Doc. No." := lrecSaleLine."Document No.";
              lrecChargeAss."Applies-to Doc. Line No." := lrecSaleLine."Line No.";
              lrecChargeAss."Unit Cost" := lrecSaleLineNEW."Unit Price";
              lrecChargeAss.VALIDATE("Qty. to Assign", lrecSaleLineNEW.Quantity);
              lrecChargeAss.VALIDATE("Amount to Assign", lrecSaleLineNEW."Line Amount");
              IF NOT lrecChargeAss.INSERT THEN
                lrecChargeAss.MODIFY;
            END;
          END;
        //START WG164 cdlkh 1.4.2015
        END;
        //STOP WG164 cdlkh 1.4.2015
      UNTIL lrecSaleLine.NEXT = 0;
    END;

    PROCEDURE CorrectionPurchaseOrder@1220013(PurchOrderType@1220000 : 'Product,Transport';VAR PurchOrderNo@1220009 : Code[20];Delete@1220002 : Boolean) : Boolean;
    VAR
      "-WG128-"@1220006 : Integer;
      locSalesLine@1220005 : Record 37;
      locCorrection@1220004 : Boolean;
      locVendor@1220003 : Code[20];
      locPurchaseHeader@1220001 : Record 38;
      locERR01@1220007 : TextConst 'CSY=Oprava n†kupn° objedn†vky PHM nen° moßn† ˝†dky obsahuj° v°ce neß jednoho dodavatele nebo ü°sela n†kupn°ch objedn†vek PHM.';
      locERR02@1220008 : TextConst 'CSY=Oprava n†kupn° objedn†vky dopravy nen° moßn† ˝†dky obsahuj° v°ce neß jednoho dodavatele nebo ü°sela n†kupn°ch objedn†vek dopravy.';
    BEGIN

      //START - WG128 - MM - 30.11.11 - M2445 - POV
      locCorrection := FALSE;
      locSalesLine.RESET;
      locSalesLine.SETRANGE("Document Type", "Document Type");
      locSalesLine.SETRANGE("Document No.", "No.");
      locSalesLine.SETRANGE(Type, locSalesLine.Type::Item);
      locSalesLine.SETFILTER(Quantity, '<>0');
      IF PurchOrderType=PurchOrderType::Product
        THEN locSalesLine.SETFILTER("Purchase Order No. Product", '%1', '');
      IF PurchOrderType=PurchOrderType::Transport
        THEN locSalesLine.SETFILTER("Purchase Order No. Trans", '%1', '');

      IF NOT locSalesLine.FINDFIRST THEN BEGIN

        locCorrection := TRUE;

        locSalesLine.RESET;
        locSalesLine.SETRANGE("Document Type", "Document Type");
        locSalesLine.SETRANGE("Document No.", "No.");
        locSalesLine.SETRANGE(Type, locSalesLine.Type::Item);
        locSalesLine.SETFILTER(Quantity, '<>0');
        IF locSalesLine.FINDFIRST THEN BEGIN
          locVendor := locSalesLine."Vendor No.";
          IF PurchOrderType=PurchOrderType::Product
            THEN PurchOrderNo := locSalesLine."Purchase Order No. Product";
          IF PurchOrderType=PurchOrderType::Transport
            THEN PurchOrderNo := locSalesLine."Purchase Order No. Trans";
          REPEAT
            IF locVendor<>locSalesLine."Vendor No."
              THEN locCorrection := FALSE;
            IF PurchOrderType=PurchOrderType::Product THEN
             IF PurchOrderNo<>locSalesLine."Purchase Order No. Product"
               THEN locCorrection := FALSE;
            IF PurchOrderType=PurchOrderType::Transport THEN
             IF PurchOrderNo<>locSalesLine."Purchase Order No. Trans"
               THEN locCorrection := FALSE;
          UNTIL locSalesLine.NEXT = 0;
         END;

        IF locCorrection
         THEN BEGIN
           IF Delete THEN
             IF locPurchaseHeader.GET("Document Type"::Order, PurchOrderNo)
               THEN locPurchaseHeader.DELETE(TRUE)
               ELSE locCorrection := FALSE;
          END
         ELSE BEGIN
           IF PurchOrderType=PurchOrderType::Product THEN ERROR(locERR01);
           IF PurchOrderType=PurchOrderType::Transport THEN ERROR(locERR02);
         END;

      END;

      EXIT(locCorrection);
      //STOP - WG128 - MM - 30.11.11 - M2445 - POV
    END;

    PROCEDURE "--J10015--"@1220020();
    BEGIN
    END;

    PROCEDURE ClearSalesHeaderEXT@1220030();
    BEGIN
      SalesHeaderEXTLoaded := FALSE;
      CLEAR(SalesHeaderEXT);
    END;

    PROCEDURE GetSalesHeaderEXT@1220021();
    BEGIN
      //START WG - 31.10.2014 - J10015
      //old code - DO NOT USE temporary loading of SalesHeaderExt -> GET SalesHeaderExt everytime (to avoid problems)
      //IF SalesHeaderEXTLoaded THEN
      //  EXIT;
      //STOP WG - 31.10.2014 - J10015

      IF NOT SalesHeaderEXT.GET("Document Type","No.") THEN
        CreateSalesHeaderEXT;

      SalesHeaderEXTLoaded := TRUE;
    END;

    PROCEDURE GetSalesHeaderEXT2@1220018(VAR parSalesHeaderEXT@1220000 : Record 84940);
    BEGIN
      GetSalesHeaderEXT;
      parSalesHeaderEXT := SalesHeaderEXT;
    END;

    PROCEDURE CreateSalesHeaderEXT@1220023();
    BEGIN
      CLEAR(SalesHeaderEXT);
      IF SalesHeaderEXT.GET("Document Type","No.") THEN BEGIN
        SalesHeaderEXTLoaded := TRUE;
      END ELSE BEGIN
        SalesHeaderEXT.INIT;
        SalesHeaderEXT."Document Type" := "Document Type";
        SalesHeaderEXT."No." := "No.";
        SalesHeaderEXT.INSERT(TRUE);
      END;
    END;

    PROCEDURE ModifySalesHeaderEXT@1220028();
    BEGIN
      //START WG - 31.10.2014 - J10015
      //old code - DO NOT USE temporary loading of SalesHeaderExt -> GET SalesHeaderExt everytime (to avoid problems)
      //IF SalesHeaderEXTLoaded THEN
      //  SalesHeaderEXT.MODIFY(TRUE);
      //cz comment:pokud nen° prim†rn° kl°ü shodnÏ, promÿnn† SalesHeaderExt nebyla pro tuto hlaviüku naütena a proto nen° t˝eba modifikace
      IF ("Document Type" = SalesHeaderEXT."Document Type") AND
         ("No." = SalesHeaderEXT."No.") THEN
        SalesHeaderEXT.MODIFY(TRUE);
      //STOP WG - 31.10.2014 - J10015
    END;

    PROCEDURE DeleteSalesHeaderEXT@1220033();
    BEGIN
      GetSalesHeaderEXT;
      SalesHeaderEXT.DELETE(TRUE);
    END;

    PROCEDURE VATCurrRateTypeOnValidate@1220025(parValue@1220000 : 'Cross rate,Calc. Currency rate,Manual');
    VAR
      SalesHeaderEXTOld@1220001 : Record 84940;
    BEGIN
      GetSalesHeaderEXT;
      //START WAG - 26.02.2015 - JV - J10015
      IF (SalesHeaderEXT."VAT Currency Rate Type"=SalesHeaderEXT."VAT Currency Rate Type"::Manual) AND
         (parValue <> parValue::Manual) THEN BEGIN
        ClearEXTLineAmounts;
        IF NOT HideValidationDialog THEN
          MESSAGE(Text50022);
      END;
      SalesHeaderEXTOld := SalesHeaderEXT;
      //STOP WAG - 26.02.2015 - JV - J10015

      SalesHeaderEXT."VAT Currency Rate Type" := parValue;
      IF SalesHeaderEXT."VAT Currency Rate Type" <> SalesHeaderEXT."VAT Currency Rate Type"::"Calc. Currency rate" THEN
        SalesHeaderEXT.VALIDATE("VAT Calc. Currency Code",'');

      IF SalesHeaderEXT."VAT Currency Rate Type" =  SalesHeaderEXT."VAT Currency Rate Type"::"Cross rate" THEN
        ConfirmUpdateVATCurrencyFactor;

      ModifySalesHeaderEXT;

      //START WAG - 26.02.2015 - JV - J10015
      IF (SalesHeaderEXTOld."VAT Currency Rate Type" <> SalesHeaderEXTOld."VAT Currency Rate Type"::Manual) AND
         (parValue = parValue::Manual) THEN BEGIN
        SetEXTLineAmounts;
        IF NOT HideValidationDialog THEN
          MESSAGE(Text50023);
      END;
      //STOP WAG - 26.02.2015 - JV - J10015
    END;

    PROCEDURE VATCurrCodeOnValidate@1220019(parCode@1220000 : Code[20]);
    BEGIN
      GetSalesHeaderEXT;
      SalesHeaderEXT."VAT Currency Code" := parCode;

      IF SalesHeaderEXT."VAT Currency Code" <> '' THEN BEGIN
        ConfirmUpdateVATCurrencyFactor;
        UpdateVATCurrencyFactor;
      END;

      ModifySalesHeaderEXT;
    END;

    PROCEDURE VATCurrCodeOnLookup@1220022();
    VAR
      lCurrency@1220000 : Record 4;
    BEGIN
      GetSalesHeaderEXT;
      IF NOT lCurrency.GET(SalesHeaderEXT."VAT Currency Code") THEN;
      IF FORM.RUNMODAL(0,lCurrency) = ACTION::LookupOK THEN; //field is not editable
    END;

    PROCEDURE VATCurrCodeOnAssistEdit@1220024() : Boolean;
    VAR
      ChangeExchangeRate@1220000 : Form 511;
    BEGIN
      GetSalesHeaderEXT;
      CLEAR(ChangeExchangeRate);
      IF SalesHeaderEXT."VAT Currency Factor" = 0 THEN
        SalesHeaderEXT."VAT Currency Factor" := 1;
      ChangeExchangeRate.SetParameter(SalesHeaderEXT."VAT Currency Code",SalesHeaderEXT."VAT Currency Factor","VAT Taxation Date");
      ChangeExchangeRate.SetUseCrossRate(TRUE);
      ChangeExchangeRate.SetParametersVAT("Currency Code");

      IF ChangeExchangeRate.RUNMODAL = ACTION::OK THEN BEGIN
        SalesHeaderEXT.TESTFIELD("VAT Currency Rate Type",SalesHeaderEXT."VAT Currency Rate Type"::Manual);
        SalesHeaderEXT.VALIDATE("VAT Currency Factor",ChangeExchangeRate.GetParameter);
        SalesHeaderEXT.MODIFY;
        EXIT(TRUE);
      END ELSE
        EXIT(FALSE);
      CLEAR(ChangeExchangeRate);
    END;

    PROCEDURE VATCalcCurrCodeOnValidate@1220027(parCode@1220000 : Code[20]);
    BEGIN
      GetSalesHeaderEXT;
      SalesHeaderEXT.TESTFIELD("VAT Currency Rate Type",SalesHeaderEXT."VAT Currency Rate Type"::"Calc. Currency rate");
      SalesHeaderEXT.VALIDATE("VAT Calc. Currency Code",parCode);
      ConfirmUpdateVATCurrencyFactor;
      ModifySalesHeaderEXT;
    END;

    PROCEDURE VATCalcCurrCodeOnLookup@1220026();
    VAR
      lCurrency@1220000 : Record 4;
    BEGIN
      GetSalesHeaderEXT;
      IF NOT lCurrency.GET(SalesHeaderEXT."VAT Calc. Currency Code") THEN;
      IF FORM.RUNMODAL(0,lCurrency) = ACTION::LookupOK THEN
        VATCalcCurrCodeOnValidate(lCurrency.Code);
    END;

    PROCEDURE UpdateVATCurrencyFactor@1100201004();
    BEGIN
      IF SalesHeaderEXT."VAT Currency Rate Type" = SalesHeaderEXT."VAT Currency Rate Type"::Manual THEN
        EXIT;

      IF ("VAT Taxation Date" = 0D) THEN
        EXIT;

      IF SalesHeaderEXT."VAT Currency Code" <> '' THEN BEGIN
        IF ("Document Type" IN ["Document Type"::Quote,"Document Type"::"Blanket Order"]) AND
           ("VAT Taxation Date" = 0D)
        THEN
          CurrencyDate := WORKDATE
        ELSE
          CurrencyDate := "VAT Taxation Date";
        CASE SalesHeaderEXT."VAT Currency Rate Type" OF
          SalesHeaderEXT."VAT Currency Rate Type"::"Cross rate":
            BEGIN
              SalesHeaderEXT.VALIDATE("VAT Currency Factor",1/VATCurrMgt.GetVATRate(
                                                               "VAT Settlement Country Code",
                                                               "Currency Code",
                                                               SalesHeaderEXT."VAT Currency Code",
      //START WAG - 16.10.2014 - JV - J10015
      //old code:
      //                                                         "Document Date",
      //                                                         "VAT Taxation Date"));
                                                               "VAT Taxation Date",
                                                               "Document Date"));
      //STOP WAG - 16.10.2014 - JV - J10015
            END;
          SalesHeaderEXT."VAT Currency Rate Type"::"Calc. Currency rate":
            BEGIN
              SalesHeaderEXT.VALIDATE("VAT Currency Factor",
                                      CurrExchRate.ExchangeRate(CurrencyDate,SalesHeaderEXT."VAT Calc. Currency Code"));
            END;
        END; //case
      END ELSE
        SalesHeaderEXT."VAT Currency Factor" := 1;
      ModifySalesHeaderEXT;
    END;

    PROCEDURE ConfirmUpdateVATCurrencyFactor@1100201003();
    BEGIN
      IF SalesHeaderEXT."VAT Currency Rate Type" = SalesHeaderEXT."VAT Currency Rate Type"::Manual THEN
        EXIT;
      IF NOT GUIALLOWED THEN
        HideValidationDialog := TRUE;

      IF HideValidationDialog THEN
        Confirmed := TRUE
      ELSE
        //WG - 25.085.2017 - RAKU - NAV-22520 - begin
        //Confirmed := CONFIRM(Text50021,FALSE);
        Confirmed := TRUE;
        //WG - 25.085.2017 - RAKU - NAV-22520 - end
      IF Confirmed THEN
        UpdateVATCurrencyFactor;
    END;

    PROCEDURE GetVATCurrencyFactor@1220038() : Decimal;
    VAR
      locPrecision@1220000 : Decimal;
    BEGIN
      IF SalesHeaderEXT."VAT Currency Rate Type" = SalesHeaderEXT."VAT Currency Rate Type"::Manual THEN
        EXIT;

      IF ("VAT Taxation Date" = 0D) THEN
        EXIT;

      IF SalesHeaderEXT."VAT Currency Code" <> '' THEN BEGIN
        locPrecision := 0.000000000000001;
        IF ("Document Type" IN ["Document Type"::Quote,"Document Type"::"Blanket Order"]) AND
           ("VAT Taxation Date" = 0D) THEN
          CurrencyDate := WORKDATE
        ELSE
          CurrencyDate := "VAT Taxation Date";

        CASE SalesHeaderEXT."VAT Currency Rate Type" OF
          SalesHeaderEXT."VAT Currency Rate Type"::"Cross rate" : BEGIN
            EXIT(ROUND(1/VATCurrMgt.GetVATRate("VAT Settlement Country Code", "Currency Code", SalesHeaderEXT."VAT Currency Code",
              "VAT Taxation Date", "Document Date"), locPrecision));
          END;
          SalesHeaderEXT."VAT Currency Rate Type"::"Calc. Currency rate" : BEGIN
            EXIT(ROUND(CurrExchRate.ExchangeRate(CurrencyDate,SalesHeaderEXT."VAT Calc. Currency Code"), locPrecision));
          END;
        END;
      END ELSE
        EXIT(1);
    END;

    PROCEDURE ClearEXTLineAmounts@1220031();
    VAR
      SalesLineEXT@1220000 : Record 84941;
      SalesLine@1220001 : Record 37;
    BEGIN
      SalesLine.RESET;
      SalesLine.SETRANGE("Document Type","Document Type");
      SalesLine.SETRANGE("Document No.","No.");
      IF NOT SalesLine.ISEMPTY THEN BEGIN
        SalesLine.MODIFYALL("VAT Difference",0);
        SalesLine.MODIFYALL("VAT Difference (LCY)",0);
        SalesLine.MODIFYALL("VAT Correction",FALSE);
      END;

      SalesLineEXT.RESET;
      SalesLineEXT.SETRANGE("Document Type","Document Type");
      SalesLineEXT.SETRANGE("Document No.","No.");
      IF NOT SalesLineEXT.ISEMPTY THEN BEGIN
        SalesLineEXT.MODIFYALL("VAT Amount (Doc)",0);
        SalesLineEXT.MODIFYALL("VAT Base Amount (Doc)",0);
        SalesLineEXT.MODIFYALL("Amt including VAT (Doc)",0);
        SalesLineEXT.MODIFYALL("Currency Factor (Doc)",0);
        SalesLineEXT.MODIFYALL("Curr.VAT Amount (LCY)",0);
        SalesLineEXT.MODIFYALL("VAT Base Amount (LCY)",0);
        SalesLineEXT.MODIFYALL("Amt incl. VAT (LCY)",0);
        SalesLineEXT.MODIFYALL("VAT Currency Factor",0);
        SalesLineEXT.MODIFYALL("VAT Base Amount (VAT Currency)",0);
        SalesLineEXT.MODIFYALL("VAT Amount (VAT Currency)",0);
        SalesLineEXT.MODIFYALL("Amt incl. VAT (VAT Currency)",0);
        SalesLineEXT.MODIFYALL("VAT Difference (VAT Currency)",0);
      END;
    END;

    PROCEDURE SetEXTLineAmounts@1220029();
    VAR
      SalesLineEXT@1220000 : Record 84941;
      SalesLine@1220001 : Record 37;
    BEGIN
      SalesLine.RESET;
      SalesLine.SETRANGE("Document Type","Document Type");
      SalesLine.SETRANGE("Document No.","No.");
      IF NOT SalesLine.ISEMPTY THEN BEGIN
        SalesLine.MODIFYALL("VAT Difference",0);
        SalesLine.MODIFYALL("VAT Difference (LCY)",0);
        SalesLine.MODIFYALL("VAT Correction",FALSE);
      END;

      SalesLineEXT.RESET;
      SalesLineEXT.SETRANGE("Document Type","Document Type");
      SalesLineEXT.SETRANGE("Document No.","No.");
      IF NOT SalesLineEXT.ISEMPTY THEN BEGIN
        SalesLineEXT.MODIFYALL("Currency Factor (Doc)","Currency Factor");
        SalesLineEXT.MODIFYALL("VAT Currency Factor",SalesHeaderEXT."VAT Currency Factor");
        SalesLineEXT.FINDSET;
        REPEAT
          SalesLine.GET(SalesLineEXT."Document Type",SalesLineEXT."Document No.",SalesLineEXT."Line No.");
          SalesLineEXT.UpdateSalesEXTLines(SalesLine);
        UNTIL SalesLineEXT.NEXT=0;
      END;
    END;

    PROCEDURE CheckBYUARUCreditMemo@1220047(lrecSalesHeader@1220000 : Record 36);
    VAR
      lrecOrigSalesInvoice@1220001 : Record 112;
      lrecContact@1220002 : Record 5050;
      TEXT0001@1220003 : TextConst 'CSY=Dobropis pro z†kazn°ky z BY,UA nebo RU by mÿl m°t stejnou ü†stku (%1) jako pÖvodn° doklad (%2). Pokraüovat ?;ENU=Credit memo for customers from BY,UA or RU should have the same amount (%1) as original invoice (%2). Continue ?';
      TEXT0002@1220004 : TextConst 'CSY=P˝eruÁeno ußivatelem.;ENU=User abort.';
      lrecSalesLines@1220005 : Record 37;
      lineAmount@1220006 : Decimal;
      TEXT0003@1220007 : TextConst 'CSY=Nelze smazat. Dobropis pro z†kazn°ky z BY,UA nebo RU mus° m°t stejnou ü†stku jako pÖvodn° doklad;ENU=Credit memo for customers from BY,UA or RU must have the same amount as original invoice.';
    BEGIN
      IF NOT GUIALLOWED THEN
        EXIT;
      //IF lrecSalesHeader.Geschaftsbereich = 'KARTY' THEN
      //  EXIT;
      IF lrecOrigSalesInvoice.GET(lrecSalesHeader."Orig.TAX Document No.") THEN BEGIN
        IF lrecContact.GET(lrecOrigSalesInvoice."Sell-to Customer No.") THEN BEGIN
          IF lrecContact."Country Code" IN ['BY','UA','RU'] THEN BEGIN
            //lrecSalesHeader.CALCFIELDS(lrecSalesHeader.Amount);
            IF NOT isNAKL(lrecSalesHeader."Orig.TAX Document No.") THEN
              ERROR(TEXT0003);
            {
            lrecOrigSalesInvoice.CALCFIELDS(lrecOrigSalesInvoice.Amount);
            lrecSalesLines.SETRANGE(lrecSalesLines."Document Type",lrecSalesHeader."Document Type");
            lrecSalesLines.SETRANGE(lrecSalesLines."Document No.",lrecSalesHeader."No.");
            lineAmount := 0;
            IF lrecSalesLines.FINDSET THEN BEGIN
              REPEAT
                lineAmount += lrecSalesLines."Line Amount";
              UNTIL lrecSalesLines.NEXT = 0;
            END;
            IF lineAmount <> lrecOrigSalesInvoice.Amount THEN BEGIN
              //IF NOT CONFIRM(TEXT0001,TRUE,lineAmount,lrecOrigSalesInvoice.Amount) THEN ERROR(TEXT0002);
              ERROR(TEXT0003);
            END;
            }
          END;
        END;
      END;
    END;

    PROCEDURE isNAKL@1220037(inSalesHeaderNo@1220000 : Code[20]) : Boolean;
    VAR
      locSalesHeader@1220001 : Record 112;
    BEGIN
      locSalesHeader.GET(inSalesHeaderNo);

      IF locSalesHeader.Geschaftsbereich IN ['SLUZBY','SLUZBY PL','SLUZBY SK'] THEN
        EXIT(FALSE);

      IF STRPOS(locSalesHeader.Geschaftsbereich,'MYTO') = 1 THEN
        EXIT(FALSE);

      IF (STRPOS(locSalesHeader."No.",'310') = 1) THEN
        EXIT(FALSE);

      EXIT(TRUE);
    END;

    PROCEDURE CheckCrMemoDueDate@1220039();
    BEGIN
      //NAV-22365+
      IF "Document Type" <> "Document Type"::"Credit Memo" THEN
        EXIT;
      IF ("Due Date" = 0D) OR ("Internal Due Date" = 0D) THEN
        ERROR(ErrCrMemoDueDate, FIELDCAPTION("Due Date"), FIELDCAPTION("Internal Due Date"));
      //NAV-22365-
    END;

    BEGIN
    {
      CDLBA - 4.4.2005 - VP - new fields: Customer Bank Account Code, KS, SS
             20.6.2005 - VP - new field Bank Account No.

      CDLCHP - 2.2.2007 - ZJ: merge Changed Posting from 4.00
                              - new fields 88660(+code),88661
                              - new glob.vars DiffGL,CustPostGroup + 1x OnValidate("Sell-to Customer No.")

      CDLZA - 5.2.2007 - ZJ: merge CDL Advances from 4.00
                             - not use std.Advance (new glob.texts Err000,Err001 + 1x changed code OnInsert + 1x OnModify)
                             - rename OptionCaption in "Document Type","Applies-to Doc. Type" for std.advances
                             - new fields 88910..88913 + glob.var AdvanceCU + glob.texts tAdvanceExists,Mes000
                             - 1x changed code OnDelete + new function CheckAdvCurrency
                             - modified OnValidate Triggers of "Currency Code", "Posting Date", "Sell-to Customer No."
                             - 2x modified OnValidate(Bill-to Customer No.) + loc.var lCustLedgEntry

      CDLEU - 3.4.2005 - ZJ: modification for European Union
                             - new field 55010 + trigger OnValidate() + loc.text
                             - new global cuGenJnlCheckLine
                             - modified trigger Posting Date - OnValidate()
                             - modified function InitRecord()
                             - modified trigger EU 3-Party Trade - OnValidate() + 7 loc.vars

      CDLINT - 12.8.05 - MV: modifications for Intrastat
                             - modified trigger Location Code - OnValidate()
                             - modified trigger Sell-to Customer No. - OnValidate()
                             - modified trigger Ship-to Code - OnValidate()

      CDLS3 - 12.10.2005 - MV - modification for EU - 3rd Party Trade SK
                              - new field 88850 + code in trigger OnValidate

      CDLS1 - 17.10.2005 - MV - modifications for SK
                              - caption "VAT Registration No." - MLCaption(SKY)=I¨ DPH
                              - added field 80000
            - 24.10.2005 - MV - added code in triggers

      CDLC20 - 12.09.2005 - JV - VAT Country Code
                               - modified code Ship To Code - OnValidate

      CDLZA - 23.5.2007 - ZJ: Cr.Memo for Tax Document
                              - new field 88914 + OnValidate + glob.text Err005

      WG003 - Location Default Dimension
        - VP 9.8.2007
          triggers modified: Bill-to Customer No. - OnValidate()
                             Location Code - OnValidate()
                             Salesperson Code - OnValidate()
                             Job No. - OnValidate()
                             Campaign No. - OnValidate()
                             Bill-to Customer Template Code - OnValidate()
                             Responsibility Center - OnValidate()
          proc modified: CreateDim

      WG004 - 09.08.2007 - MKr - added new field "Internal Due Date"
                               - modified trigger "Due Date".OnValidate()
                               - modified trigger "Payment Terms Code".OnValidate()

      WG015 - 27.08.2007 - RCH - added new field "Refund No."
              19.10.2007 - RCH - added new field "Request Refund No."

      WG017 - P&G modification - VP 4.10.2007 - trigger OnInsert modified
                                    28.12.2007 - trigger Bill-to Customer No. - OnValidate() modified

      WG021 - 24.10.2007 - VP - refined :-) field "VAT Settlement Country Code"

      WG019 - 24.10.2007 - JV - Sales Source Prices
                              - modified trigger Payment Terms Code-OnValidate
                              - modified function RecreateSalesLines

       WILHELM + ZELLER AG / easy working
       -------------------------------------------------------------------------------
       Project: TESSOL
       Version: TESSOL 1.00
       Manager: wz.sh   Stephan Hammon

       Developer: wz.gm Gerd Moeken

       ∏ Copyright 2006 - All rights reserved

       Date       Developer No.  Description
       -------------------------------------------------------------------------------
       21.03.2006 wz.gm     GB¯1 - Neues Feld GeschÑftsbereich,
                                   neue Funktionen GetGeschÑftsbereich, GeschÑftsbereichsdaten
       23.03.2006 wz.gm     GB¯1 - VerkÑufernummer, Zahlungsbedingung und Zahlungsfomr Åber GeschÑftsbereich
       27.03.2006 wz.ak     FE¯1 - Felderweiterungen von LÑnge Text30 auf Text50 : Bill-to Address/2,Bill-to City,
                                     Ship-to Address/2,Ship-to City,Sell-to Address/2,Sell-to City,Name 3
       26.04.2006 wz.ak     GB¯1 - Feld Auftragstyp erweitert um Optionswerte Tankkarte und Maut
       11.05.2006 wz.ak     VB¯1 - Verkaufsbelege: Steuerungsparameter fÅr Druck
                                     Neue Felder:
                                       60103 Tankwagen-Abrechnungsart
                                       60104 Rechnungsversand
                                     Neue Funktionen: GetShippingNo
       16.05.2006 wz.ak     SD¯1 - Stammdaten: Neues Feld fÅr Lieferaddresse
                                       60000 Lief. an Ortsteil
       20.06.2006 wz.ak     SR¯5 - Sammelrechnung
                                     Neue Felder:
                                       60105 SARE-KZ
                                       60106 SchlÅssel SARY
                                     Key3 erweitert: "Document Type,Combine Shipments,Bill-to Customer No.,Currency Code" auf
                                          "..,Bill-to Customer No.,Sell-to Customer No.,Ship-to Code,Shipment Date,Currency Code"
                                     neuer Key11: "Document Type,Combine Shipments,Bill-to Customer No.,Sell-to Customer No.,
                                                   Ship-to Code,Shipment Date,Currency Code"


       24.07.2006 wz.haube  01 : Feld Monatsendrechnung fÅr Kontingentmonatsregulierung neu.
       09.08.2006 wz.haube  02 : Auftragstyp um "RÅckvergÅtung" erweitert.
       30.08.2006 wz.UB     03 : Neues Feld: Abrechnungsland
       01.09.2006 wz.UB     04 : Neues Feld: Land
       02.11.2006 wz.ah     05 : Feld Land RÅckvergÅtung neu.
       02.11.2006 wz.ah     06 : SchlÅssel "Document Type,Sell-to Customer No.,Land RÅckvergÅtung,Posting Date" neu.
       09.11.2006 wz.ub     07 : Zahlungsbedingung auf die Tabelle 60033  zugreifen
       09.11.2006 wz.ah     08 : Feld Mauttyp neu. Unterscheidung ob Maudberechnung aus Datei oder Transaktionen.
       10.11.2006 wz.ak     09 : CalcFields auf Kreditlimit, da dieser nun FlowField ist.
       13.11.2006 wz.ah     10 : Neues Feld 60201
       16.11.2006 wz.ak    MIN¯: Anpasssung wg, Std.-Funktion "Zeilen aktualisieren" bei énderung Kopfdaten wie Kostenstelle
       30.11.2006 wz.ub     11 : Bei Eingabe der Beladestelle wird auch Lagerort mit upgedatet
       07.12.2006 wz.jd     12 : Kst. fÅr AuftrÑge - Kraftstoffe und Heizîl aus dem GeschÑftsbereich holen
       12.12.2006 wz.ub     13 : Bei Tankkarten- und Mautrechnung keine AbprÅfung auf Deb gesperrt
       18.12.06   wz.ah     14 : Felder "Fax versendet" und "Mail versendet" neu.
       22.01.07   wz.ub     15 : Feld Order created by, Order Released by und Credit Limit Exceeded (by) verlÑngert auf 20 Stellen
       22.01.07   wz.ub     16 : Neuer Key Document Type,Payment Terms Code,Payment Method Code,No.
       14.03.07   wz.ub          Feld Autragstyp um Co_Branded erweitert
       14.05.07   wz.jd     17 : Lieferadresse mit Hauptlieferadresse aus Debitor vorbelegen
       11.06.07   wz.ub     18 : Neues Feld UST-Id fÅr Rev.charge
       03.08.07   wz.ub     19 : Neuee Felder 70000 und 70001
       09.08.07   wz.ub     20 : Meldung Amortisationszuschlag
       21.08.07   wz.ub     21 : Update der Felder 70000 und 70001
       29.10.07   wz.jd     22 : In "Bill-to-Customer No."-OnValidate: COMMIT inserted before verifying the Creditlimit
      //* ####################################################################
      //* Wilhelm + Zeller AG
      //* Navision fÅr Mineralîlhandel 4.01
      //* Stand: 01.03.06
      //* ####################################################################

      IC¯ 03.05.2005 WZ.TL     - Intercompany fields added.
      WZUB*020605 :  öbernahme des Lagerortes aus dem Debitor
      WZ¯1 210705WZRM: Warenausgangsdatum wird bei KraftstoffauftrÑgen gefÅllt
      RSM¯ WZRM250705: Neues Feld "Rabattinfo" Text 50
      SP¯1-OR060805: Lagerort in VKZ nur mit Beladestelle aktualisieren, wenn Kraftstoff- oder Heizîlauftrag
      AF-OR110805: "Berechtigung Auftragsfreigabe" auf editable gesetzt
      RM300805: Neues Feld "Selbstabholerrabatt" mit 0,05 Euro vordefiniert
      UB 200905  Auftrag kann nicht gelîscht werden, wenn Proformarechnung schon gedruckt ist
      WB1¯-WB 220905: Neues Feld 50016 "Kundenrabattgruppe" und Wert-öbernahme aus Debitor
      PFR-OR041005: Wurde vom Auftrag eine Proformarechnung gedruckt, so darf dieser nicht gelîscht werden
                    -> Korrektur von UB200905 durchgefÅhrt
      KS-OR051005: Kostenstelle in VKK nicht Åber Dimensionsmanagement, sondern je Auftragstyp unterschiedlich
      BB-OR061005: Standardvorbelegung von Buchungsbeschreibung deaktiviert
      KS-WB211005: Kurzzeitig im Validate von "Sell to Cust..." die Kostenstelle fÅr SchmierstoffauftrÑge aus Einrichtung gezogen
                   aber wieder entfernt, da dadurch im Telefonverkauf ein Problem entsteht.
      EISWZR Upgraded object from 370 to 4.01
      WB-230206: In AbhÑngigkeit vom Auftragstyp muss der Lagerort zugeordnet werden.
                 (Angepasst fÅr Gutschriften und Rechnungen, da hier der Auftragstyp manuell gewÑhlt wird.)
                 Im Validate-Trigger des Lagerorts werden automatisch auch die Lagerorte der Zeilen geÑndert.
                 (Meldung, dass énderungen in Zeile manuell nachzuziehen seien, entfernt)
      WZ-OR080306: Erweiterung Fkt. "RecreateSalesLines" bei énderung des RechnungsempfÑngers
      WB-100306:   Auftragstyp Ñndern verbessert.
      WZ-090107:   SchlÅssel erweitert: Sell-to Customer No.,No.

      WG002 - 19.09.2007 - PV - Generate Dimension Value ORDER while creating Sales Order
                              - new functions CreateORDERdim, DeleteORDERdim
                              - modified triggers OnInsert, OnDelete
                              - modified function CreateDim

      WG014 - 24.10.2007 - MKr - added fields SklPohTypPlatby,KartaStrojCislo,CisloZadal,SmenaCislo,CentrosSklPohDoc,ToDeliveryPosting,
                                 ToInvoicePosting,"Inv. Period Start Date","Inv. Period End Date"
                               - added key SklPohTypPlatby,Sell-to Customer No.,Currency Code,Inv. Period Start Date,Inv. Period End Date

      WG021 - 20.10.2007 - MC - New fields 84451, 84452
      01  231007  wz.ah  :  Feld "assigned to delivery note" added.
      02  241007  wz.ah  :  GeschÑftsbereichsfunktion auskommentiert da unterschiedliche öbersetzungen der Auftragstypen.

      WG012 - 27.10.2007 - PV - Relations between Ship-to Addresses
                              - new field 84550 + trigger OnValidate
                              - modified trigger Ship-to Code - OnValidate()
      WG030 - AC - 15.11.2007 new key "Sell-to Customer No.","Inv. Period End Date"

      WG025 - 27.11.2007 - PV - Link to Document table (Wholesales Contract No.)
                              - new fields 84560 (+trigger OnLookup), 84561

      WG026 - 27.11.2007 - PV - new field 84562 "Kind of Order"
                              - modified function InitRecord()

      WG033 - 27.11.2007 - PV - Due date calculation accoring to Business Area
                              - modified trigger Sell-to Customer No. - OnValidate()
                              - modified trigger VAT Taxation Date - OnValidate()
                              - modified trigger Payment Terms Code - OnValidate()

      WG034 - 27.11.2007 - PV - Create purch. orders form sales order
                              - new function Create Purch. Order Product
                              - new function Create Purch. Order Transport
            - 28.11.2007 - PV - modified function InitRecord()
                              - new field 84563
            - 28.12.2007 - PV - modified trigger Requested Delivery Date - OnValidate()

      WG037 - PV - 16.12.2007 - Freight Calculation
                              - modified trigger Freight Table - OnValidate()
                              - modified trigger Ship-to Code - OnValidate() - 2x
                              - modified function UpdateSalesLines

      WG034 - JD - 27.12.2007 - added field 84419
                              - modified trigger Sell-to Customer No. - OnValidate()
                              - added function GetContactFromCust(VAR Contact : Record Contact) : Boolean
            - PV - 31.12.2007 - new fields 84570..84575
                              - modified trigger OnInsert
                              - modified trigger OnModify
            - JD - 31.12.2007 - added field 84420

      WG011 - 02.01.2007 - PV - Dimension Code for Ship-to Address
                              - modified trigger Ship-to Code - OnValidate()
      WG032 09.01.2008 - CDLAC- modified trigger OnValidate() on "Sell-to Customer No."

      WG014 - 16.01.2008 - MKr - added fields 84510..84518

      JV - 30.01.2008 - Do not change for Credit Memo and Return Order
                      - modified trigger Payment Terms Code - OnValidate() (2x)

      034 - 04.02.2008 - Wholesales default values
                       - modified trigger Sell-to Customer No. - OnValidate()

      WG032 15.02.2008 - CDLAC- Inserted new field "Doc. No. Returns Deposit OBU"
      WG032 04.03.2008 - CDLAC- Added field in key "Currency Code","Bill-to Name","Sell-to Customer No.","Inv. Period End Date"
      WG032 23.04.2008 - CDLAC- new fci CheckPaymentMetod modified triger "Currency Code".OnVAlidate()
      WAG   02.05.2008 - CDL AC  new field 84600
      WAG   14.05.2008 - CDL AC - modified function CheckPaymentMetod

      WG034 - 20.05.2008 - JD - added function CheckPurchOrdersContacts,
                                modified functions "Create Purch. Order Product" and "Create Purch. Order Transport"

      WG034 - 22.05.2008 - JD - added parameter SendByEmailFax to functions "Create Purch. Order Product"
                                and "Create Purch. Order Transport" + modified these functions

      WG034 - 15.07.2008 - JD - added adding comment when creating purchase order
                              - modified functions Create Purch. Order Product, Create Purch. Order Transport
                              - added fields 84401, 84402

      WG - JD - 23.07.2008 - modified functions Create Purch. Order Product, Create Purch. Order Transport
                           - sending of purch. orders removed from functions Create Purch. Order Product, Create Purch. Order Transport

      WG065 - 10.02.2009 - JHa - new field 84576 - VAT Settlement Customer Country

      CDLFCA - 19.01.2009 - JV - Foreign Currency Advances
                               - new fields 88920,88921

      WG - 06.03.2009 - CDLJV - change VAT taxation Date before Document date (due to Due Date calculation)
                              - modified Posting Date - OnValidate()

      WG065 - 06.03.2009 - JV - change VAT Reg No and VAT Buss. Post Group by Customer Headquoter
                              - modified VAT Settlement Cust. Country - OnValidate()

      WG047 - 26.04.2009 - JV - Refunds
                              - deleted field 84421 (new field 84430)
                              - deleted fields 85415,85417
            - 29.04.2009 - JV - modified trigger OnDelete
            - 08.06.2009 - JV - new fields 84431,84432
            - 08.06.2009 - VP - modified trigger OnDelete
                              - new function GetFirstNoFromText,
                              - Permissions: TableData Sales Invoice Header=m,
                                             TableData Sales Cr.Memo Header=m
      WG - VP 8.6.2009 - changed length 50 -> 1 for fields: "Name 3"
      WG - 15.07.2009 - MP - modified function "Create Purch. Order Product" and "Create Purch. Order Transport"

      WG034 - 12.08.2009 - JD - added parameters in function CheckPurchOrderContacts + modified this function

      WG065 - 13.08.2009 - MP - modified function SetVATNoAndVATPg()

      WG071 - 13.08.2009 - JD - added field 84428

      CDLZA - 02.09.2009 - MP - modified
                                - modified trigger: Bill-to Customer No. - OnValidate()

      WG047 - 23.10.2009 - MP - cancel request refund
                                - added new field: 84433

      WG083 - 07.12.2009 - MP - VAT by date
                                - new function: SetVATToSalesLineByDate()

      WG028 - 14.12.2009 - MP - set customer limit and approval
                                - modified trigger: Wholesale Contract No. - OnLookup()

      WG - 20.01.2010 - MP - new check at setting field Payment Method Code
                             - modified trigger: Bill-to Customer No. - OnValidate()
                             - modified function: CheckPaymentMetod()

      WG080 - 18.02.2010 - MP - posting payments for deposit customer
                                - new field: 84490

      WG080 - 02.03.2010 - MP - processing charge for dep. cust.
                                - modified trigger: VAT Settlement Cust. Country - OnValidate()

      WG012 - JD - 25.03.2010 - modified trigger "Bill-to address code - OnValidate()"

      WG - 02.04.2010 - MP - rem code
                             - modified trigger: Order created - OnValidate()

      WG083 - 23.06.2010 - MP - VAT by date
                                - modified function: SetVATToSalesLineByDate()

      WG - 01.08.2010 - MP - repair functionality
                             - modified trigger: Supply Point - OnValidate()

      WG047 - 27.10.2010 - MP - repair validate field "VAT Settlement Cust. Country"

      WG - 23.11.2010 - MP - repair validate field "VAT Settlement Cust. Country"

      WG112 - 14.12.2010 - MP - invoicing toll bonus
                             - added new field: 84492, 84493
                             - enabled = No on field: 5010047

      WG119 - Mantis 1340 - VP 24.2.2011 - trigger Bank Account No. - OnValidate() modified

      WG123 - Mantis 1717 - RCH 29.06.2011 - added new function AddDiscountToSalesLines
      DPH11 - 31.3.2011 - ZJ: new field 88101..88102 (VAT from 1.4.2011 3a)
      DPH11 - 13.07.2011 - PVI - field "Rabattinfo" shortened to 1 character

      WG120 - Mantis 1768 - RCH - 10.8.2011 - new field 84495

      WG - 26.09.2011 - RCH - M1656 -  AddDiscountToSalesLines modify

      WG128 - MM - 30.11.11 - M2445 - POV
                            - modify: "Create Purch. Order Product"; "Create Purch. Order Transport"; CheckPurchOrdersContacts
                            - create: CorrectionPurchaseOrder
                            - RCH confirm functionality 02.10.2012

      WG131 - 16.02.2012 - MP - billing over the limit
                                - mant 2664
                                - new field: 84496, 84497

      WG133 - 28.02.2012 - MP - NI
                                - mant 133
                                - modified trigger: OnDelete(), Bill-to Customer No. - OnValidate()
                                - new field: 84435, 84436

      WG136 - DuLo - 21.03.2012 - M3621
                                  - new field 55015
                                  - modified OnInsert()

      WG - 03.04.2012 - MP - invoicing for customer out of EU
                             - mant 3575
                             - modified trigger: VAT Settlement Cust. Country - OnValidate()

      WG - 12.04.2012 - RCH - M3349 - EW Promo Discount
                             - new function AddPromoDiscountToSalesLines

      WG - 07.06.2012 - RCH - M3959 - Customer Adress History
                             - new functions SellToAdressH, BillToAdressH
                             - on validate trigger change (3x) (9.8.2012 - 1x correction)
                             - modified function SetVATNoAndVATpg (new primary key in tab 84437)

      WG - 13.06.2012 - RCH - M3599 - Fixed VAT Taxation Date
                             - new Field 84577 Fixed VAT Taxation Date
                             - Posting Date - On Validate trigger changed (2x)
                             - Init Record modified
                             - disabled fields (record length exceed 4000)
                                  //60400 Monatsendrechnung Mÿs°ün° vy£ütov†n° Boolean haube, Kontingentregulierung Normal
                                  60401 Land RÅckvergÅtung Zemÿ zpÿtn† n†hrada Code 20 Normal
                                  60402 Mauttyp Typ mÏta Option Normal ,Transaktionsmaut,Maut DE
                                  60600 Fax versendet Fax odeslal Boolean Normal
                                  60601 Mail versendet Mail odeslal Boolean Normal
                                  //60602 assigned to delivery note <assigned to delivery note> Boolean Normal
                                  //70000 Amortisationszuschlag berechn. Vy£ütov†n° amortizace Boolean Tessol Normal
                                  //70001 Satz fÅr Amortisation Vÿc pro amortizaci Decimal Tessol Normal
                             - disabled key Document Type,Sell-to Customer No.,Land RÅckvergÅtung,Posting Date

      WG140 26.06.12 - KH - Field Business Unit Code
                          - On Validate Field Vat Settlement Country Code

      WG - 27.07.2012 - RCH - M3959 - Customer Adress History
                             - modified functions SellToAdressH, BillToAdressH

      WG145 - 22.08.2012 - MP - volume bonus
                                - mant 4142
                                - new field: 84579

      WG - 03.09.2012 - MP - repair functionality
                             - mant 4314
                             - modified trigger: Bill-to Customer No. - OnValidate(), Ship-to Code - OnValidate()

      WG071 - 14.09.2012 - JD - Mantis 4312
                              - new field 84437
                              - disabled field 5010008
                              - change length field 5010007 from 20 to 1

      WG141 - 02.11.2012 - MP - new project EE
                                - new field: 84453

      WG141 - 29.02.2012 - MP - new project EE
                                - mant 4682
                                - modified trigger: OnDelete()
                                - modified permission, added rec 84814

      WG - Mantis 4830 - VP 4.12.2012 - new flow field 84403 Quantity Total

      WG - 10.01.2013 - MP - bilingual documents
                             - mant 4749
                             - new function: UpdateLineItemTranslations()
                             - modified trigger: VAT Settlement Country Code - OnValidate()

      WG003, WG011 - Mantis 3688 - Dimension Code for Ship-to Address and Location
        - 15.1.2013 - VP - function removed from triggers and functins

      WG - 29.01.2013 - MP - repair functionality Customer Adress History
                             - modified function: BillToAdressH()

      WG149 KH 120213 Totem Minus - AddDiscountToSalesLine - Without Totem Minus Lines

      WG - 13.03.2012 - RCH - M5027
                            - New field Cancelled Prerefund Doc

      WG - 19.03.2013 - RCH - M5179 - EW Promo Discount
                             - modified function AddPromoDiscountToSalesLines

      CDLUT - 31.05.2013 - DuLo - Unreliable Taxpayer
                                - flowfields added:
                                  77700 "Unreliable Taxpayer"
                                  77701 "Unreliability Publication Date"
                                  77705 "Last Update Date and Time"
                                  77706 "Published Account"

      WG - RCH - 22.07.2013 - M5409
                              - "Bill-to Name"              30 -> 50
                              - "Bill-to Name 2"            30 -> 50
                              - "Ship-to Name"              30 -> 50
                              - "Ship-to Name 2"            30 -> 50
                              - "Sell-to Customer Name"     30 -> 50
                              - "Sell-to Customer Name 2"   30 -> 50
                              - Abrechnungsland             disabled
                              - Land                        disabled
                              - "UST-Id fur Rev.Charge"     disabled

      WG - 05.08.2013 - RCH - M6036
                            - "Sell-to Customer No." OnModify change
                            - "Ship-to Code"         OnModify change

      WG - 06.12.2013 - MP - extra price by location
                             - mant 3013
                             - new function: AddExtraDiscountToSalesLines()

      WG154 Mantis 6625 VP 9.12.2013 - triggers modified: VAT Taxation Date - OnValidate
                                                          VAT Settlement Country Code - OnValidate

      WAG - 30.12.2013 - AS - M0006995
                               - modify InsertTrigger, CreateDim()

      WAG - 04.02.2014 - MP - Ticket#20140109105155
                              - modified trigger: VAT Settlement Cust. Country - OnValidate()

      WG - 17.02.2014 - MP - mant 6370
                             - modified function: AddDiscountToSalesLines()

      WG - 28.05.2014 - RCH - M5183
                            - "VAT Settlement Country Code" OnValidate change

      WAG - 10.06.2014 - AS - M0009084
                             - modified trigger Sell-to Customer No. - OnValidate()

      WAG - 01.09.2014 - JV - J10015
                            - modified OnInsert,OnModify,OnDelete,VAT Taxation Date,Currency Code,VAT Settlement Country Code - OnValidate
                            - modified Document Date - OnValidate
                            - modified AddDiscountToSalesLines,AddPromoDiscountToSalesLines,AddExtraDiscountToSalesLines
                            - new functions ClearSalesHeaderEXT,GetSalesHeaderEXT,GetSalesHeaderEXT2,CreateSalesHeaderEXT,
                                            ModifySalesHeaderEXT,DeleteSalesHeaderEXT,VATCurrRateTypeOnValidate,
                                            VATCurrCodeOnValidate,VATCurrCodeOnLookup,VATCurrCodeOnAssistEdit,
                                            VATCalcCurrCodeOnValidate,VATCalcCurrCodeOnLookup,UpdateVATCurrencyFactor

      WAG - 26.02.2015 - JV - J10015
                            - modified VATCurrRateTypeOnValidate
                            - new functions ClearEXTLineAmounts,SetEXTLineAmounts

      WG - 09.03.2015 - PVI - NAV-11706 - set currency code
                                        - "Ship-to Code".OnValidate modified, 4x local var

      WG - 23.03.2015 - SS - NAV-11865
                           - new function CheckBYUARUCreditMemo();
                           - modified function Orig.TAX Document No. - OnValidate()

      WG164 - £pravy novÇ cenotvorby, CDLKH

      WG - 22.05.2015 - MP - NAV-12828
                             - new function: CheckAndSetLocalReverseCharge()
                             - modified function: SetVATNoAndVATPg()

      WG - 03.07.2015 - MP - NAV-13209
                             - new function: IsOrderToInvForCustProdType(), FilterOrderToInvForCustProdType(),
                                 ShowOrderToInvForCustProdType()

      WG - 20.07.2015 - SS - SS:NAV-11668
                           - modified  Create Purch. Order Product(),Create Purch. Order Transport()

      WG - 14.08.2015 - MP - NAV-13613
                             - new function: GetVATCurrencyFactor()
                             - modified trigger: Document Date - OnValidate(), VAT Taxation Date - OnValidate()

      WG - 02.11.2015 - RCH - NAV-13779
                             - modified function: CheckAndSetLocalReverseCharge()
      WG - 23.11.2015 - RCH - NAV-15428
                             - modified function: CheckAndSetLocalReverseCharge()

      WG - 04.12.2015 - RCH - NAV-15514
                            - NI Factoring
                            - New field 84580

      WG - 15.12.2015 - RCH - NAV-13911 - merge CDLKH7
      CDLKH7 - 01.10.2015 - PU - VAT Control Statement
                               - the new fields - 82001("VAT Control Statement Date")
                                                - 82002("Tax Doc. Registration No.") - 1x OnValidate //!!! ve WAG pouze Text 20 (m°sto)
                               - a global variable VATControlStatMgtCU
                               - 1x InitRecord, "VAT Taxation Date" - 1x OnValidate

      WG - 30.12.2015 - SS - NAV-15171
                           - modified AddDiscountToSalesLines(),AddPromoDiscountToSalesLines(),AddExtraDiscountToSalesLines()

      CDLOUD - 19.11.2015 - DuLo - Special tax arrangement - SK 2016
                                 - modified "Sell-to Customer No.".OnValidate(), "Bill-to Customer No.".OnValidate(),
                                   "Gen. Bus. Posting Group".OnValidate(), "Sell-to Customer Template Code".OnValidate(),
                                   "VAT Date".OnValidate()

      WG - 20.01.2016 - MP - NAV-16123
                             - modified function: CheckAndSetLocalReverseCharge()

      WG - 27.01.2016 - MP - NAV-16210
                             - modified trigger: VAT Settlement Country Code - OnValidate()
                             - modified function: SetVATNoAndVATPg(), CheckAndSetLocalReverseCharge()

      WG - 05.02.2016 - MP - NAV-16357
                             - repair NAV-16210

      WG - 08.02.2016 - AB - NAV-15864
                             - new field 88950 -Total Quantity Shipped
                             - modify field 5010006 - Total Qty.
                             - modify field 84403 - Quantity Total

      WG - 14.04.2016 - MP - NAV-15949
                             - hotfix for WAG
                             - modified triggers: VAT Taxation Date - OnValidate()

      WAG - 14072016 - RAKU - NAV-17204
                            - call function CheckBlockedWAG in Customer.

      WAG - 24.08.2016 - AS - NAV-16164
                                - add field 61201 - Internal Document

      WG - 16.11.2016 - MP - NAV-19104
                             - modified function: CheckPaymentMetod()
                             - modified trigger: Currency Code - OnValidate()

      WAG - 12.12.2016 - VPA - NAV-18944
                             - modified oninsert

      WG - 22.12.2016 - JP - NAV-17514
                             Change function CheckAndSetLocalReverseCharge

      WG - RAKU - 15022016 - NAV-19840
                             Remove code.

      WG - 25.05.2017 - RAKU - NAV-22520
                               Hide dialog.

      WG - 18.08.2017 - VPA - NAV-22365

      NAV2016 - 14.9.2017 - KH - Call NAV2016AssignmentManagement.WAG_GetAssignmentSign

      WG - 16.10.2017 - JD - NAV-24468
                           - deleted field 50012
                           - new field 84601

      NAV2016 - 19.10.2017 - KH - New Flowfield 76000

      WG - 08.11.2017 - MP - POTERP-547
                             - new field: 70955
    }
    END.
  }
}

